<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”»åƒç”Ÿæˆ V2 - å®Ÿç”¨ç‰ˆ | SCF V5</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
            font-size: 2em;
        }

        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .service-card {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
            background: white;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border-color: #667eea;
        }

        .service-card.active {
            background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1));
            border-color: #667eea;
        }

        .service-name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .service-desc {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .service-features {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .feature-tag {
            background: #f0f0f0;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            color: #555;
        }

        .prompt-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .prompt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .prompt-title {
            font-weight: bold;
            color: #333;
        }

        .template-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .template-btn:hover {
            background: #5a6fc8;
        }

        .prompt-input {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
        }

        .prompt-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
        }

        .enhancement-section {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }

        .enhancement-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .enhancement-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .enhancement-chip {
            background: white;
            border: 1px solid #ddd;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9em;
        }

        .enhancement-chip:hover {
            background: #f0f0f0;
        }

        .enhancement-chip.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .action-section {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .action-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-generate {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.4);
        }

        .btn-copy {
            background: #28a745;
            color: white;
        }

        .btn-copy:hover {
            background: #218838;
        }

        .btn-clear {
            background: #6c757d;
            color: white;
        }

        .btn-clear:hover {
            background: #5a6268;
        }

        .history-section {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .history-title {
            font-weight: bold;
            color: #333;
        }

        .history-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .history-item {
            background: white;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .history-item:hover {
            background: #f8f9fa;
            border-color: #667eea;
        }

        .history-prompt {
            font-size: 0.9em;
            color: #333;
            margin-bottom: 5px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .history-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.8em;
            color: #666;
        }

        .templates-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .templates-modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.3em;
            font-weight: bold;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
        }

        .template-list {
            display: grid;
            gap: 10px;
        }

        .template-item {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .template-item:hover {
            background: #e9ecef;
        }

        .template-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .template-text {
            font-size: 0.9em;
            color: #666;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-box h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .info-box p {
            color: #555;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .service-grid {
                grid-template-columns: 1fr;
            }
            
            .action-section {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ AIç”»åƒç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ V2</h1>
        
        <div class="info-box">
            <h3>ğŸ’¡ ä½¿ã„æ–¹</h3>
            <p>1. ä½¿ç”¨ã™ã‚‹AIã‚µãƒ¼ãƒ“ã‚¹ã‚’é¸æŠ<br>
               2. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã¾ãŸã¯ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰é¸æŠ<br>
               3. å¿…è¦ã«å¿œã˜ã¦æ‹¡å¼µã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ <br>
               4. ã€Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æœ€é©åŒ–<br>
               5. å„ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚µã‚¤ãƒˆã§ç”»åƒã‚’ç”Ÿæˆ</p>
        </div>

        <div class="service-grid">
            <div class="service-card active" data-service="dalle3">
                <div class="service-name">DALL-E 3</div>
                <div class="service-desc">OpenAI / ChatGPT Plus</div>
                <div class="service-features">
                    <span class="feature-tag">é«˜å“è³ª</span>
                    <span class="feature-tag">æ—¥æœ¬èªOK</span>
                    <span class="feature-tag">ç„¡æ–™æ ã‚ã‚Š</span>
                </div>
            </div>
            
            <div class="service-card" data-service="midjourney">
                <div class="service-name">Midjourney</div>
                <div class="service-desc">DiscordçµŒç”±</div>
                <div class="service-features">
                    <span class="feature-tag">ã‚¢ãƒ¼ãƒˆç‰¹åŒ–</span>
                    <span class="feature-tag">é«˜è§£åƒåº¦</span>
                    <span class="feature-tag">æœ‰æ–™</span>
                </div>
            </div>
            
            <div class="service-card" data-service="stable">
                <div class="service-name">Stable Diffusion</div>
                <div class="service-desc">DreamStudio / Civitai</div>
                <div class="service-features">
                    <span class="feature-tag">ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</span>
                    <span class="feature-tag">ãƒ¢ãƒ‡ãƒ«è±Šå¯Œ</span>
                    <span class="feature-tag">ç„¡æ–™å¯</span>
                </div>
            </div>
            
            <div class="service-card" data-service="bing">
                <div class="service-name">Bing Image Creator</div>
                <div class="service-desc">Microsoft / ç„¡æ–™</div>
                <div class="service-features">
                    <span class="feature-tag">å®Œå…¨ç„¡æ–™</span>
                    <span class="feature-tag">DALL-E 3</span>
                    <span class="feature-tag">ç°¡å˜</span>
                </div>
            </div>
            
            <div class="service-card" data-service="imagen">
                <div class="service-name">Google Imagen 3</div>
                <div class="service-desc">Google AI Test Kitchen</div>
                <div class="service-features">
                    <span class="feature-tag">æœ€æ–°AI</span>
                    <span class="feature-tag">é«˜å“è³ª</span>
                    <span class="feature-tag">ç„¡æ–™ãƒ†ã‚¹ãƒˆ</span>
                </div>
            </div>
            
            <div class="service-card" data-service="gemini">
                <div class="service-name">Gemini (Bard)</div>
                <div class="service-desc">Google / ç”»åƒç”Ÿæˆå¯¾å¿œ</div>
                <div class="service-features">
                    <span class="feature-tag">ç„¡æ–™</span>
                    <span class="feature-tag">æ—¥æœ¬èªOK</span>
                    <span class="feature-tag">çµ±åˆAI</span>
                </div>
            </div>
        </div>

        <div class="prompt-section">
            <div class="prompt-header">
                <span class="prompt-title">ğŸ“ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå…¥åŠ›</span>
                <button class="template-btn" onclick="showTemplates()">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠ</button>
            </div>
            
            <textarea id="promptInput" class="prompt-input" placeholder="ç”Ÿæˆã—ãŸã„ç”»åƒã®èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„...

ä¾‹: æ¡œãŒæº€é–‹ã®æ—¥æœ¬åº­åœ’ã§ã€ç€ç‰©ã‚’ç€ãŸå¥³æ€§ãŒå‚˜ã‚’æŒã£ã¦ç«‹ã£ã¦ã„ã‚‹ã€‚èƒŒæ™¯ã«ã¯å¯Œå£«å±±ãŒè¦‹ãˆã€å¤•ç„¼ã‘ã®å…‰ãŒå…¨ä½“ã‚’ç…§ã‚‰ã—ã¦ã„ã‚‹ã€‚å†™å®Ÿçš„ãªã‚¹ã‚¿ã‚¤ãƒ«ã€8Kè§£åƒåº¦"></textarea>
            
            <div class="enhancement-section">
                <div class="enhancement-title">ğŸ¯ æ‹¡å¼µã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§è¿½åŠ ï¼‰</div>
                <div class="enhancement-options">
                    <div class="enhancement-chip" data-text="masterpiece, best quality">æœ€é«˜å“è³ª</div>
                    <div class="enhancement-chip" data-text="ultra detailed, 8k resolution">è¶…é«˜è§£åƒåº¦</div>
                    <div class="enhancement-chip" data-text="photorealistic, RAW photo">å†™å®Ÿçš„</div>
                    <div class="enhancement-chip" data-text="anime style, cel shading">ã‚¢ãƒ‹ãƒ¡é¢¨</div>
                    <div class="enhancement-chip" data-text="oil painting style">æ²¹çµµé¢¨</div>
                    <div class="enhancement-chip" data-text="watercolor painting">æ°´å½©ç”»é¢¨</div>
                    <div class="enhancement-chip" data-text="cinematic lighting">æ˜ ç”»çš„ç…§æ˜</div>
                    <div class="enhancement-chip" data-text="golden hour lighting">ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¢ãƒ¯ãƒ¼</div>
                    <div class="enhancement-chip" data-text="depth of field, bokeh">è¢«å†™ç•Œæ·±åº¦</div>
                    <div class="enhancement-chip" data-text="wide angle lens">åºƒè§’ãƒ¬ãƒ³ã‚º</div>
                    <div class="enhancement-chip" data-text="macro photography">ãƒã‚¯ãƒ­æ’®å½±</div>
                    <div class="enhancement-chip" data-text="trending on artstation">ãƒˆãƒ¬ãƒ³ãƒ‰</div>
                </div>
            </div>
        </div>

        <div class="action-section">
            <button class="action-btn btn-generate" onclick="generateOptimizedPrompt()">
                ğŸš€ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
            </button>
            <button class="action-btn btn-copy" onclick="copyPrompt()">
                ğŸ“‹ ã‚³ãƒ”ãƒ¼
            </button>
            <button class="action-btn btn-clear" onclick="clearPrompt()">
                ğŸ—‘ï¸ ã‚¯ãƒªã‚¢
            </button>
        </div>

        <div class="info-box" style="margin-top: 20px;">
            <h3>ğŸ”— ç”»åƒç”Ÿæˆã‚µãƒ¼ãƒ“ã‚¹ã¸ã®ãƒªãƒ³ã‚¯</h3>
            <p id="serviceLinks">
                <strong>DALL-E 3:</strong> <a href="https://chat.openai.com" target="_blank">ChatGPT</a> ã¾ãŸã¯ <a href="https://www.bing.com/create" target="_blank">Bing Image Creator</a><br>
                ç”Ÿæˆã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ä¸Šè¨˜ã‚µãƒ¼ãƒ“ã‚¹ã§ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
            </p>
        </div>

        <div class="history-section">
            <div class="history-header">
                <span class="history-title">ğŸ“š ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå±¥æ­´</span>
                <button class="template-btn" onclick="clearHistory()">å±¥æ­´ã‚¯ãƒªã‚¢</button>
            </div>
            <div class="history-list" id="historyList">
                <!-- å±¥æ­´ã‚¢ã‚¤ãƒ†ãƒ ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
            </div>
        </div>
    </div>

    <!-- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="templates-modal" id="templatesModal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">ğŸ“š ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</span>
                <button class="modal-close" onclick="hideTemplates()">Ã—</button>
            </div>
            <div class="template-list">
                <div class="template-item" onclick="useTemplate('portrait')">
                    <div class="template-name">äººç‰©ãƒãƒ¼ãƒˆãƒ¬ãƒ¼ãƒˆ</div>
                    <div class="template-text">ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªãƒãƒ¼ãƒˆãƒ¬ãƒ¼ãƒˆå†™çœŸã€ã‚¹ã‚¿ã‚¸ã‚ªãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã€èƒŒæ™¯ã¼ã‹ã—ã€é«˜è§£åƒåº¦ã€å†™å®Ÿçš„</div>
                </div>
                <div class="template-item" onclick="useTemplate('landscape')">
                    <div class="template-name">é¢¨æ™¯å†™çœŸ</div>
                    <div class="template-text">å£®å¤§ãªè‡ªç„¶é¢¨æ™¯ã€ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¢ãƒ¯ãƒ¼ã®å…‰ã€åºƒè§’ãƒ¬ãƒ³ã‚ºã€é«˜ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ¬ãƒ³ã‚¸ã€8Kè§£åƒåº¦</div>
                </div>
                <div class="template-item" onclick="useTemplate('anime')">
                    <div class="template-name">ã‚¢ãƒ‹ãƒ¡ã‚¤ãƒ©ã‚¹ãƒˆ</div>
                    <div class="template-text">ã‚¢ãƒ‹ãƒ¡ã‚¹ã‚¿ã‚¤ãƒ«ã€ç¾å°‘å¥³ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã€ã‚«ãƒ©ãƒ•ãƒ«ãªèƒŒæ™¯ã€ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¢ãƒ¼ãƒˆã€pixivé¢¨</div>
                </div>
                <div class="template-item" onclick="useTemplate('concept')">
                    <div class="template-name">ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚¢ãƒ¼ãƒˆ</div>
                    <div class="template-text">SF ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚¢ãƒ¼ãƒˆã€æœªæ¥éƒ½å¸‚ã€ãƒã‚ªãƒ³ãƒ©ã‚¤ãƒˆã€ã‚µã‚¤ãƒãƒ¼ãƒ‘ãƒ³ã‚¯ã€æ˜ ç”»çš„æ§‹å›³</div>
                </div>
                <div class="template-item" onclick="useTemplate('product')">
                    <div class="template-name">å•†å“å†™çœŸ</div>
                    <div class="template-text">ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆå†™çœŸã€ç™½èƒŒæ™¯ã€ã‚¹ã‚¿ã‚¸ã‚ªãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã€é«˜å“è³ªã€å•†æ¥­ç”¨ã€å½±ä»˜ã</div>
                </div>
                <div class="template-item" onclick="useTemplate('food')">
                    <div class="template-name">æ–™ç†å†™çœŸ</div>
                    <div class="template-text">ç¾å‘³ã—ãã†ãªæ–™ç†ã€è‡ªç„¶å…‰ã€æœ¨è£½ãƒ†ãƒ¼ãƒ–ãƒ«ã€ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒ•ãƒ¼ãƒ‰ãƒ•ã‚©ãƒˆã‚°ãƒ©ãƒ•ã‚£ãƒ¼</div>
                </div>
                <div class="template-item" onclick="useTemplate('architecture')">
                    <div class="template-name">å»ºç¯‰å†™çœŸ</div>
                    <div class="template-text">ãƒ¢ãƒ€ãƒ³å»ºç¯‰ã€å¹¾ä½•å­¦çš„æ§‹å›³ã€é’ç©ºã€å»ºç¯‰å†™çœŸã€åºƒè§’ãƒ¬ãƒ³ã‚ºã€é«˜ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ</div>
                </div>
                <div class="template-item" onclick="useTemplate('fantasy')">
                    <div class="template-name">ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ã‚¢ãƒ¼ãƒˆ</div>
                    <div class="template-text">ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ã‚¢ãƒ¼ãƒˆã€é­”æ³•ã®ä¸–ç•Œã€ãƒ‰ãƒ©ã‚´ãƒ³ã€åŸã€ç¥ç§˜çš„ãªé›°å›²æ°—ã€ãƒ‡ã‚¸ã‚¿ãƒ«ãƒšã‚¤ãƒ³ãƒ†ã‚£ãƒ³ã‚°</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentService = 'dalle3';
        let promptHistory = [];

        // ã‚µãƒ¼ãƒ“ã‚¹é¸æŠ
        document.querySelectorAll('.service-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.service-card').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                currentService = this.dataset.service;
                updateServiceLinks();
            });
        });

        // æ‹¡å¼µã‚ªãƒ—ã‚·ãƒ§ãƒ³é¸æŠ
        document.querySelectorAll('.enhancement-chip').forEach(chip => {
            chip.addEventListener('click', function() {
                this.classList.toggle('selected');
                updatePromptWithEnhancements();
            });
        });

        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«æ‹¡å¼µã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
        function updatePromptWithEnhancements() {
            const basePrompt = document.getElementById('promptInput').value.split(',')[0];
            const selectedEnhancements = Array.from(document.querySelectorAll('.enhancement-chip.selected'))
                .map(chip => chip.dataset.text);
            
            if (selectedEnhancements.length > 0) {
                document.getElementById('promptInput').value = basePrompt + ', ' + selectedEnhancements.join(', ');
            }
        }

        // ã‚µãƒ¼ãƒ“ã‚¹ãƒªãƒ³ã‚¯æ›´æ–°
        function updateServiceLinks() {
            const linksElement = document.getElementById('serviceLinks');
            const links = {
                dalle3: '<strong>DALL-E 3:</strong> <a href="https://chat.openai.com" target="_blank">ChatGPT</a> ã¾ãŸã¯ <a href="https://www.bing.com/create" target="_blank">Bing Image Creator</a>',
                midjourney: '<strong>Midjourney:</strong> <a href="https://discord.com/channels/@me" target="_blank">Discord</a> ã§ /imagine ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨',
                stable: '<strong>Stable Diffusion:</strong> <a href="https://dreamstudio.ai" target="_blank">DreamStudio</a> ã¾ãŸã¯ <a href="https://civitai.com" target="_blank">Civitai</a>',
                bing: '<strong>Bing Image Creator:</strong> <a href="https://www.bing.com/create" target="_blank">ç„¡æ–™ã§åˆ©ç”¨å¯èƒ½</a>',
                imagen: '<strong>Google Imagen 3:</strong> <a href="https://aitestkitchen.withgoogle.com" target="_blank">AI Test Kitchen</a> ã§åˆ©ç”¨å¯èƒ½ï¼ˆæ‹›å¾…åˆ¶ï¼‰',
                gemini: '<strong>Gemini (æ—§Bard):</strong> <a href="https://gemini.google.com" target="_blank">Gemini</a> ã§ç”»åƒç”Ÿæˆæ©Ÿèƒ½ã‚’åˆ©ç”¨'
            };
            linksElement.innerHTML = links[currentService] + '<br>ç”Ÿæˆã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ä¸Šè¨˜ã‚µãƒ¼ãƒ“ã‚¹ã§ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚';
        }

        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–
        function generateOptimizedPrompt() {
            const input = document.getElementById('promptInput').value;
            if (!input) {
                alert('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            let optimized = input;

            // ã‚µãƒ¼ãƒ“ã‚¹ã”ã¨ã®æœ€é©åŒ–
            if (currentService === 'midjourney') {
                // Midjourneyã¯çŸ­ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å¥½ã‚€
                optimized = input.split(',').slice(0, 5).join(',') + ' --v 6 --ar 16:9';
            } else if (currentService === 'stable') {
                // Stable Diffusionã¯ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚‚é‡è¦
                optimized = input + '\nNegative prompt: low quality, blurry, distorted, ugly, bad anatomy';
            } else if (currentService === 'dalle3') {
                // DALL-E 3ã¯è‡ªç„¶è¨€èªã‚’ç†è§£
                optimized = 'æ¬¡ã®è¦ç´ ã‚’å«ã‚€é«˜å“è³ªãªç”»åƒã‚’ç”Ÿæˆã—ã¦ãã ã•ã„: ' + input;
            } else if (currentService === 'imagen') {
                // Google Imagen 3ã¯è©³ç´°ãªèª¬æ˜ã‚’å¥½ã‚€
                optimized = 'A highly detailed image of: ' + input + ', photorealistic, professional photography';
            } else if (currentService === 'gemini') {
                // Geminiã¯ä¼šè©±å½¢å¼ã§æŒ‡ç¤º
                optimized = 'ä»¥ä¸‹ã®ç‰¹å¾´ã‚’æŒã¤ç”»åƒã‚’ç”Ÿæˆã—ã¦ãã ã•ã„:\n' + input + '\né«˜è§£åƒåº¦ã§ç¾ã—ã„ä»•ä¸ŠãŒã‚Šã«ã—ã¦ãã ã•ã„ã€‚';
            }

            document.getElementById('promptInput').value = optimized;
            
            // å±¥æ­´ã«ä¿å­˜
            saveToHistory(optimized);
            
            // è‡ªå‹•ã‚³ãƒ”ãƒ¼
            copyPrompt();
            
            alert('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æœ€é©åŒ–ã—ã¾ã—ãŸï¼ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼æ¸ˆã¿ã§ã™ã€‚');
        }

        // ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½
        function copyPrompt() {
            const prompt = document.getElementById('promptInput').value;
            if (!prompt) {
                alert('ã‚³ãƒ”ãƒ¼ã™ã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒã‚ã‚Šã¾ã›ã‚“');
                return;
            }
            
            navigator.clipboard.writeText(prompt).then(() => {
                alert('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
            }).catch(err => {
                alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ');
            });
        }

        // ã‚¯ãƒªã‚¢
        function clearPrompt() {
            if (confirm('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ')) {
                document.getElementById('promptInput').value = '';
                document.querySelectorAll('.enhancement-chip').forEach(chip => {
                    chip.classList.remove('selected');
                });
            }
        }

        // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¡¨ç¤º
        function showTemplates() {
            document.getElementById('templatesModal').classList.add('active');
        }

        // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆéè¡¨ç¤º
        function hideTemplates() {
            document.getElementById('templatesModal').classList.remove('active');
        }

        // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½¿ç”¨
        function useTemplate(type) {
            const templates = {
                portrait: 'ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªãƒãƒ¼ãƒˆãƒ¬ãƒ¼ãƒˆå†™çœŸã€è‹¥ã„æ—¥æœ¬äººå¥³æ€§ã€è‡ªç„¶ãªç¬‘é¡”ã€ã‚¹ã‚¿ã‚¸ã‚ªãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã€èƒŒæ™¯ã¼ã‹ã—ã€é«˜è§£åƒåº¦ã€å†™å®Ÿçš„ã€85mm ãƒ¬ãƒ³ã‚º',
                landscape: 'å£®å¤§ãªè‡ªç„¶é¢¨æ™¯ã€å¯Œå£«å±±ã¨æ¡œã€æ˜¥ã®æœã€ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¢ãƒ¯ãƒ¼ã®å…‰ã€åºƒè§’ãƒ¬ãƒ³ã‚ºã€é«˜ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ¬ãƒ³ã‚¸ã€8Kè§£åƒåº¦ã€National Geographic ã‚¹ã‚¿ã‚¤ãƒ«',
                anime: 'ã‚¢ãƒ‹ãƒ¡ã‚¹ã‚¿ã‚¤ãƒ«ã€ç¾å°‘å¥³ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã€å­¦åœ’åˆ¶æœã€æ¡œã®èŠ±ã³ã‚‰ãŒèˆã†ã€ã‚«ãƒ©ãƒ•ãƒ«ãªèƒŒæ™¯ã€ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¢ãƒ¼ãƒˆã€pixivé¢¨ã€é«˜å“è³ªã‚¤ãƒ©ã‚¹ãƒˆ',
                concept: 'SF ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚¢ãƒ¼ãƒˆã€æœªæ¥ã®æ±äº¬ã€ãƒã‚ªãƒ³ãƒ©ã‚¤ãƒˆã€ç©ºé£›ã¶è»Šã€ã‚µã‚¤ãƒãƒ¼ãƒ‘ãƒ³ã‚¯ã€é›¨ã®å¤œã€æ˜ ç”»çš„æ§‹å›³ã€Blade Runneré¢¨',
                product: 'ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆå†™çœŸã€æœ€æ–°ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã€ç™½èƒŒæ™¯ã€ã‚¹ã‚¿ã‚¸ã‚ªãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã€åå°„ã‚ã‚Šã€é«˜å“è³ªã€å•†æ¥­ç”¨ã€Apple ã‚¹ã‚¿ã‚¤ãƒ«',
                food: 'ç¾å‘³ã—ãã†ãªå¯¿å¸ã‚»ãƒƒãƒˆã€é«˜ç´šãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã€è‡ªç„¶å…‰ã€æœ¨è£½ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒ•ãƒ¼ãƒ‰ãƒ•ã‚©ãƒˆã‚°ãƒ©ãƒ•ã‚£ãƒ¼ã€æµ…ã„è¢«å†™ç•Œæ·±åº¦',
                architecture: 'ãƒ¢ãƒ€ãƒ³æ—¥æœ¬å»ºç¯‰ã€å®‰è—¤å¿ é›„ã‚¹ã‚¿ã‚¤ãƒ«ã€ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆã€å¹¾ä½•å­¦çš„æ§‹å›³ã€é’ç©ºã€å»ºç¯‰å†™çœŸã€åºƒè§’ãƒ¬ãƒ³ã‚ºã€é«˜ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ',
                fantasy: 'ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼ã‚¢ãƒ¼ãƒˆã€æ—¥æœ¬ã®å¦–æ€ªã€ç¥ç§˜çš„ãªæ£®ã€æœˆå…‰ã€éœ§ã€ãƒ‡ã‚¸ã‚¿ãƒ«ãƒšã‚¤ãƒ³ãƒ†ã‚£ãƒ³ã‚°ã€Studio Ghiblié¢¨ã€å¹»æƒ³çš„ãªé›°å›²æ°—'
            };
            
            document.getElementById('promptInput').value = templates[type];
            hideTemplates();
        }

        // å±¥æ­´ä¿å­˜
        function saveToHistory(prompt) {
            const historyItem = {
                prompt: prompt,
                service: currentService,
                timestamp: new Date().toISOString()
            };
            
            promptHistory.unshift(historyItem);
            promptHistory = promptHistory.slice(0, 20); // æœ€æ–°20ä»¶ã®ã¿ä¿æŒ
            
            localStorage.setItem('prompt-history', JSON.stringify(promptHistory));
            updateHistoryDisplay();
        }

        // å±¥æ­´è¡¨ç¤ºæ›´æ–°
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            
            if (promptHistory.length === 0) {
                historyList.innerHTML = '<div style="text-align: center; color: #999;">å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                return;
            }
            
            historyList.innerHTML = promptHistory.map((item, index) => `
                <div class="history-item" onclick="loadFromHistory(${index})">
                    <div class="history-prompt">${item.prompt}</div>
                    <div class="history-meta">
                        <span>${item.service.toUpperCase()}</span>
                        <span>${new Date(item.timestamp).toLocaleString('ja-JP')}</span>
                    </div>
                </div>
            `).join('');
        }

        // å±¥æ­´ã‹ã‚‰èª­ã¿è¾¼ã¿
        function loadFromHistory(index) {
            const item = promptHistory[index];
            document.getElementById('promptInput').value = item.prompt;
            
            // ã‚µãƒ¼ãƒ“ã‚¹ã‚‚åˆ‡ã‚Šæ›¿ãˆ
            document.querySelectorAll('.service-card').forEach(card => {
                card.classList.remove('active');
                if (card.dataset.service === item.service) {
                    card.classList.add('active');
                }
            });
            currentService = item.service;
            updateServiceLinks();
        }

        // å±¥æ­´ã‚¯ãƒªã‚¢
        function clearHistory() {
            if (confirm('å±¥æ­´ã‚’ã™ã¹ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                promptHistory = [];
                localStorage.removeItem('prompt-history');
                updateHistoryDisplay();
            }
        }

        // åˆæœŸåŒ–
        window.addEventListener('load', () => {
            // å±¥æ­´èª­ã¿è¾¼ã¿
            const saved = localStorage.getItem('prompt-history');
            if (saved) {
                promptHistory = JSON.parse(saved);
                updateHistoryDisplay();
            }
            
            // ã‚µãƒ¼ãƒ“ã‚¹ãƒªãƒ³ã‚¯åˆæœŸè¡¨ç¤º
            updateServiceLinks();
        });

        // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
        document.getElementById('templatesModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideTemplates();
            }
        });
    </script>
    <!-- æ–°æ©Ÿèƒ½: è‡ªå‹•ä¿å­˜ã€ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã€å…±é€šé–¢æ•° -->
    <script src="../js/auto-save.js"></script>
    <script src="../js/toast.js"></script>
    <script src="../js/common.js"></script>
    <!-- APIã‚­ãƒ¼è‡ªå‹•èª­ã¿è¾¼ã¿ -->
    <script src="../40_settings/api-config.js"></script>
</body>
</html>