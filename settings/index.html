<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ë®≠ÂÆö - „Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö | SCF V5</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans JP', sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .back-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            display: flex;
            gap: 20px;
        }

        .sidebar {
            width: 250px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .menu-item {
            padding: 12px 15px;
            margin-bottom: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #666;
        }

        .menu-item:hover {
            background: #f8f9fa;
        }

        .menu-item.active {
            background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1));
            color: #667eea;
            font-weight: bold;
        }

        .menu-icon {
            font-size: 1.2em;
        }

        .main-content {
            flex: 1;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .section-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .section-description {
            color: #666;
            font-size: 0.95em;
        }

        .setting-group {
            margin-bottom: 25px;
        }

        .setting-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
            font-size: 0.95em;
        }

        .setting-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .setting-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .setting-hint {
            margin-top: 5px;
            font-size: 0.85em;
            color: #999;
        }

        .api-key-input {
            position: relative;
        }

        .api-key-field {
            padding-right: 40px;
        }

        .toggle-visibility {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #999;
            font-size: 1.2em;
        }

        .toggle-visibility:hover {
            color: #667eea;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .checkbox-input {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-label {
            cursor: pointer;
            color: #333;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .radio-input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .radio-label {
            cursor: pointer;
            color: #333;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: 10px;
        }

        .status-connected {
            background: #4caf50;
        }

        .status-disconnected {
            background: #f44336;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background: #f8f9fa;
            font-weight: bold;
            color: #555;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .storage-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 10px;
        }

        .storage-used {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.85em;
            font-weight: bold;
        }

        .import-export-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .import-box,
        .export-box {
            padding: 20px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .import-box:hover,
        .export-box:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .import-icon,
        .export-icon {
            font-size: 2em;
            margin-bottom: 10px;
            color: #999;
        }

        .success-message {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }

        .success-message.show {
            display: block;
        }

        .error-message {
            background: #ffebee;
            border-left: 4px solid #f44336;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                position: static;
            }
            
            .import-export-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>‚öôÔ∏è Ë®≠ÂÆö - „Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö</h1>
            <a href="../index.html" class="back-btn">‚Üê „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å∏</a>
        </div>
    </div>

    <div class="container">
        <div class="sidebar">
            <div class="menu-item active" onclick="showSection('general')" data-section="general">
                <span class="menu-icon">üè†</span>
                <span>‰∏ÄËà¨Ë®≠ÂÆö</span>
            </div>
            <div class="menu-item" onclick="showSection('api')" data-section="api">
                <span class="menu-icon">üîë</span>
                <span>API„Ç≠„Éº</span>
            </div>
            <div class="menu-item" onclick="showSection('notification')" data-section="notification">
                <span class="menu-icon">üîî</span>
                <span>ÈÄöÁü•Ë®≠ÂÆö</span>
            </div>
            <div class="menu-item" onclick="showSection('display')" data-section="display">
                <span class="menu-icon">üé®</span>
                <span>Ë°®Á§∫Ë®≠ÂÆö</span>
            </div>
            <div class="menu-item" onclick="showSection('data')" data-section="data">
                <span class="menu-icon">üíæ</span>
                <span>„Éá„Éº„ÇøÁÆ°ÁêÜ</span>
            </div>
            <div class="menu-item" onclick="showSection('backup')" data-section="backup">
                <span class="menu-icon">üì¶</span>
                <span>„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó</span>
            </div>
            <div class="menu-item" onclick="showSection('advanced')" data-section="advanced">
                <span class="menu-icon">üîß</span>
                <span>Ë©≥Á¥∞Ë®≠ÂÆö</span>
            </div>
            <div class="menu-item" onclick="showSection('about')" data-section="about">
                <span class="menu-icon">‚ÑπÔ∏è</span>
                <span>ÊÉÖÂ†±</span>
            </div>
        </div>

        <div class="main-content">
            <div id="successMessage" class="success-message">
                ‚úÖ Ë®≠ÂÆö„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü
            </div>
            <div id="errorMessage" class="error-message">
                ‚ùå „Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü
            </div>

            <!-- ‰∏ÄËà¨Ë®≠ÂÆö -->
            <div class="section active" id="general-section">
                <div class="section-header">
                    <h2 class="section-title">‰∏ÄËà¨Ë®≠ÂÆö</h2>
                    <p class="section-description">Âü∫Êú¨ÁöÑ„Å™Ë®≠ÂÆö„ÇíË°å„ÅÑ„Åæ„Åô</p>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="siteName">„Çµ„Ç§„ÉàÂêç</label>
                    <input type="text" id="siteName" class="setting-input" value="Êó•ÂàäAI„ÇÜ„Åü„Åï„ÇìÊñ∞ËÅû">
                    <div class="setting-hint">„É°„Ç§„É≥„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å´Ë°®Á§∫„Åï„Çå„ÇãÂêçÁß∞</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="authorName">ËëóËÄÖÂêç</label>
                    <input type="text" id="authorName" class="setting-input" value="AI„ÇÜ„Åü„Åï„Çì">
                    <div class="setting-hint">Ë®ò‰∫ã„ÅÆËëóËÄÖ„Å®„Åó„Å¶Ë°®Á§∫„Åï„Çå„ÇãÂêçÂâç</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="language">Ë®ÄË™û</label>
                    <select id="language" class="setting-input">
                        <option value="ja" selected>Êó•Êú¨Ë™û</option>
                        <option value="en">English</option>
                        <option value="zh">‰∏≠Êñá</option>
                        <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="timezone">„Çø„Ç§„É†„Çæ„Éº„É≥</label>
                    <select id="timezone" class="setting-input">
                        <option value="Asia/Tokyo" selected>Asia/Tokyo (JST)</option>
                        <option value="UTC">UTC</option>
                        <option value="America/New_York">America/New_York (EST)</option>
                        <option value="Europe/London">Europe/London (GMT)</option>
                    </select>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('general')">‰øùÂ≠ò</button>
                    <button class="btn btn-secondary" onclick="resetSettings('general')">„É™„Çª„ÉÉ„Éà</button>
                </div>
            </div>

            <!-- API„Ç≠„ÉºË®≠ÂÆö -->
            <div class="section" id="api-section">
                <div class="section-header">
                    <h2 class="section-title">API„Ç≠„ÉºË®≠ÂÆö</h2>
                    <p class="section-description">Â§ñÈÉ®„Çµ„Éº„Éì„Çπ„ÅÆAPI„Ç≠„Éº„ÇíÁÆ°ÁêÜ„Åó„Åæ„Åô</p>
                </div>

                <div class="setting-group">
                    <label class="setting-label">
                        OpenAI API Key
                        <span class="status-indicator status-disconnected" id="openai-status"></span>
                    </label>
                    <div class="api-key-input">
                        <input type="password" id="openaiKey" class="setting-input api-key-field" placeholder="sk-...">
                        <button class="toggle-visibility" onclick="toggleVisibility('openaiKey')">üëÅÔ∏è</button>
                    </div>
                    <div class="setting-hint">GPT-4, DALL-E 3„Å™„Å©„Åß‰ΩøÁî®</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">
                        Anthropic API Key
                        <span class="status-indicator status-disconnected" id="anthropic-status"></span>
                    </label>
                    <div class="api-key-input">
                        <input type="password" id="anthropicKey" class="setting-input api-key-field" placeholder="sk-ant-...">
                        <button class="toggle-visibility" onclick="toggleVisibility('anthropicKey')">üëÅÔ∏è</button>
                    </div>
                    <div class="setting-hint">Claude 3„Åß‰ΩøÁî®</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">
                        Google AI API Key
                        <span class="status-indicator status-disconnected" id="google-status"></span>
                    </label>
                    <div class="api-key-input">
                        <input type="password" id="googleKey" class="setting-input api-key-field" placeholder="AIza...">
                        <button class="toggle-visibility" onclick="toggleVisibility('googleKey')">üëÅÔ∏è</button>
                    </div>
                    <div class="setting-hint">Gemini Pro„Åß‰ΩøÁî®</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">
                        Cloudflare Worker URL
                        <span class="status-indicator status-disconnected" id="worker-status"></span>
                    </label>
                    <input type="url" id="workerUrl" class="setting-input" placeholder="https://your-worker.workers.dev">
                    <div class="setting-hint">Claude API CORSÂõûÈÅøÁî®Ôºàclaude-worker.js„Çí„Éá„Éó„É≠„Ç§Ôºâ</div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('api')">‰øùÂ≠ò</button>
                    <button class="btn btn-secondary" onclick="testAPIs()">Êé•Á∂ö„ÉÜ„Çπ„Éà</button>
                </div>
            </div>

            <!-- ÈÄöÁü•Ë®≠ÂÆö -->
            <div class="section" id="notification-section">
                <div class="section-header">
                    <h2 class="section-title">ÈÄöÁü•Ë®≠ÂÆö</h2>
                    <p class="section-description">ÈÄöÁü•„ÅÆË°®Á§∫ÊñπÊ≥ï„ÇíË®≠ÂÆö„Åó„Åæ„Åô</p>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="enableNotifications" class="checkbox-input" checked>
                    <label for="enableNotifications" class="checkbox-label">„Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóÈÄöÁü•„ÇíÊúâÂäπ„Å´„Åô„Çã</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="soundNotifications" class="checkbox-input">
                    <label for="soundNotifications" class="checkbox-label">„Çµ„Ç¶„É≥„ÉâÈÄöÁü•„ÇíÊúâÂäπ„Å´„Åô„Çã</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="emailNotifications" class="checkbox-input">
                    <label for="emailNotifications" class="checkbox-label">„É°„Éº„É´ÈÄöÁü•„ÇíÊúâÂäπ„Å´„Åô„Çã</label>
                </div>

                <div class="setting-group">
                    <label class="setting-label">ÈÄöÁü•„Çø„Ç§„Éü„É≥„Ç∞</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="notifyAll" name="notifyTiming" class="radio-input" checked>
                            <label for="notifyAll" class="radio-label">„Åô„Åπ„Å¶„ÅÆÊìç‰Ωú</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="notifyImportant" name="notifyTiming" class="radio-input">
                            <label for="notifyImportant" class="radio-label">ÈáçË¶Å„Å™Êìç‰Ωú„ÅÆ„Åø</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="notifyError" name="notifyTiming" class="radio-input">
                            <label for="notifyError" class="radio-label">„Ç®„É©„Éº„ÅÆ„Åø</label>
                        </div>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('notification')">‰øùÂ≠ò</button>
                    <button class="btn btn-secondary" onclick="testNotification()">„ÉÜ„Çπ„ÉàÈÄöÁü•</button>
                </div>
            </div>

            <!-- Ë°®Á§∫Ë®≠ÂÆö -->
            <div class="section" id="display-section">
                <div class="section-header">
                    <h2 class="section-title">Ë°®Á§∫Ë®≠ÂÆö</h2>
                    <p class="section-description">ÁîªÈù¢Ë°®Á§∫„Çí„Ç´„Çπ„Çø„Éû„Ç§„Ç∫„Åó„Åæ„Åô</p>
                </div>

                <div class="setting-group">
                    <label class="setting-label">„ÉÜ„Éº„Éû</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="themeLight" name="theme" class="radio-input" checked>
                            <label for="themeLight" class="radio-label">„É©„Ç§„Éà</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="themeDark" name="theme" class="radio-input">
                            <label for="themeDark" class="radio-label">„ÉÄ„Éº„ÇØ</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="themeAuto" name="theme" class="radio-input">
                            <label for="themeAuto" class="radio-label">Ëá™ÂãïÔºà„Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö„Å´Âæì„ÅÜÔºâ</label>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="fontSize">„Éï„Ç©„É≥„Éà„Çµ„Ç§„Ç∫</label>
                    <select id="fontSize" class="setting-input">
                        <option value="small">Â∞è</option>
                        <option value="medium" selected>Ê®ôÊ∫ñ</option>
                        <option value="large">Â§ß</option>
                        <option value="xlarge">ÁâπÂ§ß</option>
                    </select>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="showAnimations" class="checkbox-input" checked>
                    <label for="showAnimations" class="checkbox-label">„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„ÇíÊúâÂäπ„Å´„Åô„Çã</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="compactMode" class="checkbox-input">
                    <label for="compactMode" class="checkbox-label">„Ç≥„É≥„Éë„ÇØ„Éà„É¢„Éº„Éâ</label>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('display')">‰øùÂ≠ò</button>
                    <button class="btn btn-secondary" onclick="previewTheme()">„Éó„É¨„Éì„É•„Éº</button>
                </div>
            </div>

            <!-- „Éá„Éº„ÇøÁÆ°ÁêÜ -->
            <div class="section" id="data-section">
                <div class="section-header">
                    <h2 class="section-title">„Éá„Éº„ÇøÁÆ°ÁêÜ</h2>
                    <p class="section-description">‰øùÂ≠ò„Éá„Éº„Çø„ÇíÁÆ°ÁêÜ„Åó„Åæ„Åô</p>
                </div>

                <div class="setting-group">
                    <label class="setting-label">„Çπ„Éà„É¨„Éº„Ç∏‰ΩøÁî®Áä∂Ê≥Å</label>
                    <div class="storage-bar">
                        <div class="storage-used" style="width: 35%;">35% ‰ΩøÁî®‰∏≠</div>
                    </div>
                    <div class="setting-hint">Á¥Ñ 3.5MB / 10MB</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">‰øùÂ≠ò„Éá„Éº„Çø‰∏ÄË¶ß</label>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>„Éá„Éº„ÇøÁ®ÆÂà•</th>
                                <th>‰ª∂Êï∞</th>
                                <th>„Çµ„Ç§„Ç∫</th>
                                <th>Êìç‰Ωú</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Ë®ò‰∫ã</td>
                                <td>156</td>
                                <td>2.1MB</td>
                                <td><button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.85em;" onclick="clearData('articles')">ÂâäÈô§</button></td>
                            </tr>
                            <tr>
                                <td>RSS„Éï„Ç£„Éº„Éâ</td>
                                <td>45</td>
                                <td>0.8MB</td>
                                <td><button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.85em;" onclick="clearData('feeds')">ÂâäÈô§</button></td>
                            </tr>
                            <tr>
                                <td>ÁîªÂÉè</td>
                                <td>23</td>
                                <td>0.5MB</td>
                                <td><button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.85em;" onclick="clearData('images')">ÂâäÈô§</button></td>
                            </tr>
                            <tr>
                                <td>Ë®≠ÂÆö</td>
                                <td>-</td>
                                <td>0.1MB</td>
                                <td>-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="retentionPeriod">„Éá„Éº„Çø‰øùÊåÅÊúüÈñì</label>
                    <select id="retentionPeriod" class="setting-input">
                        <option value="30">30Êó•</option>
                        <option value="60" selected>60Êó•</option>
                        <option value="90">90Êó•</option>
                        <option value="180">180Êó•</option>
                        <option value="365">365Êó•</option>
                    </select>
                    <div class="setting-hint">Âè§„ÅÑ„Éá„Éº„Çø„ÅØËá™ÂãïÁöÑ„Å´ÂâäÈô§„Åï„Çå„Åæ„Åô</div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('data')">‰øùÂ≠ò</button>
                    <button class="btn btn-danger" onclick="clearAllData()">„Åô„Åπ„Å¶„ÇØ„É™„Ç¢</button>
                </div>
            </div>

            <!-- „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó -->
            <div class="section" id="backup-section">
                <div class="section-header">
                    <h2 class="section-title">„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó</h2>
                    <p class="section-description">„Éá„Éº„Çø„ÅÆ„Ç§„É≥„Éù„Éº„Éà„Éª„Ç®„ÇØ„Çπ„Éù„Éº„Éà</p>
                </div>

                <div class="import-export-section">
                    <div class="import-box" onclick="importData()">
                        <input type="file" id="importFile" accept=".json" style="display: none;">
                        <div class="import-icon">üì•</div>
                        <div>„Éá„Éº„Çø„Çí„Ç§„É≥„Éù„Éº„Éà</div>
                        <div style="font-size: 0.85em; color: #999; margin-top: 5px;">JSON„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû</div>
                    </div>
                    <div class="export-box" onclick="exportData()">
                        <div class="export-icon">üì§</div>
                        <div>„Éá„Éº„Çø„Çí„Ç®„ÇØ„Çπ„Éù„Éº„Éà</div>
                        <div style="font-size: 0.85em; color: #999; margin-top: 5px;">ÂÖ®„Éá„Éº„Çø„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</div>
                    </div>
                </div>

                <div class="setting-group" style="margin-top: 30px;">
                    <label class="setting-label">Ëá™Âãï„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="autoBackup" class="checkbox-input">
                        <label for="autoBackup" class="checkbox-label">Ëá™Âãï„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó„ÇíÊúâÂäπ„Å´„Åô„Çã</label>
                    </div>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="backupFrequency">„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„ÉóÈ†ªÂ∫¶</label>
                    <select id="backupFrequency" class="setting-input">
                        <option value="daily">ÊØéÊó•</option>
                        <option value="weekly" selected>ÈÄ±1Âõû</option>
                        <option value="monthly">Êúà1Âõû</option>
                    </select>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('backup')">‰øùÂ≠ò</button>
                    <button class="btn btn-secondary" onclick="createBackup()">‰ªä„Åô„Åê„Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó</button>
                </div>
            </div>

            <!-- Ë©≥Á¥∞Ë®≠ÂÆö -->
            <div class="section" id="advanced-section">
                <div class="section-header">
                    <h2 class="section-title">Ë©≥Á¥∞Ë®≠ÂÆö</h2>
                    <p class="section-description">È´òÂ∫¶„Å™Ë®≠ÂÆöÈ†ÖÁõÆ</p>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="debugMode" class="checkbox-input">
                    <label for="debugMode" class="checkbox-label">„Éá„Éê„ÉÉ„Ç∞„É¢„Éº„Éâ</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="experimentalFeatures" class="checkbox-input">
                    <label for="experimentalFeatures" class="checkbox-label">ÂÆüÈ®ìÁöÑÊ©üËÉΩ„ÇíÊúâÂäπ„Å´„Åô„Çã</label>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="cacheSize">„Ç≠„É£„ÉÉ„Ç∑„É•„Çµ„Ç§„Ç∫ (MB)</label>
                    <input type="number" id="cacheSize" class="setting-input" value="100" min="10" max="1000">
                    <div class="setting-hint">‰∏ÄÊôÇ„Éá„Éº„Çø„ÅÆÊúÄÂ§ß‰øùÂ≠òÂÆπÈáè</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="maxConcurrent">ÊúÄÂ§ßÂêåÊôÇÂá¶ÁêÜÊï∞</label>
                    <input type="number" id="maxConcurrent" class="setting-input" value="5" min="1" max="20">
                    <div class="setting-hint">ÂêåÊôÇ„Å´Âá¶ÁêÜ„Åô„ÇãÊúÄÂ§ß„Çø„Çπ„ÇØÊï∞</div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('advanced')">‰øùÂ≠ò</button>
                    <button class="btn btn-danger" onclick="resetToFactory()">Â∑•Â†¥Âá∫Ëç∑ÊôÇ„Å´Êàª„Åô</button>
                </div>
            </div>

            <!-- ÊÉÖÂ†± -->
            <div class="section" id="about-section">
                <div class="section-header">
                    <h2 class="section-title">„Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±</h2>
                    <p class="section-description">SCF V5„Å´„Å§„ÅÑ„Å¶</p>
                </div>

                <div class="setting-group">
                    <table class="data-table">
                        <tbody>
                            <tr>
                                <td><strong>„Éê„Éº„Ç∏„Éß„É≥</strong></td>
                                <td>5.0.3</td>
                            </tr>
                            <tr>
                                <td><strong>„Éì„É´„Éâ</strong></td>
                                <td>2025.01.10</td>
                            </tr>
                            <tr>
                                <td><strong>ÈñãÁô∫ËÄÖ</strong></td>
                                <td>Êó•ÂàäAI„ÇÜ„Åü„Åï„ÇìÊñ∞ËÅû</td>
                            </tr>
                            <tr>
                                <td><strong>„É©„Ç§„Çª„É≥„Çπ</strong></td>
                                <td>MIT</td>
                            </tr>
                            <tr>
                                <td><strong>„Éñ„É©„Ç¶„Ç∂</strong></td>
                                <td id="browserInfo">-</td>
                            </tr>
                            <tr>
                                <td><strong>„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏</strong></td>
                                <td id="storageInfo">-</td>
                            </tr>
                            <tr>
                                <td><strong>IndexedDB</strong></td>
                                <td id="indexedDBInfo">-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="setting-group">
                    <h3 style="margin-bottom: 10px;">Ê©üËÉΩ‰∏ÄË¶ß</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li>‚úÖ RSS‰∏ÄË¶ßÁÆ°ÁêÜÔºàÊúÄÂ§ß500„Éï„Ç£„Éº„ÉâÔºâ</li>
                        <li>‚úÖ ÈÖç‰ø°RSSË®ò‰∫ãË°®Á§∫</li>
                        <li>‚úÖ Ë®ò‰∫ãÁîüÊàêÔºà3„ÉÜ„É≥„Éó„É¨„Éº„ÉàÔºâ</li>
                        <li>‚úÖ WXRÂá∫ÂäõÔºànote.comÂØæÂøúÔºâ</li>
                        <li>‚úÖ „Éó„É≠„É≥„Éó„ÉàÁîüÊàê</li>
                        <li>‚úÖ ÁîªÂÉèÁîüÊàêÔºàCanvas APIÔºâ</li>
                        <li>‚úÖ Âõ≥Ë°®ÁîüÊàê</li>
                        <li>‚úÖ „Çµ„É†„Éç„Ç§„É´ÁîüÊàêÔºà1200√ó628pxÔºâ</li>
                        <li>‚úÖ ÊäïÁ®øÁÆ°ÁêÜÔºàPV„Éª„ÅÑ„ÅÑ„Å≠Ôºâ</li>
                        <li>‚úÖ Ë®≠ÂÆöÁÆ°ÁêÜ</li>
                    </ul>
                </div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="checkUpdates()">Êõ¥Êñ∞„ÇíÁ¢∫Ë™ç</button>
                    <button class="btn btn-primary" onclick="showHelp()">„Éò„É´„Éó</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // „Çª„ÇØ„Ç∑„Éß„É≥Âàá„ÇäÊõø„Åà
        function showSection(section) {
            // „É°„Éã„É•„Éº„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-section="${section}"]`).classList.add('active');
            
            // „Çª„ÇØ„Ç∑„Éß„É≥Ë°®Á§∫
            document.querySelectorAll('.section').forEach(sec => {
                sec.classList.remove('active');
            });
            document.getElementById(`${section}-section`).classList.add('active');
        }

        // Ë®≠ÂÆö‰øùÂ≠ò
        function saveSettings(section) {
            const settings = {};
            
            if (section === 'general') {
                settings.siteName = document.getElementById('siteName').value;
                settings.authorName = document.getElementById('authorName').value;
                settings.language = document.getElementById('language').value;
                settings.timezone = document.getElementById('timezone').value;
                
                // LocalStorage„Å´‰øùÂ≠ò
                localStorage.setItem('site-name', settings.siteName);
                localStorage.setItem('author-name', settings.authorName);
                localStorage.setItem('language', settings.language);
                localStorage.setItem('timezone', settings.timezone);
            } else if (section === 'api') {
                settings.openaiKey = document.getElementById('openaiKey').value;
                settings.anthropicKey = document.getElementById('anthropicKey').value;
                settings.googleKey = document.getElementById('googleKey').value;
                settings.workerUrl = document.getElementById('workerUrl').value;
                
                // LocalStorage„Å´ÂÄãÂà•„Å´‰øùÂ≠òÔºàÁ©∫„Åß„ÇÇ‰øùÂ≠ò„Åó„Å¶„ÄÅÂâäÈô§„Åï„Çå„ÅüÂ†¥Âêà„ÇÇÂèçÊò†Ôºâ
                localStorage.setItem('openai-api-key', settings.openaiKey || '');
                localStorage.setItem('anthropic-api-key', settings.anthropicKey || '');
                localStorage.setItem('google-api-key', settings.googleKey || '');
                localStorage.setItem('cloudflare-worker-url', settings.workerUrl || '');
            } else if (section === 'notification') {
                settings.enableNotifications = document.getElementById('enableNotifications').checked;
                settings.soundNotifications = document.getElementById('soundNotifications').checked;
                settings.emailNotifications = document.getElementById('emailNotifications').checked;
                settings.notifyTiming = document.querySelector('input[name="notifyTiming"]:checked')?.id;
            } else if (section === 'display') {
                settings.theme = document.querySelector('input[name="theme"]:checked')?.id;
                settings.fontSize = document.getElementById('fontSize').value;
                settings.showAnimations = document.getElementById('showAnimations').checked;
                settings.compactMode = document.getElementById('compactMode').checked;
            } else if (section === 'data') {
                settings.retentionPeriod = document.getElementById('retentionPeriod').value;
                localStorage.setItem('retention-period', settings.retentionPeriod);
            } else if (section === 'backup') {
                settings.autoBackup = document.getElementById('autoBackup').checked;
                settings.backupFrequency = document.getElementById('backupFrequency').value;
            } else if (section === 'advanced') {
                settings.debugMode = document.getElementById('debugMode').checked;
                settings.experimentalFeatures = document.getElementById('experimentalFeatures').checked;
                settings.cacheSize = document.getElementById('cacheSize').value;
                settings.maxConcurrent = document.getElementById('maxConcurrent').value;
            }
            
            // ‰øùÂ≠òÂá¶ÁêÜ
            localStorage.setItem(`settings-${section}`, JSON.stringify(settings));
            
            // ÊàêÂäü„É°„ÉÉ„Çª„Éº„Ç∏
            showMessage('success', 'Ë®≠ÂÆö„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü');
            
            // APIË®≠ÂÆö„ÅÆÂ†¥Âêà„ÅØÊé•Á∂öÁä∂ÊÖã„ÇÇÊõ¥Êñ∞
            if (section === 'api') {
                setTimeout(() => testAPIs(), 100);
            }
        }

        // „É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫
        function showMessage(type, message) {
            const element = type === 'success' ? 
                document.getElementById('successMessage') : 
                document.getElementById('errorMessage');
            
            if (message) {
                element.textContent = message;
            }
            
            element.classList.add('show');
            setTimeout(() => {
                element.classList.remove('show');
            }, 3000);
        }

        // „Éë„Çπ„ÉØ„Éº„ÉâË°®Á§∫Âàá„ÇäÊõø„Åà
        function toggleVisibility(fieldId) {
            const field = document.getElementById(fieldId);
            field.type = field.type === 'password' ? 'text' : 'password';
        }

        // APIÊé•Á∂ö„ÉÜ„Çπ„Éà
        function testAPIs() {
            const apis = ['openai', 'anthropic', 'google', 'worker'];
            apis.forEach(api => {
                const key = localStorage.getItem(`${api}-api-key`) || 
                           localStorage.getItem(`cloudflare-worker-url`);
                const status = document.getElementById(`${api}-status`);
                if (key) {
                    status.classList.remove('status-disconnected');
                    status.classList.add('status-connected');
                } else {
                    status.classList.remove('status-connected');
                    status.classList.add('status-disconnected');
                }
            });
            showMessage('success', 'APIÊé•Á∂öÁä∂ÊÖã„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü');
        }

        // „ÉÜ„Çπ„ÉàÈÄöÁü•
        function testNotification() {
            if (Notification.permission === 'granted') {
                new Notification('SCF V5 ÈÄöÁü•„ÉÜ„Çπ„Éà', {
                    body: '„Åì„Çå„ÅØ„ÉÜ„Çπ„ÉàÈÄöÁü•„Åß„Åô',
                    icon: 'üì¢'
                });
            } else if (Notification.permission !== 'denied') {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        testNotification();
                    }
                });
            }
        }

        // „Éá„Éº„Çø„ÇØ„É™„Ç¢
        function clearData(type) {
            if (confirm(`${type}„ÅÆ„Éá„Éº„Çø„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü`)) {
                // ÂÆüÈöõ„ÅÆÂâäÈô§Âá¶ÁêÜ
                showMessage('success', `${type}„ÅÆ„Éá„Éº„Çø„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü`);
            }
        }

        // „Åô„Åπ„Å¶„ÅÆ„Éá„Éº„Çø„ÇØ„É™„Ç¢
        function clearAllData() {
            if (confirm('„Åô„Åπ„Å¶„ÅÆ„Éá„Éº„Çø„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü„Åì„ÅÆÊìç‰Ωú„ÅØÂèñ„ÇäÊ∂à„Åõ„Åæ„Åõ„Çì„ÄÇ')) {
                if (confirm('Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü')) {
                    localStorage.clear();
                    showMessage('success', '„Åô„Åπ„Å¶„ÅÆ„Éá„Éº„Çø„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü');
                }
            }
        }

        // „Éá„Éº„Çø„Ç®„ÇØ„Çπ„Éù„Éº„Éà
        function exportData() {
            const data = {};
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                data[key] = localStorage.getItem(key);
            }
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `scf-v5-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // „Éá„Éº„Çø„Ç§„É≥„Éù„Éº„Éà
        function importData() {
            const input = document.getElementById('importFile');
            input.click();
            
            input.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const data = JSON.parse(e.target.result);
                            Object.keys(data).forEach(key => {
                                localStorage.setItem(key, data[key]);
                            });
                            showMessage('success', '„Éá„Éº„Çø„Çí„Ç§„É≥„Éù„Éº„Éà„Åó„Åæ„Åó„Åü');
                        } catch (error) {
                            showMessage('error', '„Ç§„É≥„Éù„Éº„Éà„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                        }
                    };
                    reader.readAsText(file);
                }
            });
        }

        // „Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±Êõ¥Êñ∞
        function updateSystemInfo() {
            // „Éñ„É©„Ç¶„Ç∂ÊÉÖÂ†±
            document.getElementById('browserInfo').textContent = navigator.userAgent.substring(0, 50) + '...';
            
            // „Çπ„Éà„É¨„Éº„Ç∏ÊÉÖÂ†±
            if (navigator.storage && navigator.storage.estimate) {
                navigator.storage.estimate().then(estimate => {
                    const used = (estimate.usage / 1024 / 1024).toFixed(2);
                    const quota = (estimate.quota / 1024 / 1024).toFixed(2);
                    document.getElementById('storageInfo').textContent = `${used}MB / ${quota}MB`;
                });
            }
            
            // IndexedDBÊÉÖÂ†±
            document.getElementById('indexedDBInfo').textContent = 
                window.indexedDB ? 'Âà©Áî®ÂèØËÉΩ' : 'Âà©Áî®‰∏çÂèØ';
        }

        // Ë®≠ÂÆö„É™„Çª„ÉÉ„Éà
        function resetSettings(section) {
            if (confirm('Ë®≠ÂÆö„Çí„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åô„ÅãÔºü')) {
                localStorage.removeItem(`settings-${section}`);
                showMessage('success', 'Ë®≠ÂÆö„Çí„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åó„Åü');
                location.reload();
            }
        }

        // Â∑•Â†¥Âá∫Ëç∑ÊôÇ„Å´Êàª„Åô
        function resetToFactory() {
            if (confirm('„Åô„Åπ„Å¶„ÅÆË®≠ÂÆö„ÇíÂàùÊúüÁä∂ÊÖã„Å´Êàª„Åó„Åæ„Åô„ÅãÔºü')) {
                if (confirm('„Åì„ÅÆÊìç‰Ωú„ÅØÂèñ„ÇäÊ∂à„Åõ„Åæ„Åõ„Çì„ÄÇÊú¨ÂΩì„Å´ÂÆüË°å„Åó„Åæ„Åô„ÅãÔºü')) {
                    localStorage.clear();
                    location.reload();
                }
            }
        }

        // URL„Éè„ÉÉ„Ç∑„É•„Åã„Çâ„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈÅ∏Êäû
        function checkHashAndShowSection() {
            const hash = window.location.hash.substring(1);
            if (hash) {
                const validSections = ['general', 'api', 'notification', 'display', 'data', 'backup', 'advanced', 'about'];
                if (validSections.includes(hash)) {
                    showSection(hash);
                }
            }
        }

        // ÂàùÊúüÂåñ
        window.addEventListener('load', () => {
            updateSystemInfo();
            
            // ‰∏ÄËà¨Ë®≠ÂÆö„ÅÆË™≠„ÅøËæº„Åø
            const siteName = localStorage.getItem('site-name');
            const authorName = localStorage.getItem('author-name');
            const language = localStorage.getItem('language');
            const timezone = localStorage.getItem('timezone');
            
            if (siteName) document.getElementById('siteName').value = siteName;
            if (authorName) document.getElementById('authorName').value = authorName;
            if (language) document.getElementById('language').value = language;
            if (timezone) document.getElementById('timezone').value = timezone;
            
            // APIË®≠ÂÆö„ÅÆË™≠„ÅøËæº„Åø
            const openaiKey = localStorage.getItem('openai-api-key');
            const anthropicKey = localStorage.getItem('anthropic-api-key');
            const googleKey = localStorage.getItem('google-api-key');
            const workerUrl = localStorage.getItem('cloudflare-worker-url');
            
            // ÂÄ§„ÅåÂ≠òÂú®„Åô„ÇãÂ†¥Âêà„ÅÆ„ÅøË®≠ÂÆöÔºàÁ©∫ÊñáÂ≠óÂàó„ÇÇË®≠ÂÆö„Åô„ÇãÔºâ
            if (openaiKey !== null) {
                document.getElementById('openaiKey').value = openaiKey;
            }
            if (anthropicKey !== null) {
                document.getElementById('anthropicKey').value = anthropicKey;
            }
            if (googleKey !== null) {
                document.getElementById('googleKey').value = googleKey;
            }
            if (workerUrl !== null) {
                document.getElementById('workerUrl').value = workerUrl;
            }
            
            // „Åù„ÅÆ‰ªñ„ÅÆË®≠ÂÆö„ÅÆË™≠„ÅøËæº„Åø
            const notificationSettings = localStorage.getItem('settings-notification');
            if (notificationSettings) {
                const settings = JSON.parse(notificationSettings);
                if (settings.enableNotifications !== undefined) {
                    document.getElementById('enableNotifications').checked = settings.enableNotifications;
                }
                if (settings.soundNotifications !== undefined) {
                    document.getElementById('soundNotifications').checked = settings.soundNotifications;
                }
                if (settings.emailNotifications !== undefined) {
                    document.getElementById('emailNotifications').checked = settings.emailNotifications;
                }
            }
            
            const displaySettings = localStorage.getItem('settings-display');
            if (displaySettings) {
                const settings = JSON.parse(displaySettings);
                if (settings.fontSize) {
                    document.getElementById('fontSize').value = settings.fontSize;
                }
                if (settings.showAnimations !== undefined) {
                    document.getElementById('showAnimations').checked = settings.showAnimations;
                }
                if (settings.compactMode !== undefined) {
                    document.getElementById('compactMode').checked = settings.compactMode;
                }
            }
            
            testAPIs();
            
            // URL„Éè„ÉÉ„Ç∑„É•„Åã„Çâ„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÈÅ∏Êäû
            checkHashAndShowSection();
        });
        
        // „Éè„ÉÉ„Ç∑„É•Â§âÊõ¥ÊôÇ„Å´„ÇÇ„Çª„ÇØ„Ç∑„Éß„É≥Âàá„ÇäÊõø„Åà
        window.addEventListener('hashchange', checkHashAndShowSection);
    </script>
</body>
</html>