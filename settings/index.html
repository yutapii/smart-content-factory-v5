<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨­å®š - ã‚·ã‚¹ãƒ†ãƒ è¨­å®š | SCF V5</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans JP', sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .back-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            display: flex;
            gap: 20px;
        }

        .sidebar {
            width: 250px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .menu-item {
            padding: 12px 15px;
            margin-bottom: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #666;
        }

        .menu-item:hover {
            background: #f8f9fa;
        }

        .menu-item.active {
            background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1));
            color: #667eea;
            font-weight: bold;
        }

        .menu-icon {
            font-size: 1.2em;
        }

        .main-content {
            flex: 1;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .section-header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .section-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .section-description {
            color: #666;
            font-size: 0.95em;
        }

        .setting-group {
            margin-bottom: 25px;
        }

        .setting-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
            font-size: 0.95em;
        }

        .setting-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .setting-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .setting-hint {
            margin-top: 5px;
            font-size: 0.85em;
            color: #999;
        }

        .api-key-input {
            position: relative;
        }

        .api-key-field {
            padding-right: 40px;
        }

        .toggle-visibility {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #999;
            font-size: 1.2em;
        }

        .toggle-visibility:hover {
            color: #667eea;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .checkbox-input {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .checkbox-label {
            cursor: pointer;
            color: #333;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .radio-input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .radio-label {
            cursor: pointer;
            color: #333;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: 10px;
        }

        .status-connected {
            background: #4caf50;
        }

        .status-disconnected {
            background: #f44336;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background: #f8f9fa;
            font-weight: bold;
            color: #555;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .storage-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 10px;
        }

        .storage-used {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.85em;
            font-weight: bold;
        }

        .import-export-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .import-box,
        .export-box {
            padding: 20px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .import-box:hover,
        .export-box:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .import-icon,
        .export-icon {
            font-size: 2em;
            margin-bottom: 10px;
            color: #999;
        }

        .success-message {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }

        .success-message.show {
            display: block;
        }

        .error-message {
            background: #ffebee;
            border-left: 4px solid #f44336;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                position: static;
            }
            
            .import-export-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>âš™ï¸ è¨­å®š - ã‚·ã‚¹ãƒ†ãƒ è¨­å®š</h1>
            <a href="../index.html" class="back-btn">â† ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸</a>
        </div>
    </div>

    <div class="container">
        <div class="sidebar">
            <div class="menu-item active" onclick="showSection('general')" data-section="general">
                <span class="menu-icon">ğŸ </span>
                <span>ä¸€èˆ¬è¨­å®š</span>
            </div>
            <div class="menu-item" onclick="showSection('api')" data-section="api">
                <span class="menu-icon">ğŸ”‘</span>
                <span>APIã‚­ãƒ¼</span>
            </div>
            <div class="menu-item" onclick="showSection('notification')" data-section="notification">
                <span class="menu-icon">ğŸ””</span>
                <span>é€šçŸ¥è¨­å®š</span>
            </div>
            <div class="menu-item" onclick="showSection('display')" data-section="display">
                <span class="menu-icon">ğŸ¨</span>
                <span>è¡¨ç¤ºè¨­å®š</span>
            </div>
            <div class="menu-item" onclick="showSection('data')" data-section="data">
                <span class="menu-icon">ğŸ’¾</span>
                <span>ãƒ‡ãƒ¼ã‚¿ç®¡ç†</span>
            </div>
            <div class="menu-item" onclick="showSection('backup')" data-section="backup">
                <span class="menu-icon">ğŸ“¦</span>
                <span>ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</span>
            </div>
            <div class="menu-item" onclick="showSection('advanced')" data-section="advanced">
                <span class="menu-icon">ğŸ”§</span>
                <span>è©³ç´°è¨­å®š</span>
            </div>
            <div class="menu-item" onclick="showSection('about')" data-section="about">
                <span class="menu-icon">â„¹ï¸</span>
                <span>æƒ…å ±</span>
            </div>
        </div>

        <div class="main-content">
            <div id="successMessage" class="success-message">
                âœ… è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ
            </div>
            <div id="errorMessage" class="error-message">
                âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ
            </div>

            <!-- ä¸€èˆ¬è¨­å®š -->
            <div class="section active" id="general-section">
                <div class="section-header">
                    <h2 class="section-title">ä¸€èˆ¬è¨­å®š</h2>
                    <p class="section-description">åŸºæœ¬çš„ãªè¨­å®šã‚’è¡Œã„ã¾ã™</p>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="siteName">ã‚µã‚¤ãƒˆå</label>
                    <input type="text" id="siteName" class="setting-input" value="æ—¥åˆŠAIã‚†ãŸã•ã‚“æ–°è">
                    <div class="setting-hint">ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«è¡¨ç¤ºã•ã‚Œã‚‹åç§°</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="authorName">è‘—è€…å</label>
                    <input type="text" id="authorName" class="setting-input" value="AIã‚†ãŸã•ã‚“">
                    <div class="setting-hint">è¨˜äº‹ã®è‘—è€…ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹åå‰</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="language">è¨€èª</label>
                    <select id="language" class="setting-input">
                        <option value="ja" selected>æ—¥æœ¬èª</option>
                        <option value="en">English</option>
                        <option value="zh">ä¸­æ–‡</option>
                        <option value="ko">í•œêµ­ì–´</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="timezone">ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³</label>
                    <select id="timezone" class="setting-input">
                        <option value="Asia/Tokyo" selected>Asia/Tokyo (JST)</option>
                        <option value="UTC">UTC</option>
                        <option value="America/New_York">America/New_York (EST)</option>
                        <option value="Europe/London">Europe/London (GMT)</option>
                    </select>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('general')">ä¿å­˜</button>
                    <button class="btn btn-secondary" onclick="resetSettings('general')">ãƒªã‚»ãƒƒãƒˆ</button>
                </div>
            </div>

            <!-- APIã‚­ãƒ¼è¨­å®š -->
            <div class="section" id="api-section">
                <div class="section-header">
                    <h2 class="section-title">APIã‚­ãƒ¼è¨­å®š</h2>
                    <p class="section-description">å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã®APIã‚­ãƒ¼ã‚’ç®¡ç†ã—ã¾ã™</p>
                </div>

                <div class="setting-group">
                    <label class="setting-label">
                        OpenAI API Key
                        <span class="status-indicator status-disconnected" id="openai-status"></span>
                    </label>
                    <div class="api-key-input">
                        <input type="password" id="openaiKey" class="setting-input api-key-field" placeholder="sk-...">
                        <button class="toggle-visibility" onclick="toggleVisibility('openaiKey')">ğŸ‘ï¸</button>
                    </div>
                    <div class="setting-hint">GPT-4, DALL-E 3ãªã©ã§ä½¿ç”¨</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">
                        Anthropic API Key
                        <span class="status-indicator status-disconnected" id="anthropic-status"></span>
                    </label>
                    <div class="api-key-input">
                        <input type="password" id="anthropicKey" class="setting-input api-key-field" placeholder="sk-ant-...">
                        <button class="toggle-visibility" onclick="toggleVisibility('anthropicKey')">ğŸ‘ï¸</button>
                    </div>
                    <div class="setting-hint">Claude 3ã§ä½¿ç”¨</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">
                        Google AI API Key
                        <span class="status-indicator status-disconnected" id="google-status"></span>
                    </label>
                    <div class="api-key-input">
                        <input type="password" id="googleKey" class="setting-input api-key-field" placeholder="AIza...">
                        <button class="toggle-visibility" onclick="toggleVisibility('googleKey')">ğŸ‘ï¸</button>
                    </div>
                    <div class="setting-hint">Gemini Proã§ä½¿ç”¨</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">
                        Cloudflare Worker URL
                        <span class="status-indicator status-disconnected" id="worker-status"></span>
                    </label>
                    <input type="url" id="workerUrl" class="setting-input" placeholder="https://your-worker.workers.dev">
                    <div class="setting-hint">Claude API CORSå›é¿ç”¨ï¼ˆclaude-worker.jsã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰</div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('api')">ä¿å­˜</button>
                    <button class="btn btn-secondary" onclick="testAPIs()">æ¥ç¶šãƒ†ã‚¹ãƒˆ</button>
                </div>
            </div>

            <!-- é€šçŸ¥è¨­å®š -->
            <div class="section" id="notification-section">
                <div class="section-header">
                    <h2 class="section-title">é€šçŸ¥è¨­å®š</h2>
                    <p class="section-description">é€šçŸ¥ã®è¡¨ç¤ºæ–¹æ³•ã‚’è¨­å®šã—ã¾ã™</p>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="enableNotifications" class="checkbox-input" checked>
                    <label for="enableNotifications" class="checkbox-label">ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é€šçŸ¥ã‚’æœ‰åŠ¹ã«ã™ã‚‹</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="soundNotifications" class="checkbox-input">
                    <label for="soundNotifications" class="checkbox-label">ã‚µã‚¦ãƒ³ãƒ‰é€šçŸ¥ã‚’æœ‰åŠ¹ã«ã™ã‚‹</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="emailNotifications" class="checkbox-input">
                    <label for="emailNotifications" class="checkbox-label">ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã‚’æœ‰åŠ¹ã«ã™ã‚‹</label>
                </div>

                <div class="setting-group">
                    <label class="setting-label">é€šçŸ¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="notifyAll" name="notifyTiming" class="radio-input" checked>
                            <label for="notifyAll" class="radio-label">ã™ã¹ã¦ã®æ“ä½œ</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="notifyImportant" name="notifyTiming" class="radio-input">
                            <label for="notifyImportant" class="radio-label">é‡è¦ãªæ“ä½œã®ã¿</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="notifyError" name="notifyTiming" class="radio-input">
                            <label for="notifyError" class="radio-label">ã‚¨ãƒ©ãƒ¼ã®ã¿</label>
                        </div>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('notification')">ä¿å­˜</button>
                    <button class="btn btn-secondary" onclick="testNotification()">ãƒ†ã‚¹ãƒˆé€šçŸ¥</button>
                </div>
            </div>

            <!-- è¡¨ç¤ºè¨­å®š -->
            <div class="section" id="display-section">
                <div class="section-header">
                    <h2 class="section-title">è¡¨ç¤ºè¨­å®š</h2>
                    <p class="section-description">ç”»é¢è¡¨ç¤ºã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¾ã™</p>
                </div>

                <div class="setting-group">
                    <label class="setting-label">ãƒ†ãƒ¼ãƒ</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="themeLight" name="theme" class="radio-input" checked>
                            <label for="themeLight" class="radio-label">ãƒ©ã‚¤ãƒˆ</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="themeDark" name="theme" class="radio-input">
                            <label for="themeDark" class="radio-label">ãƒ€ãƒ¼ã‚¯</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="themeAuto" name="theme" class="radio-input">
                            <label for="themeAuto" class="radio-label">è‡ªå‹•ï¼ˆã‚·ã‚¹ãƒ†ãƒ è¨­å®šã«å¾“ã†ï¼‰</label>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="fontSize">ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º</label>
                    <select id="fontSize" class="setting-input">
                        <option value="small">å°</option>
                        <option value="medium" selected>æ¨™æº–</option>
                        <option value="large">å¤§</option>
                        <option value="xlarge">ç‰¹å¤§</option>
                    </select>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="showAnimations" class="checkbox-input" checked>
                    <label for="showAnimations" class="checkbox-label">ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="compactMode" class="checkbox-input">
                    <label for="compactMode" class="checkbox-label">ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆãƒ¢ãƒ¼ãƒ‰</label>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('display')">ä¿å­˜</button>
                    <button class="btn btn-secondary" onclick="previewTheme()">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
                </div>
            </div>

            <!-- ãƒ‡ãƒ¼ã‚¿ç®¡ç† -->
            <div class="section" id="data-section">
                <div class="section-header">
                    <h2 class="section-title">ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h2>
                    <p class="section-description">ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã—ã¾ã™</p>
                </div>

                <div class="setting-group">
                    <label class="setting-label">ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨çŠ¶æ³</label>
                    <div class="storage-bar">
                        <div class="storage-used" style="width: 35%;">35% ä½¿ç”¨ä¸­</div>
                    </div>
                    <div class="setting-hint">ç´„ 3.5MB / 10MB</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">ä¿å­˜ãƒ‡ãƒ¼ã‚¿ä¸€è¦§</label>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥</th>
                                <th>ä»¶æ•°</th>
                                <th>ã‚µã‚¤ã‚º</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>è¨˜äº‹</td>
                                <td>156</td>
                                <td>2.1MB</td>
                                <td><button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.85em;" onclick="clearData('articles')">å‰Šé™¤</button></td>
                            </tr>
                            <tr>
                                <td>RSSãƒ•ã‚£ãƒ¼ãƒ‰</td>
                                <td>45</td>
                                <td>0.8MB</td>
                                <td><button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.85em;" onclick="clearData('feeds')">å‰Šé™¤</button></td>
                            </tr>
                            <tr>
                                <td>ç”»åƒ</td>
                                <td>23</td>
                                <td>0.5MB</td>
                                <td><button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.85em;" onclick="clearData('images')">å‰Šé™¤</button></td>
                            </tr>
                            <tr>
                                <td>è¨­å®š</td>
                                <td>-</td>
                                <td>0.1MB</td>
                                <td>-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="retentionPeriod">ãƒ‡ãƒ¼ã‚¿ä¿æŒæœŸé–“</label>
                    <select id="retentionPeriod" class="setting-input">
                        <option value="30">30æ—¥</option>
                        <option value="60" selected>60æ—¥</option>
                        <option value="90">90æ—¥</option>
                        <option value="180">180æ—¥</option>
                        <option value="365">365æ—¥</option>
                    </select>
                    <div class="setting-hint">å¤ã„ãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•çš„ã«å‰Šé™¤ã•ã‚Œã¾ã™</div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('data')">ä¿å­˜</button>
                    <button class="btn btn-danger" onclick="clearAllData()">ã™ã¹ã¦ã‚¯ãƒªã‚¢</button>
                </div>
            </div>

            <!-- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— -->
            <div class="section" id="backup-section">
                <div class="section-header">
                    <h2 class="section-title">ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</h2>
                    <p class="section-description">ãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</p>
                </div>

                <div class="import-export-section">
                    <div class="import-box" onclick="importData()">
                        <input type="file" id="importFile" accept=".json" style="display: none;">
                        <div class="import-icon">ğŸ“¥</div>
                        <div>ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</div>
                        <div style="font-size: 0.85em; color: #999; margin-top: 5px;">JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</div>
                    </div>
                    <div class="export-box" onclick="exportData()">
                        <div class="export-icon">ğŸ“¤</div>
                        <div>ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</div>
                        <div style="font-size: 0.85em; color: #999; margin-top: 5px;">å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</div>
                    </div>
                </div>

                <div class="setting-group" style="margin-top: 30px;">
                    <label class="setting-label">è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="autoBackup" class="checkbox-input">
                        <label for="autoBackup" class="checkbox-label">è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’æœ‰åŠ¹ã«ã™ã‚‹</label>
                    </div>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="backupFrequency">ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é »åº¦</label>
                    <select id="backupFrequency" class="setting-input">
                        <option value="daily">æ¯æ—¥</option>
                        <option value="weekly" selected>é€±1å›</option>
                        <option value="monthly">æœˆ1å›</option>
                    </select>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('backup')">ä¿å­˜</button>
                    <button class="btn btn-secondary" onclick="createBackup()">ä»Šã™ããƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</button>
                </div>
            </div>

            <!-- è©³ç´°è¨­å®š -->
            <div class="section" id="advanced-section">
                <div class="section-header">
                    <h2 class="section-title">è©³ç´°è¨­å®š</h2>
                    <p class="section-description">é«˜åº¦ãªè¨­å®šé …ç›®</p>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="debugMode" class="checkbox-input">
                    <label for="debugMode" class="checkbox-label">ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="experimentalFeatures" class="checkbox-input">
                    <label for="experimentalFeatures" class="checkbox-label">å®Ÿé¨“çš„æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹</label>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="cacheSize">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚º (MB)</label>
                    <input type="number" id="cacheSize" class="setting-input" value="100" min="10" max="1000">
                    <div class="setting-hint">ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ã®æœ€å¤§ä¿å­˜å®¹é‡</div>
                </div>

                <div class="setting-group">
                    <label class="setting-label" for="maxConcurrent">æœ€å¤§åŒæ™‚å‡¦ç†æ•°</label>
                    <input type="number" id="maxConcurrent" class="setting-input" value="5" min="1" max="20">
                    <div class="setting-hint">åŒæ™‚ã«å‡¦ç†ã™ã‚‹æœ€å¤§ã‚¿ã‚¹ã‚¯æ•°</div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="saveSettings('advanced')">ä¿å­˜</button>
                    <button class="btn btn-danger" onclick="resetToFactory()">å·¥å ´å‡ºè·æ™‚ã«æˆ»ã™</button>
                </div>
            </div>

            <!-- æƒ…å ± -->
            <div class="section" id="about-section">
                <div class="section-header">
                    <h2 class="section-title">ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±</h2>
                    <p class="section-description">SCF V5ã«ã¤ã„ã¦</p>
                </div>

                <div class="setting-group">
                    <table class="data-table">
                        <tbody>
                            <tr>
                                <td><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</strong></td>
                                <td>5.0.3</td>
                            </tr>
                            <tr>
                                <td><strong>ãƒ“ãƒ«ãƒ‰</strong></td>
                                <td>2025.01.10</td>
                            </tr>
                            <tr>
                                <td><strong>é–‹ç™ºè€…</strong></td>
                                <td>æ—¥åˆŠAIã‚†ãŸã•ã‚“æ–°è</td>
                            </tr>
                            <tr>
                                <td><strong>ãƒ©ã‚¤ã‚»ãƒ³ã‚¹</strong></td>
                                <td>MIT</td>
                            </tr>
                            <tr>
                                <td><strong>ãƒ–ãƒ©ã‚¦ã‚¶</strong></td>
                                <td id="browserInfo">-</td>
                            </tr>
                            <tr>
                                <td><strong>ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</strong></td>
                                <td id="storageInfo">-</td>
                            </tr>
                            <tr>
                                <td><strong>IndexedDB</strong></td>
                                <td id="indexedDBInfo">-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="setting-group">
                    <h3 style="margin-bottom: 10px;">æ©Ÿèƒ½ä¸€è¦§</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li>âœ… RSSä¸€è¦§ç®¡ç†ï¼ˆæœ€å¤§500ãƒ•ã‚£ãƒ¼ãƒ‰ï¼‰</li>
                        <li>âœ… é…ä¿¡RSSè¨˜äº‹è¡¨ç¤º</li>
                        <li>âœ… è¨˜äº‹ç”Ÿæˆï¼ˆ3ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰</li>
                        <li>âœ… WXRå‡ºåŠ›ï¼ˆnote.comå¯¾å¿œï¼‰</li>
                        <li>âœ… ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ</li>
                        <li>âœ… ç”»åƒç”Ÿæˆï¼ˆCanvas APIï¼‰</li>
                        <li>âœ… å›³è¡¨ç”Ÿæˆ</li>
                        <li>âœ… ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆï¼ˆ1200Ã—628pxï¼‰</li>
                        <li>âœ… æŠ•ç¨¿ç®¡ç†ï¼ˆPVãƒ»ã„ã„ã­ï¼‰</li>
                        <li>âœ… è¨­å®šç®¡ç†</li>
                    </ul>
                </div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="checkUpdates()">æ›´æ–°ã‚’ç¢ºèª</button>
                    <button class="btn btn-primary" onclick="showHelp()">ãƒ˜ãƒ«ãƒ—</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆ
        function showSection(section) {
            // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-section="${section}"]`).classList.add('active');
            
            // ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤º
            document.querySelectorAll('.section').forEach(sec => {
                sec.classList.remove('active');
            });
            document.getElementById(`${section}-section`).classList.add('active');
        }

        // è¨­å®šä¿å­˜
        function saveSettings(section) {
            const settings = {};
            
            if (section === 'general') {
                settings.siteName = document.getElementById('siteName').value;
                settings.authorName = document.getElementById('authorName').value;
                settings.language = document.getElementById('language').value;
                settings.timezone = document.getElementById('timezone').value;
                
                // LocalStorageã«ä¿å­˜
                localStorage.setItem('site-name', settings.siteName);
                localStorage.setItem('author-name', settings.authorName);
                localStorage.setItem('language', settings.language);
                localStorage.setItem('timezone', settings.timezone);
            } else if (section === 'api') {
                settings.openaiKey = document.getElementById('openaiKey').value;
                settings.anthropicKey = document.getElementById('anthropicKey').value;
                settings.googleKey = document.getElementById('googleKey').value;
                settings.workerUrl = document.getElementById('workerUrl').value;
                
                // LocalStorageã«å€‹åˆ¥ã«ä¿å­˜ï¼ˆç©ºã§ã‚‚ä¿å­˜ã—ã¦ã€å‰Šé™¤ã•ã‚ŒãŸå ´åˆã‚‚åæ˜ ï¼‰
                localStorage.setItem('openai-api-key', settings.openaiKey || '');
                localStorage.setItem('anthropic-api-key', settings.anthropicKey || '');
                localStorage.setItem('google-api-key', settings.googleKey || '');
                localStorage.setItem('cloudflare-worker-url', settings.workerUrl || '');
            } else if (section === 'notification') {
                settings.enableNotifications = document.getElementById('enableNotifications').checked;
                settings.soundNotifications = document.getElementById('soundNotifications').checked;
                settings.emailNotifications = document.getElementById('emailNotifications').checked;
                settings.notifyTiming = document.querySelector('input[name="notifyTiming"]:checked')?.id;
            } else if (section === 'display') {
                settings.theme = document.querySelector('input[name="theme"]:checked')?.id;
                settings.fontSize = document.getElementById('fontSize').value;
                settings.showAnimations = document.getElementById('showAnimations').checked;
                settings.compactMode = document.getElementById('compactMode').checked;
            } else if (section === 'data') {
                settings.retentionPeriod = document.getElementById('retentionPeriod').value;
                localStorage.setItem('retention-period', settings.retentionPeriod);
            } else if (section === 'backup') {
                settings.autoBackup = document.getElementById('autoBackup').checked;
                settings.backupFrequency = document.getElementById('backupFrequency').value;
            } else if (section === 'advanced') {
                settings.debugMode = document.getElementById('debugMode').checked;
                settings.experimentalFeatures = document.getElementById('experimentalFeatures').checked;
                settings.cacheSize = document.getElementById('cacheSize').value;
                settings.maxConcurrent = document.getElementById('maxConcurrent').value;
            }
            
            // ä¿å­˜å‡¦ç†
            localStorage.setItem(`settings-${section}`, JSON.stringify(settings));
            
            // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            showMessage('success', 'è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ');
            
            // APIè¨­å®šã®å ´åˆã¯æ¥ç¶šçŠ¶æ…‹ã‚‚æ›´æ–°
            if (section === 'api') {
                setTimeout(() => testAPIs(), 100);
            }
        }

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
        function showMessage(type, message) {
            const element = type === 'success' ? 
                document.getElementById('successMessage') : 
                document.getElementById('errorMessage');
            
            if (message) {
                element.textContent = message;
            }
            
            element.classList.add('show');
            setTimeout(() => {
                element.classList.remove('show');
            }, 3000);
        }

        // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
        function toggleVisibility(fieldId) {
            const field = document.getElementById(fieldId);
            field.type = field.type === 'password' ? 'text' : 'password';
        }

        // APIæ¥ç¶šãƒ†ã‚¹ãƒˆ
        function testAPIs() {
            const apis = ['openai', 'anthropic', 'google', 'worker'];
            apis.forEach(api => {
                const key = localStorage.getItem(`${api}-api-key`) || 
                           localStorage.getItem(`cloudflare-worker-url`);
                const status = document.getElementById(`${api}-status`);
                if (key) {
                    status.classList.remove('status-disconnected');
                    status.classList.add('status-connected');
                } else {
                    status.classList.remove('status-connected');
                    status.classList.add('status-disconnected');
                }
            });
            showMessage('success', 'APIæ¥ç¶šçŠ¶æ…‹ã‚’æ›´æ–°ã—ã¾ã—ãŸ');
        }

        // ãƒ†ã‚¹ãƒˆé€šçŸ¥
        function testNotification() {
            if (Notification.permission === 'granted') {
                new Notification('SCF V5 é€šçŸ¥ãƒ†ã‚¹ãƒˆ', {
                    body: 'ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆé€šçŸ¥ã§ã™',
                    icon: 'ğŸ“¢'
                });
            } else if (Notification.permission !== 'denied') {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        testNotification();
                    }
                });
            }
        }

        // ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢
        function clearData(type) {
            if (confirm(`${type}ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
                // å®Ÿéš›ã®å‰Šé™¤å‡¦ç†
                showMessage('success', `${type}ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`);
            }
        }

        // ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢
        function clearAllData() {
            if (confirm('ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
                if (confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
                    localStorage.clear();
                    showMessage('success', 'ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ');
                }
            }
        }

        // ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
        function exportData() {
            const data = {};
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                data[key] = localStorage.getItem(key);
            }
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `scf-v5-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
        function importData() {
            const input = document.getElementById('importFile');
            input.click();
            
            input.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const data = JSON.parse(e.target.result);
                            Object.keys(data).forEach(key => {
                                localStorage.setItem(key, data[key]);
                            });
                            showMessage('success', 'ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ');
                        } catch (error) {
                            showMessage('error', 'ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ');
                        }
                    };
                    reader.readAsText(file);
                }
            });
        }

        // ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±æ›´æ–°
        function updateSystemInfo() {
            // ãƒ–ãƒ©ã‚¦ã‚¶æƒ…å ±
            document.getElementById('browserInfo').textContent = navigator.userAgent.substring(0, 50) + '...';
            
            // ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æƒ…å ±
            if (navigator.storage && navigator.storage.estimate) {
                navigator.storage.estimate().then(estimate => {
                    const used = (estimate.usage / 1024 / 1024).toFixed(2);
                    const quota = (estimate.quota / 1024 / 1024).toFixed(2);
                    document.getElementById('storageInfo').textContent = `${used}MB / ${quota}MB`;
                });
            }
            
            // IndexedDBæƒ…å ±
            document.getElementById('indexedDBInfo').textContent = 
                window.indexedDB ? 'åˆ©ç”¨å¯èƒ½' : 'åˆ©ç”¨ä¸å¯';
        }

        // è¨­å®šãƒªã‚»ãƒƒãƒˆ
        function resetSettings(section) {
            if (confirm('è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                localStorage.removeItem(`settings-${section}`);
                showMessage('success', 'è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ');
                location.reload();
            }
        }

        // å·¥å ´å‡ºè·æ™‚ã«æˆ»ã™
        function resetToFactory() {
            if (confirm('ã™ã¹ã¦ã®è¨­å®šã‚’åˆæœŸçŠ¶æ…‹ã«æˆ»ã—ã¾ã™ã‹ï¼Ÿ')) {
                if (confirm('ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚æœ¬å½“ã«å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ')) {
                    localStorage.clear();
                    location.reload();
                }
            }
        }

        // URLãƒãƒƒã‚·ãƒ¥ã‹ã‚‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’é¸æŠ
        function checkHashAndShowSection() {
            const hash = window.location.hash.substring(1);
            if (hash) {
                const validSections = ['general', 'api', 'notification', 'display', 'data', 'backup', 'advanced', 'about'];
                if (validSections.includes(hash)) {
                    showSection(hash);
                }
            }
        }

        // åˆæœŸåŒ–
        window.addEventListener('load', () => {
            updateSystemInfo();
            
            // ä¸€èˆ¬è¨­å®šã®èª­ã¿è¾¼ã¿
            const siteName = localStorage.getItem('site-name');
            const authorName = localStorage.getItem('author-name');
            const language = localStorage.getItem('language');
            const timezone = localStorage.getItem('timezone');
            
            if (siteName) document.getElementById('siteName').value = siteName;
            if (authorName) document.getElementById('authorName').value = authorName;
            if (language) document.getElementById('language').value = language;
            if (timezone) document.getElementById('timezone').value = timezone;
            
            // APIè¨­å®šã®èª­ã¿è¾¼ã¿
            const openaiKey = localStorage.getItem('openai-api-key');
            const anthropicKey = localStorage.getItem('anthropic-api-key');
            const googleKey = localStorage.getItem('google-api-key');
            const workerUrl = localStorage.getItem('cloudflare-worker-url');
            
            // å€¤ãŒå­˜åœ¨ã™ã‚‹å ´åˆã®ã¿è¨­å®šï¼ˆç©ºæ–‡å­—åˆ—ã‚‚è¨­å®šã™ã‚‹ï¼‰
            if (openaiKey !== null) {
                document.getElementById('openaiKey').value = openaiKey;
            }
            if (anthropicKey !== null) {
                document.getElementById('anthropicKey').value = anthropicKey;
            }
            if (googleKey !== null) {
                document.getElementById('googleKey').value = googleKey;
            }
            if (workerUrl !== null) {
                document.getElementById('workerUrl').value = workerUrl;
            }
            
            // ãã®ä»–ã®è¨­å®šã®èª­ã¿è¾¼ã¿
            const notificationSettings = localStorage.getItem('settings-notification');
            if (notificationSettings) {
                const settings = JSON.parse(notificationSettings);
                if (settings.enableNotifications !== undefined) {
                    document.getElementById('enableNotifications').checked = settings.enableNotifications;
                }
                if (settings.soundNotifications !== undefined) {
                    document.getElementById('soundNotifications').checked = settings.soundNotifications;
                }
                if (settings.emailNotifications !== undefined) {
                    document.getElementById('emailNotifications').checked = settings.emailNotifications;
                }
            }
            
            const displaySettings = localStorage.getItem('settings-display');
            if (displaySettings) {
                const settings = JSON.parse(displaySettings);
                if (settings.fontSize) {
                    document.getElementById('fontSize').value = settings.fontSize;
                }
                if (settings.showAnimations !== undefined) {
                    document.getElementById('showAnimations').checked = settings.showAnimations;
                }
                if (settings.compactMode !== undefined) {
                    document.getElementById('compactMode').checked = settings.compactMode;
                }
            }
            
            testAPIs();
            
            // URLãƒãƒƒã‚·ãƒ¥ã‹ã‚‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’é¸æŠ
            checkHashAndShowSection();
        });
        
        // ãƒãƒƒã‚·ãƒ¥å¤‰æ›´æ™‚ã«ã‚‚ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆ
        window.addEventListener('hashchange', checkHashAndShowSection);
    </script>
</body>
</html>