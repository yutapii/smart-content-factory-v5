<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ - AIç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆ | SCF V5</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans JP', sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .back-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
        }

        .ai-selector {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .ai-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .ai-tab {
            flex: 1;
            padding: 15px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .ai-tab:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .ai-tab.active {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1));
        }

        .ai-icon {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .ai-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 3px;
        }

        .ai-model {
            font-size: 0.85em;
            color: #666;
        }

        .main-area {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
        }

        .sidebar {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            height: fit-content;
        }

        .prompt-type {
            margin-bottom: 20px;
        }

        .prompt-type h3 {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #333;
        }

        .type-card {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .type-card:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .type-card.active {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102,126,234,0.05), rgba(118,75,162,0.05));
        }

        .type-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 3px;
        }

        .type-desc {
            font-size: 0.85em;
            color: #666;
        }

        .context-inputs {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
            font-size: 0.9em;
        }

        .input-field {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .tone-selector {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .tone-btn {
            padding: 5px 10px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s;
        }

        .tone-btn:hover {
            background: #f8f9fa;
        }

        .tone-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .main-content {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }

        .char-counter {
            display: flex;
            gap: 15px;
            font-size: 0.85em;
        }

        .counter-item {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .counter-value {
            font-weight: bold;
            color: #333;
        }

        .prompt-editor {
            width: 100%;
            min-height: 400px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
        }

        .prompt-editor:focus {
            outline: none;
            border-color: #667eea;
        }

        .variable-hint {
            margin-top: 10px;
            padding: 10px;
            background: #e8f5e9;
            border-radius: 5px;
            border-left: 4px solid #4caf50;
        }

        .variable-hint-title {
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 5px;
        }

        .variable-list {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 5px;
        }

        .variable-tag {
            background: white;
            padding: 3px 8px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #1976d2;
            cursor: pointer;
        }

        .variable-tag:hover {
            background: #e3f2fd;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            flex: 1;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .test-section {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .test-title {
            font-weight: bold;
            color: #333;
        }

        .test-input {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            margin-bottom: 10px;
            resize: vertical;
        }

        .response-area {
            background: white;
            padding: 15px;
            border-radius: 5px;
            min-height: 150px;
            white-space: pre-wrap;
            font-family: 'Noto Sans JP', sans-serif;
            line-height: 1.6;
            color: #333;
        }

        .response-loading {
            text-align: center;
            color: #999;
        }

        .loading-spinner {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .templates-list {
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .template-item {
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .template-item:hover {
            background: #e9ecef;
        }

        .template-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 3px;
        }

        .template-preview {
            font-size: 0.85em;
            color: #666;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        @media (max-width: 968px) {
            .main-area {
                grid-template-columns: 1fr;
            }
            
            .ai-tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>ğŸ¤– ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ - AIç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆ</h1>
            <a href="../index.html" class="back-btn">â† ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸</a>
        </div>
    </div>

    <div class="container">
        <div class="ai-selector">
            <div class="ai-tabs">
                <div class="ai-tab active" onclick="selectAI('openai')" data-ai="openai">
                    <div class="ai-icon">ğŸ§ </div>
                    <div class="ai-name">OpenAI</div>
                    <div class="ai-model">GPT-4 / GPT-3.5</div>
                </div>
                <div class="ai-tab" onclick="selectAI('anthropic')" data-ai="anthropic">
                    <div class="ai-icon">ğŸ¤–</div>
                    <div class="ai-name">Anthropic</div>
                    <div class="ai-model">Claude 3</div>
                </div>
                <div class="ai-tab" onclick="selectAI('google')" data-ai="google">
                    <div class="ai-icon">ğŸŒŸ</div>
                    <div class="ai-name">Google</div>
                    <div class="ai-model">Gemini Pro</div>
                </div>
                <div class="ai-tab" onclick="selectAI('template')" data-ai="template">
                    <div class="ai-icon">ğŸ“</div>
                    <div class="ai-name">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</div>
                    <div class="ai-model">APIã‚­ãƒ¼ä¸è¦</div>
                </div>
            </div>
        </div>

        <div class="main-area">
            <div class="sidebar">
                <div class="prompt-type">
                    <h3>ğŸ“‹ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¿ã‚¤ãƒ—</h3>
                    <div class="type-card active" onclick="selectType('article')" data-type="article">
                        <div class="type-title">è¨˜äº‹ç”Ÿæˆ</div>
                        <div class="type-desc">ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ä½œæˆç”¨</div>
                    </div>
                    <div class="type-card" onclick="selectType('summary')" data-type="summary">
                        <div class="type-title">è¦ç´„ç”Ÿæˆ</div>
                        <div class="type-desc">é•·æ–‡ã‚’ç°¡æ½”ã«ã¾ã¨ã‚ã‚‹</div>
                    </div>
                    <div class="type-card" onclick="selectType('rewrite')" data-type="rewrite">
                        <div class="type-title">ãƒªãƒ©ã‚¤ãƒˆ</div>
                        <div class="type-desc">æ–‡ç« ã‚’åˆ¥ã®è¡¨ç¾ã«</div>
                    </div>
                    <div class="type-card" onclick="selectType('translation')" data-type="translation">
                        <div class="type-title">ç¿»è¨³</div>
                        <div class="type-desc">å¤šè¨€èªå¯¾å¿œ</div>
                    </div>
                    <div class="type-card" onclick="selectType('qa')" data-type="qa">
                        <div class="type-title">Q&Aç”Ÿæˆ</div>
                        <div class="type-desc">è³ªå•ã¨å›ç­”ã‚’ä½œæˆ</div>
                    </div>
                    <div class="type-card" onclick="selectType('custom')" data-type="custom">
                        <div class="type-title">ã‚«ã‚¹ã‚¿ãƒ </div>
                        <div class="type-desc">è‡ªç”±ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä½œæˆ</div>
                    </div>
                </div>

                <div class="context-inputs">
                    <div class="input-group">
                        <label class="input-label">ãƒˆãƒ¼ãƒ³</label>
                        <div class="tone-selector">
                            <button class="tone-btn active" onclick="selectTone('professional')" data-tone="professional">ãƒ—ãƒ­</button>
                            <button class="tone-btn" onclick="selectTone('casual')" data-tone="casual">ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«</button>
                            <button class="tone-btn" onclick="selectTone('friendly')" data-tone="friendly">è¦ªã—ã¿</button>
                            <button class="tone-btn" onclick="selectTone('formal')" data-tone="formal">ãƒ•ã‚©ãƒ¼ãƒãƒ«</button>
                            <button class="tone-btn" onclick="selectTone('creative')" data-tone="creative">å‰µé€ çš„</button>
                        </div>
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="targetAudience">ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ</label>
                        <input type="text" id="targetAudience" class="input-field" placeholder="ä¾‹: ãƒ“ã‚¸ãƒã‚¹ãƒ‘ãƒ¼ã‚½ãƒ³">
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="keywords">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</label>
                        <input type="text" id="keywords" class="input-field" placeholder="ä¾‹: AI, è‡ªå‹•åŒ–, DX">
                    </div>

                    <div class="input-group">
                        <label class="input-label" for="maxLength">æœ€å¤§æ–‡å­—æ•°</label>
                        <input type="number" id="maxLength" class="input-field" value="1000">
                    </div>
                </div>

                <div class="templates-list" id="templatesList">
                    <!-- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§ -->
                </div>
            </div>

            <div class="main-content">
                <div class="section-header">
                    <h2 class="section-title">âœï¸ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ‡ã‚£ã‚¿</h2>
                    <div class="char-counter">
                        <div class="counter-item">
                            <span>æ–‡å­—æ•°:</span>
                            <span class="counter-value" id="charCount">0</span>
                        </div>
                        <div class="counter-item">
                            <span>ãƒˆãƒ¼ã‚¯ãƒ³æ•°(æ¨å®š):</span>
                            <span class="counter-value" id="tokenCount">0</span>
                        </div>
                    </div>
                </div>

                <textarea id="promptEditor" class="prompt-editor" placeholder="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„...

ä¾‹:
ä»¥ä¸‹ã®æƒ…å ±ã‚’åŸºã«ã€æ—¥æœ¬èªã§ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ã‚¿ã‚¤ãƒˆãƒ«: {{title}}
è¦ç´„: {{summary}}
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{keywords}}

è¦ä»¶:
- æ–‡å­—æ•°: {{maxLength}}æ–‡å­—ä»¥å†…
- ãƒˆãƒ¼ãƒ³: {{tone}}
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: {{targetAudience}}
"></textarea>

                <div class="variable-hint">
                    <div class="variable-hint-title">ğŸ“Œ ä½¿ç”¨å¯èƒ½ãªå¤‰æ•°</div>
                    <div class="variable-list">
                        <span class="variable-tag" onclick="insertVariable('{{title}}')">{{title}}</span>
                        <span class="variable-tag" onclick="insertVariable('{{summary}}')">{{summary}}</span>
                        <span class="variable-tag" onclick="insertVariable('{{keywords}}')">{{keywords}}</span>
                        <span class="variable-tag" onclick="insertVariable('{{maxLength}}')">{{maxLength}}</span>
                        <span class="variable-tag" onclick="insertVariable('{{tone}}')">{{tone}}</span>
                        <span class="variable-tag" onclick="insertVariable('{{targetAudience}}')">{{targetAudience}}</span>
                        <span class="variable-tag" onclick="insertVariable('{{date}}')">{{date}}</span>
                        <span class="variable-tag" onclick="insertVariable('{{source}}')">{{source}}</span>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="clearPrompt()">ã‚¯ãƒªã‚¢</button>
                    <button class="btn btn-success" onclick="savePrompt()">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¿å­˜</button>
                    <button class="btn btn-primary" onclick="generatePrompt()">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ</button>
                </div>

                <div class="test-section">
                    <div class="test-header">
                        <span class="test-title">ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</span>
                        <button class="btn btn-primary" onclick="testPrompt()">å®Ÿè¡Œ</button>
                    </div>
                    <textarea id="testInput" class="test-input" placeholder="ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ï¼ˆå¤‰æ•°ã«å¯¾å¿œã™ã‚‹å€¤ã‚’å…¥åŠ›ï¼‰"></textarea>
                    <div id="responseArea" class="response-area">
                        ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentAI = 'openai';
        let currentType = 'article';
        let currentTone = 'professional';

        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
        const promptTemplates = {
            article: {
                openai: `ã‚ãªãŸã¯çµŒé¨“è±Šå¯Œãªã‚¸ãƒ£ãƒ¼ãƒŠãƒªã‚¹ãƒˆã§ã™ã€‚ä»¥ä¸‹ã®æƒ…å ±ã‚’åŸºã«ã€é­…åŠ›çš„ãªè¨˜äº‹ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ã‚¿ã‚¤ãƒˆãƒ«: {{title}}
è¦ç´„: {{summary}}
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{keywords}}

è¦ä»¶:
- æ–‡å­—æ•°: {{maxLength}}æ–‡å­—ä»¥å†…
- ãƒˆãƒ¼ãƒ³: {{tone}}
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: {{targetAudience}}
- æ§‹æˆ: å°å…¥ã€æœ¬æ–‡ï¼ˆ3-5æ®µè½ï¼‰ã€çµè«–
- SEOã‚’æ„è­˜ã—ãŸå†…å®¹
- äº‹å®Ÿã«åŸºã¥ã„ãŸæ­£ç¢ºãªæƒ…å ±`,
                anthropic: `ä»¥ä¸‹ã®æŒ‡ç¤ºã«å¾“ã£ã¦ã€é«˜å“è³ªãªè¨˜äº‹ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

<context>
ã‚¿ã‚¤ãƒˆãƒ«: {{title}}
è¦ç´„: {{summary}}
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{keywords}}
</context>

<requirements>
- æœ€å¤§æ–‡å­—æ•°: {{maxLength}}
- æ–‡ä½“: {{tone}}
- èª­è€…å±¤: {{targetAudience}}
</requirements>

<instructions>
1. èª­è€…ã®èˆˆå‘³ã‚’å¼•ãå°å…¥ã‚’æ›¸ã
2. è«–ç†çš„ãªæ§‹æˆã§æœ¬æ–‡ã‚’å±•é–‹
3. å®Ÿç”¨çš„ãªçµè«–ã§ç· ã‚ããã‚‹
</instructions>`,
                google: `ã‚¿ã‚¹ã‚¯: ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ã®ä½œæˆ

å…¥åŠ›æƒ…å ±:
â€¢ ã‚¿ã‚¤ãƒˆãƒ«: {{title}}
â€¢ æ¦‚è¦: {{summary}}
â€¢ ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{keywords}}

åˆ¶ç´„æ¡ä»¶:
â€¢ æ–‡å­—æ•°ä¸Šé™: {{maxLength}}
â€¢ æ–‡ä½“: {{tone}}
â€¢ å¯¾è±¡èª­è€…: {{targetAudience}}

å‡ºåŠ›å½¢å¼:
è¨˜äº‹å…¨æ–‡ã‚’æ—¥æœ¬èªã§å‡ºåŠ›`,
                template: `ã€è¨˜äº‹ä½œæˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€‘

â– åŸºæœ¬æƒ…å ±
ã‚¿ã‚¤ãƒˆãƒ«: {{title}}
æ¦‚è¦: {{summary}}
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{keywords}}

â– åŸ·ç­†è¦ä»¶
ãƒ»æ–‡å­—æ•°: {{maxLength}}æ–‡å­—ä»¥å†…
ãƒ»ãƒˆãƒ¼ãƒ³: {{tone}}
ãƒ»ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: {{targetAudience}}

â– è¨˜äº‹æ§‹æˆ
1. ãƒªãƒ¼ãƒ‰æ–‡ï¼ˆå•é¡Œæèµ·ï¼‰
2. ç¾çŠ¶èª¬æ˜
3. è©³ç´°è§£èª¬
4. ä»Šå¾Œã®å±•æœ›
5. ã¾ã¨ã‚`
            },
            summary: {
                openai: `ä»¥ä¸‹ã®æ–‡ç« ã‚’{{maxLength}}æ–‡å­—ä»¥å†…ã§è¦ç´„ã—ã¦ãã ã•ã„ã€‚

åŸæ–‡:
{{content}}

è¦ä»¶:
- é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã‚’æ¼ã‚‰ã•ãªã„
- {{tone}}ãªæ–‡ä½“
- {{targetAudience}}å‘ã‘ã®è¡¨ç¾`,
                anthropic: `<task>æ–‡ç« è¦ç´„</task>

<original_text>
{{content}}
</original_text>

<requirements>
- æœ€å¤§{{maxLength}}æ–‡å­—
- ãƒˆãƒ¼ãƒ³: {{tone}}
- å¯¾è±¡: {{targetAudience}}
- ç®‡æ¡æ›¸ãã§ä¸»è¦ãƒã‚¤ãƒ³ãƒˆã‚’æŠ½å‡º
</requirements>`,
                google: `è¦ç´„ã‚¿ã‚¹ã‚¯:

å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆ:
{{content}}

åˆ¶ç´„:
â€¢ {{maxLength}}æ–‡å­—ä»¥å†…
â€¢ {{tone}}ã‚¹ã‚¿ã‚¤ãƒ«
â€¢ {{targetAudience}}å‘ã‘

å‡ºåŠ›: ç°¡æ½”ãªè¦ç´„`,
                template: `ã€è¦ç´„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€‘

åŸæ–‡:
{{content}}

è¦ç´„æ¡ä»¶:
ãƒ»{{maxLength}}æ–‡å­—ä»¥å†…
ãƒ»{{tone}}ãªè¡¨ç¾
ãƒ»{{targetAudience}}ãŒç†è§£ã—ã‚„ã™ã„å†…å®¹`
            },
            rewrite: {
                openai: `ä»¥ä¸‹ã®æ–‡ç« ã‚’{{tone}}ãªãƒˆãƒ¼ãƒ³ã§æ›¸ãç›´ã—ã¦ãã ã•ã„ã€‚

åŸæ–‡:
{{content}}

ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: {{targetAudience}}
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{keywords}}`,
                anthropic: `<task>æ–‡ç« ã®ãƒªãƒ©ã‚¤ãƒˆ</task>

<original>
{{content}}
</original>

<style>{{tone}}</style>
<audience>{{targetAudience}}</audience>
<keywords>{{keywords}}</keywords>`,
                google: `ãƒªãƒ©ã‚¤ãƒˆã‚¿ã‚¹ã‚¯:

å…ƒã®æ–‡ç« :
{{content}}

æ–°ã—ã„ã‚¹ã‚¿ã‚¤ãƒ«: {{tone}}
èª­è€…: {{targetAudience}}
å«ã‚ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{keywords}}`,
                template: `ã€ãƒªãƒ©ã‚¤ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€‘

å…ƒã®æ–‡ç« :
{{content}}

ãƒªãƒ©ã‚¤ãƒˆæ–¹é‡:
ãƒ»ãƒˆãƒ¼ãƒ³: {{tone}}
ãƒ»èª­è€…: {{targetAudience}}
ãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{keywords}}`
            },
            translation: {
                openai: `ä»¥ä¸‹ã®æ–‡ç« ã‚’{{targetLanguage}}ã«ç¿»è¨³ã—ã¦ãã ã•ã„ã€‚

åŸæ–‡:
{{content}}

æ³¨æ„ç‚¹:
- {{tone}}ãªè¡¨ç¾ã‚’ä½¿ç”¨
- æ–‡åŒ–çš„ãªæ–‡è„ˆã‚’è€ƒæ…®
- å°‚é–€ç”¨èªã¯é©åˆ‡ã«ç¿»è¨³`,
                anthropic: `<translation_task>
<source_text>
{{content}}
</source_text>

<target_language>{{targetLanguage}}</target_language>
<tone>{{tone}}</tone>
<notes>æ–‡åŒ–çš„ãªé©å¿œã‚’å«ã‚€</notes>
</translation_task>`,
                google: `ç¿»è¨³:

åŸæ–‡:
{{content}}

ç¿»è¨³å…ˆ: {{targetLanguage}}
ã‚¹ã‚¿ã‚¤ãƒ«: {{tone}}`,
                template: `ã€ç¿»è¨³ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€‘

åŸæ–‡:
{{content}}

ç¿»è¨³å…ˆè¨€èª: {{targetLanguage}}
æ–‡ä½“: {{tone}}`
            },
            qa: {
                openai: `ä»¥ä¸‹ã®ãƒˆãƒ”ãƒƒã‚¯ã«ã¤ã„ã¦ã€Q&Aå½¢å¼ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ãƒˆãƒ”ãƒƒã‚¯: {{title}}
è©³ç´°: {{summary}}
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{keywords}}

è¦ä»¶:
- è³ªå•æ•°: 5-10å€‹
- {{tone}}ãªå›ç­”
- {{targetAudience}}å‘ã‘`,
                anthropic: `<task>Q&Aç”Ÿæˆ</task>

<topic>
ã‚¿ã‚¤ãƒˆãƒ«: {{title}}
èª¬æ˜: {{summary}}
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{keywords}}
</topic>

<requirements>
- 5-10å€‹ã®è³ªå•ã¨å›ç­”
- ãƒˆãƒ¼ãƒ³: {{tone}}
- å¯¾è±¡: {{targetAudience}}
</requirements>`,
                google: `Q&Aä½œæˆ:

ãƒˆãƒ”ãƒƒã‚¯: {{title}}
æ¦‚è¦: {{summary}}
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{keywords}}

ç”Ÿæˆ: 5-10å€‹ã®Q&A
ã‚¹ã‚¿ã‚¤ãƒ«: {{tone}}
å¯¾è±¡: {{targetAudience}}`,
                template: `ã€Q&Aãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€‘

ãƒˆãƒ”ãƒƒã‚¯: {{title}}
æ¦‚è¦: {{summary}}
ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {{keywords}}

Q&Aå½¢å¼:
Q1: [è³ªå•]
A1: [å›ç­”]

ãƒˆãƒ¼ãƒ³: {{tone}}
å¯¾è±¡: {{targetAudience}}`
            },
            custom: {
                openai: '',
                anthropic: '',
                google: '',
                template: ''
            }
        };

        // AIé¸æŠ
        function selectAI(ai) {
            currentAI = ai;
            document.querySelectorAll('.ai-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-ai="${ai}"]`).classList.add('active');
            loadTemplate();
        }

        // ã‚¿ã‚¤ãƒ—é¸æŠ
        function selectType(type) {
            currentType = type;
            document.querySelectorAll('.type-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`[data-type="${type}"]`).classList.add('active');
            loadTemplate();
        }

        // ãƒˆãƒ¼ãƒ³é¸æŠ
        function selectTone(tone) {
            currentTone = tone;
            document.querySelectorAll('.tone-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tone="${tone}"]`).classList.add('active');
        }

        // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆèª­ã¿è¾¼ã¿
        function loadTemplate() {
            const template = promptTemplates[currentType][currentAI];
            document.getElementById('promptEditor').value = template;
            updateCounters();
        }

        // æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ
        function updateCounters() {
            const text = document.getElementById('promptEditor').value;
            document.getElementById('charCount').textContent = text.length;
            // ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®æ¨å®šï¼ˆæ—¥æœ¬èª: 1æ–‡å­—â‰’2ãƒˆãƒ¼ã‚¯ãƒ³ã€è‹±èª: 1å˜èªâ‰’1ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰
            const japaneseChars = text.match(/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf]/g) || [];
            const englishWords = text.match(/[a-zA-Z]+/g) || [];
            const estimatedTokens = japaneseChars.length * 2 + englishWords.length;
            document.getElementById('tokenCount').textContent = Math.round(estimatedTokens);
        }

        // å¤‰æ•°æŒ¿å…¥
        function insertVariable(variable) {
            const editor = document.getElementById('promptEditor');
            const start = editor.selectionStart;
            const end = editor.selectionEnd;
            const text = editor.value;
            editor.value = text.substring(0, start) + variable + text.substring(end);
            editor.selectionStart = editor.selectionEnd = start + variable.length;
            editor.focus();
            updateCounters();
        }

        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
        function generatePrompt() {
            const editor = document.getElementById('promptEditor');
            let prompt = editor.value;
            
            // å¤‰æ•°ç½®æ›
            const variables = {
                '{{title}}': document.getElementById('testInput').value.split('\n')[0] || 'ã‚¿ã‚¤ãƒˆãƒ«',
                '{{summary}}': document.getElementById('testInput').value.split('\n')[1] || 'è¦ç´„',
                '{{keywords}}': document.getElementById('keywords').value || 'ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰',
                '{{maxLength}}': document.getElementById('maxLength').value || '1000',
                '{{tone}}': currentTone,
                '{{targetAudience}}': document.getElementById('targetAudience').value || 'ä¸€èˆ¬',
                '{{date}}': new Date().toLocaleDateString('ja-JP'),
                '{{source}}': 'æ—¥åˆŠAIã‚†ãŸã•ã‚“æ–°è'
            };
            
            for (const [key, value] of Object.entries(variables)) {
                prompt = prompt.replace(new RegExp(key, 'g'), value);
            }
            
            editor.value = prompt;
            updateCounters();
            alert('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆã—ã¾ã—ãŸ');
        }

        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ã‚¹ãƒˆ
        async function testPrompt() {
            const apiKey = localStorage.getItem(`${currentAI}-api-key`);
            
            if (currentAI === 'template') {
                document.getElementById('responseArea').innerHTML = 
                    '<div style="color: #666;">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã¯APIã‚’ä½¿ç”¨ã—ã¾ã›ã‚“ã€‚<br>ç”Ÿæˆã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ‰‹å‹•ã§AIã‚µãƒ¼ãƒ“ã‚¹ã«å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</div>';
                return;
            }
            
            if (!apiKey) {
                alert(`${currentAI.toUpperCase()}ã®APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚è¨­å®šç”»é¢ã§ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚`);
                return;
            }
            
            const responseArea = document.getElementById('responseArea');
            responseArea.innerHTML = `
                <div class="response-loading">
                    <div class="loading-spinner"></div>
                    <div>AIã‹ã‚‰ã®å¿œç­”ã‚’å¾…ã£ã¦ã„ã¾ã™...</div>
                </div>
            `;
            
            // å®Ÿéš›ã®APIå‘¼ã³å‡ºã—ã¯ã“ã“ã«å®Ÿè£…
            setTimeout(() => {
                responseArea.innerHTML = 
                    `[ãƒ‡ãƒ¢] APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚å®Ÿéš›ã®APIå‘¼ã³å‡ºã—ã¯å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚\n\n` +
                    `ä½¿ç”¨AI: ${currentAI}\n` +
                    `ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¿ã‚¤ãƒ—: ${currentType}\n` +
                    `ãƒˆãƒ¼ãƒ³: ${currentTone}`;
            }, 2000);
        }

        // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¿å­˜
        function savePrompt() {
            const prompt = document.getElementById('promptEditor').value;
            const name = prompt('ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:');
            
            if (name) {
                const templates = JSON.parse(localStorage.getItem('prompt-templates') || '[]');
                templates.push({
                    name: name,
                    prompt: prompt,
                    type: currentType,
                    ai: currentAI,
                    savedAt: new Date().toISOString()
                });
                localStorage.setItem('prompt-templates', JSON.stringify(templates));
                loadSavedTemplates();
                alert('ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä¿å­˜ã—ã¾ã—ãŸ');
            }
        }

        // ä¿å­˜æ¸ˆã¿ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆèª­ã¿è¾¼ã¿
        function loadSavedTemplates() {
            const templates = JSON.parse(localStorage.getItem('prompt-templates') || '[]');
            const list = document.getElementById('templatesList');
            
            if (templates.length === 0) {
                list.innerHTML = '<div style="color: #999; text-align: center; padding: 20px;">ä¿å­˜ã•ã‚ŒãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“</div>';
                return;
            }
            
            list.innerHTML = '<h3 style="margin-bottom: 10px;">ğŸ’¾ ä¿å­˜æ¸ˆã¿ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h3>' +
                templates.map((template, index) => `
                    <div class="template-item" onclick="loadSavedTemplate(${index})">
                        <div class="template-name">${template.name}</div>
                        <div class="template-preview">${template.prompt.substring(0, 100)}...</div>
                    </div>
                `).join('');
        }

        // ä¿å­˜æ¸ˆã¿ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé©ç”¨
        function loadSavedTemplate(index) {
            const templates = JSON.parse(localStorage.getItem('prompt-templates') || '[]');
            const template = templates[index];
            
            if (template) {
                document.getElementById('promptEditor').value = template.prompt;
                selectAI(template.ai);
                selectType(template.type);
                updateCounters();
            }
        }

        // ã‚¯ãƒªã‚¢
        function clearPrompt() {
            if (confirm('ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ')) {
                document.getElementById('promptEditor').value = '';
                updateCounters();
            }
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.getElementById('promptEditor').addEventListener('input', updateCounters);

        // åˆæœŸåŒ–
        loadTemplate();
        loadSavedTemplates();
        updateCounters();
    </script>
</body>
</html>