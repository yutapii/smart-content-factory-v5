<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ - SCF V5</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, system-ui, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #333;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .stats {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: #f0f0f0;
            border-radius: 10px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }

        .filter-controls {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .filter-section {
            margin-bottom: 20px;
        }

        .filter-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .category-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .category-btn {
            padding: 10px 20px;
            border-radius: 25px;
            border: 2px solid #ddd;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .category-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .category-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .category-count {
            background: rgba(0, 0, 0, 0.1);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        .time-filter {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .time-btn {
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 13px;
        }

        .time-btn.active {
            background: #764ba2;
            color: white;
            border-color: #764ba2;
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .search-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #ddd;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
        }

        .search-input:focus {
            border-color: #667eea;
        }

        .search-btn {
            padding: 12px 30px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .search-btn:hover {
            background: #5a67d8;
        }

        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .article-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .article-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .article-category {
            display: inline-block;
            padding: 5px 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .article-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .article-description {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .article-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #999;
            font-size: 12px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .article-source {
            font-weight: bold;
            color: #667eea;
        }

        .relevance-score {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #ff6b6b;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .load-more {
            text-align: center;
            margin: 40px 0;
        }

        .load-more-btn {
            padding: 15px 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .load-more-btn:hover {
            transform: scale(1.05);
        }

        .loading {
            text-align: center;
            padding: 50px;
            color: white;
            font-size: 18px;
        }

        .no-results {
            text-align: center;
            padding: 50px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            color: #666;
            font-size: 18px;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .loading-animation {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div style="position: relative;">
                <h1>ğŸ¯ AIã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</h1>
                <p>AIãƒ»ãƒ­ãƒœãƒƒãƒˆãƒ»è‡ªå‹•é‹è»¢ãƒ»é€šä¿¡é–¢é€£ã®è¨˜äº‹ã‚’è‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</p>
                <div style="position: absolute; top: 0; right: 0; display: flex; gap: 10px;">
                    <a href="../07_ai-trend-map/index.html" style="background: rgba(255, 255, 255, 0.2); color: white; padding: 8px 16px; border-radius: 20px; text-decoration: none; font-size: 14px;">â† [07] ãƒˆãƒ¬ãƒ³ãƒ‰ãƒãƒƒãƒ—</a>
                    <a href="../index.html" style="background: rgba(255, 255, 255, 0.2); color: white; padding: 8px 16px; border-radius: 20px; text-decoration: none; font-size: 14px;">ğŸ  ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a>
                </div>
            </div>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-value" id="total-articles">0</span>
                    <span class="stat-label">ç·è¨˜äº‹æ•°</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="filtered-articles">0</span>
                    <span class="stat-label">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¸ˆã¿</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="relevance-rate">0%</span>
                    <span class="stat-label">é–¢é€£åº¦</span>
                </div>
            </div>
        </div>

        <div class="filter-controls">
            <div class="filter-section">
                <div class="filter-title">ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</div>
                <div class="category-filters" id="category-filters">
                    <button class="category-btn active" data-category="all">
                        ã™ã¹ã¦ <span class="category-count">0</span>
                    </button>
                    <button class="category-btn" data-category="ai">
                        ğŸ¤– AIãƒ»æ©Ÿæ¢°å­¦ç¿’ <span class="category-count">0</span>
                    </button>
                    <button class="category-btn" data-category="robot">
                        ğŸ¦¾ ãƒ­ãƒœãƒƒãƒˆ <span class="category-count">0</span>
                    </button>
                    <button class="category-btn" data-category="autonomous">
                        ğŸš— è‡ªå‹•é‹è»¢ <span class="category-count">0</span>
                    </button>
                    <button class="category-btn" data-category="communication">
                        ğŸ“¡ é€šä¿¡ãƒ»5G/6G <span class="category-count">0</span>
                    </button>
                    <button class="category-btn" data-category="quantum">
                        âš›ï¸ é‡å­ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ <span class="category-count">0</span>
                    </button>
                </div>
            </div>

            <div class="filter-section">
                <div class="filter-title">æ™‚é–“ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</div>
                <div class="time-filter">
                    <button class="time-btn active" data-time="all">ã™ã¹ã¦</button>
                    <button class="time-btn" data-time="today">ä»Šæ—¥</button>
                    <button class="time-btn" data-time="week">ä»Šé€±</button>
                    <button class="time-btn" data-time="month">ä»Šæœˆ</button>
                </div>
            </div>

            <div class="filter-section">
                <div class="filter-title">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢</div>
                <div class="search-box">
                    <input type="text" class="search-input" id="search-input" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ï¼ˆä¾‹ï¼šGPT, Claude, Teslaï¼‰">
                    <button class="search-btn" onclick="searchArticles()">æ¤œç´¢</button>
                </div>
            </div>
        </div>

        <div id="articles-container">
            <div class="loading loading-animation">è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
        </div>

        <div class="load-more" id="load-more" style="display: none;">
            <button class="load-more-btn" onclick="loadMoreArticles()">ã•ã‚‰ã«è¡¨ç¤º</button>
        </div>
    </div>

    <script>
        let allArticles = [];
        let filteredArticles = [];
        let displayedCount = 0;
        const articlesPerPage = 12;
        let currentCategory = 'all';
        let currentTimeFilter = 'all';
        let currentSearchTerm = '';

        // ã‚«ãƒ†ã‚´ãƒªãƒ¼å®šç¾©
        const categories = {
            ai: {
                keywords: ['ai', 'artificial intelligence', 'äººå·¥çŸ¥èƒ½', 'machine learning', 'æ©Ÿæ¢°å­¦ç¿’', 
                          'deep learning', 'ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°', 'neural network', 'ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯',
                          'gpt', 'claude', 'llm', 'å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«', 'chatbot', 'ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ'],
                icon: 'ğŸ¤–'
            },
            robot: {
                keywords: ['robot', 'ãƒ­ãƒœãƒƒãƒˆ', 'robotics', 'ãƒ­ãƒœãƒ†ã‚£ã‚¯ã‚¹', 'automation', 'è‡ªå‹•åŒ–',
                          'humanoid', 'ãƒ’ãƒ¥ãƒ¼ãƒãƒã‚¤ãƒ‰', 'drone', 'ãƒ‰ãƒ­ãƒ¼ãƒ³', 'cobots', 'å”åƒãƒ­ãƒœãƒƒãƒˆ'],
                icon: 'ğŸ¦¾'
            },
            autonomous: {
                keywords: ['autonomous', 'è‡ªå‹•é‹è»¢', 'self-driving', 'autopilot', 'ã‚ªãƒ¼ãƒˆãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ',
                          'adas', 'waymo', 'cruise', 'tesla', 'ãƒ†ã‚¹ãƒ©', 'lidar', 'ãƒ©ã‚¤ãƒ€ãƒ¼'],
                icon: 'ğŸš—'
            },
            communication: {
                keywords: ['5g', '6g', 'iot', 'internet of things', 'ãƒ¢ãƒã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ', 
                          'edge computing', 'ã‚¨ãƒƒã‚¸ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°', 'network', 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯',
                          'wireless', 'ãƒ¯ã‚¤ãƒ¤ãƒ¬ã‚¹', 'telecommunications', 'é€šä¿¡'],
                icon: 'ğŸ“¡'
            },
            quantum: {
                keywords: ['quantum', 'é‡å­', 'quantum computing', 'é‡å­ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿', 'qubit', 'é‡å­ãƒ“ãƒƒãƒˆ',
                          'quantum supremacy', 'é‡å­è¶…è¶Šæ€§', 'quantum algorithm', 'é‡å­ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ '],
                icon: 'âš›ï¸'
            }
        };

        // è¨˜äº‹ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¤å®š
        function categorizeArticle(article) {
            const text = `${article.title} ${article.description} ${article.category || ''}`.toLowerCase();
            const articleCategories = [];
            let maxScore = 0;
            let primaryCategory = null;

            for (const [catKey, catData] of Object.entries(categories)) {
                let score = 0;
                for (const keyword of catData.keywords) {
                    if (text.includes(keyword.toLowerCase())) {
                        score += keyword.length; // é•·ã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã»ã©é«˜ã‚¹ã‚³ã‚¢
                    }
                }
                if (score > 0) {
                    articleCategories.push(catKey);
                    if (score > maxScore) {
                        maxScore = score;
                        primaryCategory = catKey;
                    }
                }
            }

            return {
                categories: articleCategories,
                primary: primaryCategory,
                score: maxScore
            };
        }

        // è¨˜äº‹ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
        function filterArticles() {
            filteredArticles = allArticles.filter(article => {
                // ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (currentCategory !== 'all') {
                    const articleCats = categorizeArticle(article);
                    if (!articleCats.categories.includes(currentCategory)) {
                        return false;
                    }
                }

                // æ™‚é–“ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (currentTimeFilter !== 'all') {
                    const pubDate = new Date(article.pubDate);
                    const now = new Date();
                    const daysDiff = (now - pubDate) / (1000 * 60 * 60 * 24);

                    if (currentTimeFilter === 'today' && daysDiff > 1) return false;
                    if (currentTimeFilter === 'week' && daysDiff > 7) return false;
                    if (currentTimeFilter === 'month' && daysDiff > 30) return false;
                }

                // æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (currentSearchTerm) {
                    const searchText = `${article.title} ${article.description}`.toLowerCase();
                    if (!searchText.includes(currentSearchTerm.toLowerCase())) {
                        return false;
                    }
                }

                return true;
            });

            // é–¢é€£åº¦ã§ã‚½ãƒ¼ãƒˆ
            filteredArticles.sort((a, b) => {
                const scoreA = categorizeArticle(a).score;
                const scoreB = categorizeArticle(b).score;
                return scoreB - scoreA;
            });

            updateStats();
            displayedCount = 0;
            displayArticles();
        }

        // çµ±è¨ˆæƒ…å ±ã®æ›´æ–°
        function updateStats() {
            document.getElementById('total-articles').textContent = allArticles.length;
            document.getElementById('filtered-articles').textContent = filteredArticles.length;
            const rate = allArticles.length > 0 ? 
                Math.round((filteredArticles.length / allArticles.length) * 100) : 0;
            document.getElementById('relevance-rate').textContent = rate + '%';

            // ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚«ã‚¦ãƒ³ãƒˆã®æ›´æ–°
            const counts = { all: filteredArticles.length };
            for (const catKey of Object.keys(categories)) {
                counts[catKey] = 0;
            }

            filteredArticles.forEach(article => {
                const articleCats = categorizeArticle(article);
                articleCats.categories.forEach(cat => {
                    counts[cat] = (counts[cat] || 0) + 1;
                });
            });

            document.querySelectorAll('.category-btn').forEach(btn => {
                const category = btn.dataset.category;
                const count = counts[category] || 0;
                btn.querySelector('.category-count').textContent = count;
            });
        }

        // è¨˜äº‹ã®è¡¨ç¤º
        function displayArticles() {
            const container = document.getElementById('articles-container');
            
            if (displayedCount === 0) {
                container.innerHTML = '';
            }

            if (filteredArticles.length === 0) {
                container.innerHTML = '<div class="no-results">è©²å½“ã™ã‚‹è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</div>';
                document.getElementById('load-more').style.display = 'none';
                return;
            }

            const articlesToShow = filteredArticles.slice(displayedCount, displayedCount + articlesPerPage);
            
            if (displayedCount === 0) {
                const grid = document.createElement('div');
                grid.className = 'articles-grid';
                grid.id = 'articles-grid';
                container.appendChild(grid);
            }

            const grid = document.getElementById('articles-grid');
            
            articlesToShow.forEach(article => {
                const catInfo = categorizeArticle(article);
                const card = document.createElement('div');
                card.className = 'article-card';
                
                const relevanceScore = Math.min(100, Math.round((catInfo.score / 50) * 100));
                
                card.innerHTML = `
                    ${relevanceScore > 70 ? `<div class="relevance-score">${relevanceScore}%</div>` : ''}
                    <div class="article-category">${categories[catInfo.primary]?.icon || 'ğŸ“°'} ${catInfo.primary || 'ãã®ä»–'}</div>
                    <h3 class="article-title">${article.title}</h3>
                    <p class="article-description">${article.description || ''}</p>
                    <div class="article-meta">
                        <span class="article-source">${article.feedName || 'Unknown'}</span>
                        <span>${new Date(article.pubDate).toLocaleDateString('ja-JP')}</span>
                    </div>
                `;
                
                card.onclick = () => {
                    if (article.link) {
                        window.open(article.link, '_blank');
                    }
                };
                
                grid.appendChild(card);
            });

            displayedCount += articlesToShow.length;
            
            // ã‚‚ã£ã¨è¦‹ã‚‹ãƒœã‚¿ãƒ³ã®è¡¨ç¤º/éè¡¨ç¤º
            document.getElementById('load-more').style.display = 
                displayedCount < filteredArticles.length ? 'block' : 'none';
        }

        // ã‚‚ã£ã¨èª­ã¿è¾¼ã‚€
        function loadMoreArticles() {
            displayArticles();
        }

        // æ¤œç´¢å®Ÿè¡Œ
        function searchArticles() {
            currentSearchTerm = document.getElementById('search-input').value;
            filterArticles();
        }

        // ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentCategory = this.dataset.category;
                filterArticles();
            });
        });

        // æ™‚é–“ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        document.querySelectorAll('.time-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentTimeFilter = this.dataset.time;
                filterArticles();
            });
        });

        // Enterã‚­ãƒ¼ã§æ¤œç´¢
        document.getElementById('search-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchArticles();
            }
        });

        // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰è¨˜äº‹ã‚’èª­ã¿è¾¼ã¿
        async function loadArticles() {
            try {
                console.log('ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èª­ã¿è¾¼ã¿é–‹å§‹...');
                
                // LocalStorageã‹ã‚‰06_databaseã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
                const savedData = localStorage.getItem('06_database_articles');
                
                if (savedData) {
                    console.log('LocalStorageã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿');
                    allArticles = JSON.parse(savedData);
                    console.log(`å…¨è¨˜äº‹æ•°: ${allArticles.length}`);
                    
                    if (allArticles.length === 0) {
                        document.getElementById('articles-container').innerHTML = 
                            '<div class="no-results">è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚05_rss-readerã§è¨˜äº‹ã‚’å–å¾—ã—ã¦ã€06_databaseã¸ä¿å­˜ã—ã¦ãã ã•ã„ã€‚</div>';
                        return;
                    }
                    
                    // 6ãƒ¶æœˆä»¥å†…ã®è¨˜äº‹ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
                    const sixMonthsAgo = new Date();
                    sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);
                    
                    allArticles = allArticles.filter(article => {
                        const pubDate = new Date(article.pubDate);
                        return pubDate > sixMonthsAgo;
                    });
                    
                    console.log(`6ãƒ¶æœˆä»¥å†…ã®è¨˜äº‹æ•°: ${allArticles.length}`);
                    
                    // AIé–¢é€£è¨˜äº‹ã®ã¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
                    const relevantKeywords = [
                        'ai', 'artificial intelligence', 'äººå·¥çŸ¥èƒ½', 
                        'machine learning', 'æ©Ÿæ¢°å­¦ç¿’', 'deep learning',
                        'robot', 'ãƒ­ãƒœãƒƒãƒˆ', 'è‡ªå‹•é‹è»¢', 'autonomous',
                        '5g', '6g', 'iot', 'quantum', 'é‡å­'
                    ];
                    
                    allArticles = allArticles.filter(article => {
                        const text = `${article.title} ${article.description} ${article.category || ''}`.toLowerCase();
                        return relevantKeywords.some(keyword => text.includes(keyword.toLowerCase()));
                    });
                    
                    console.log(`AIé–¢é€£è¨˜äº‹æ•°: ${allArticles.length}`);
                    
                    // æœ€æ–°é †ã«ã‚½ãƒ¼ãƒˆ
                    allArticles.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));
                    
                    filterArticles();
                    return;
                }
                
                // LocalStorageã«ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã€IndexedDBã‚’è©¦ã™
                const dbName = '06_ai-news-aggregator';
                const request = indexedDB.open(dbName, 1);

                request.onsuccess = (event) => {
                    console.log('IndexedDBæ¥ç¶šæˆåŠŸ');
                    const db = event.target.result;
                    
                    // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆã‚¢åã‚’ç¢ºèª
                    console.log('åˆ©ç”¨å¯èƒ½ãªã‚¹ãƒˆã‚¢:', Array.from(db.objectStoreNames));
                    
                    // articlesã‚¹ãƒˆã‚¢ã¾ãŸã¯itemsã‚¹ãƒˆã‚¢ã‚’ç¢ºèª
                    const storeName = db.objectStoreNames.contains('articles') ? 'articles' : 
                                     db.objectStoreNames.contains('items') ? 'items' : null;
                    
                    if (!storeName) {
                        console.error('è¨˜äº‹ã‚¹ãƒˆã‚¢ãŒå­˜åœ¨ã—ã¾ã›ã‚“');
                        document.getElementById('articles-container').innerHTML = 
                            '<div class="no-results">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¨˜äº‹ã‚¹ãƒˆã‚¢ãŒå­˜åœ¨ã—ã¾ã›ã‚“ã€‚05_rss-readerã§è¨˜äº‹ã‚’å–å¾—ã—ã¦ã€06_databaseã¸ä¿å­˜ã—ã¦ãã ã•ã„ã€‚</div>';
                        return;
                    }
                    
                    const transaction = db.transaction([storeName], 'readonly');
                    const store = transaction.objectStore(storeName);
                    const getAllRequest = store.getAll();

                    getAllRequest.onsuccess = () => {
                        allArticles = getAllRequest.result || [];
                        console.log(`å…¨è¨˜äº‹æ•°: ${allArticles.length}`);
                        
                        if (allArticles.length === 0) {
                            document.getElementById('articles-container').innerHTML = 
                                '<div class="no-results">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚05_rss-readerã§è¨˜äº‹ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚</div>';
                            return;
                        }
                        
                        // 6ãƒ¶æœˆä»¥å†…ã®è¨˜äº‹ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
                        const sixMonthsAgo = new Date();
                        sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 6);
                        
                        allArticles = allArticles.filter(article => {
                            const pubDate = new Date(article.pubDate);
                            return pubDate > sixMonthsAgo;
                        });
                        
                        console.log(`6ãƒ¶æœˆä»¥å†…ã®è¨˜äº‹æ•°: ${allArticles.length}`);
                        
                        // AIé–¢é€£è¨˜äº‹ã®ã¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
                        const relevantKeywords = [
                            'ai', 'artificial intelligence', 'äººå·¥çŸ¥èƒ½', 
                            'machine learning', 'æ©Ÿæ¢°å­¦ç¿’', 'deep learning',
                            'robot', 'ãƒ­ãƒœãƒƒãƒˆ', 'è‡ªå‹•é‹è»¢', 'autonomous',
                            '5g', '6g', 'iot', 'quantum', 'é‡å­'
                        ];
                        
                        allArticles = allArticles.filter(article => {
                            const text = `${article.title} ${article.description} ${article.category || ''}`.toLowerCase();
                            return relevantKeywords.some(keyword => text.includes(keyword.toLowerCase()));
                        });
                        
                        console.log(`AIé–¢é€£è¨˜äº‹æ•°: ${allArticles.length}`);
                        
                        // æœ€æ–°é †ã«ã‚½ãƒ¼ãƒˆ
                        allArticles.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));
                        
                        filterArticles();
                    };
                    
                    getAllRequest.onerror = () => {
                        console.error('è¨˜äº‹ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
                        document.getElementById('articles-container').innerHTML = 
                            '<div class="no-results">è¨˜äº‹ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ</div>';
                    };
                };

                request.onerror = () => {
                    console.error('ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    document.getElementById('articles-container').innerHTML = 
                        '<div class="no-results">ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ã®æ¥ç¶šã«å¤±æ•—ã—ã¾ã—ãŸ</div>';
                };
            } catch (error) {
                console.error('ã‚¨ãƒ©ãƒ¼:', error);
                document.getElementById('articles-container').innerHTML = 
                    '<div class="no-results">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + error.message + '</div>';
            }
        }

        // åˆæœŸåŒ–
        loadArticles();
    </script>
</body>
</html>