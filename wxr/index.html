<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WXRÂá∫Âäõ - note.comÁî®XMLÁîüÊàê | SCF V5</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans JP', sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .priority-badge {
            background: #ff6b6b;
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.5em;
            font-weight: normal;
        }

        .back-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
        }

        .info-banner {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #ff9800;
        }

        .info-banner h3 {
            color: #e65100;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .info-banner p {
            color: #bf360c;
            font-size: 0.9em;
        }

        .main-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .input-section, .output-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .char-counter {
            display: flex;
            gap: 15px;
            font-size: 0.85em;
        }

        .counter-item {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .counter-value {
            font-weight: bold;
            color: #333;
        }

        .counter-limit {
            color: #999;
        }

        .counter-warn {
            background: #fff3e0;
            color: #ff9800;
        }

        .counter-error {
            background: #ffebee;
            color: #f44336;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
            font-size: 0.9em;
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .input-field:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea.input-field {
            resize: vertical;
            line-height: 1.6;
        }

        #titleInput {
            font-size: 16px;
            font-weight: bold;
        }

        #bodyInput {
            min-height: 300px;
        }

        .format-hint {
            margin-top: 5px;
            font-size: 0.85em;
            color: #999;
        }

        .batch-mode {
            background: #f0f7ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .batch-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
            background: #ddd;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-switch.active {
            background: #667eea;
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(26px);
        }

        .batch-info {
            font-size: 0.85em;
            color: #666;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            flex: 1;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .output-area {
            width: 100%;
            min-height: 400px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
            background: #f8f9fa;
            overflow-x: auto;
            white-space: pre-wrap;
            word-break: break-all;
        }

        .validation-results {
            margin-top: 20px;
            padding: 15px;
            background: #e8f5e9;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
        }

        .validation-error {
            background: #ffebee;
            border-left-color: #f44336;
        }

        .validation-title {
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 10px;
        }

        .validation-error .validation-title {
            color: #c62828;
        }

        .validation-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .validation-icon {
            font-size: 1.2em;
        }

        .download-section {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border-radius: 8px;
            text-align: center;
        }

        .download-btn {
            display: inline-block;
            padding: 15px 40px;
            background: linear-gradient(135deg, #4caf50, #45a049);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }

        .download-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(76, 175, 80, 0.4);
        }

        .download-info {
            margin-top: 10px;
            font-size: 0.85em;
            color: #666;
        }

        @media (max-width: 968px) {
            .main-area {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>
                üì¶ WXRÂá∫Âäõ - note.comÁî®XMLÁîüÊàê
                <span class="priority-badge">ÊúÄÈáçË¶Å</span>
            </h1>
            <a href="../index.html" class="back-btn">‚Üê „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å∏</a>
        </div>
    </div>

    <div class="container">
        <div class="info-banner">
            <h3>üìå note.comÊ®ôÊ∫ñ„Éï„Ç©„Éº„Éû„ÉÉ„Éà</h3>
            <p>„Çø„Ç§„Éà„É´Ôºà100ÊñáÂ≠óÔºâ‚Üí Êú¨ÊñáÔºà50000ÊñáÂ≠óÔºâ‚Üí „Çø„Ç∞ÔºàÊúÄÂ§ß5ÂÄã„ÄÅÂêÑ30ÊñáÂ≠óÔºâ„ÅÆÂΩ¢Âºè„ÅßÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
        </div>

        <div class="main-area">
            <div class="input-section">
                <div class="section-header">
                    <h2 class="section-title">
                        ‚úèÔ∏è ÂÖ•Âäõ
                    </h2>
                    <div class="char-counter">
                        <div class="counter-item" id="titleCounter">
                            <span>„Çø„Ç§„Éà„É´:</span>
                            <span class="counter-value">0</span>
                            <span class="counter-limit">/ 100</span>
                        </div>
                        <div class="counter-item" id="bodyCounter">
                            <span>Êú¨Êñá:</span>
                            <span class="counter-value">0</span>
                            <span class="counter-limit">/ 50000</span>
                        </div>
                    </div>
                </div>

                <div class="batch-mode">
                    <div class="batch-toggle">
                        <label>„Éê„ÉÉ„ÉÅ„É¢„Éº„ÉâÔºàË§áÊï∞Ë®ò‰∫ãÔºâ:</label>
                        <div class="toggle-switch" id="batchToggle" onclick="toggleBatchMode()">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="batch-info">
                        „Ç™„É≥„Å´„Åô„Çã„Å®„Äå---„ÄçÂå∫Âàá„Çä„ÅßË§áÊï∞Ë®ò‰∫ã„Çí‰∏ÄÊã¨Âá¶ÁêÜ„Åß„Åç„Åæ„Åô
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label" for="articleInput">Ë®ò‰∫ãÂÖ•ÂäõÔºàÁµ±Âêà„Éï„Ç©„Éº„Éû„ÉÉ„ÉàÔºâ</label>
                    <textarea id="articleInput" class="input-field" style="min-height: 400px;" placeholder="„Äê„Çø„Ç§„Éà„É´„Äë
AI„ÅåÂ§â„Åà„ÇãÊú™Êù•„ÅÆÂÉç„ÅçÊñπ - 2025Âπ¥„ÅÆÂ±ïÊúõ

„ÄêÊú¨Êñá„Äë
## „ÅØ„Åò„ÇÅ„Å´
AIÊäÄË°ì„ÅÆÊÄ•ÈÄü„Å™Áô∫Â±ï„Å´„Çà„Çä„ÄÅÁßÅ„Åü„Å°„ÅÆÂÉç„ÅçÊñπ„ÅØÂ§ß„Åç„ÅèÂ§âÂåñ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

### 1. „É™„É¢„Éº„Éà„ÉØ„Éº„ÇØ„ÅÆÈÄ≤Âåñ
- AI„Ç¢„Ç∑„Çπ„Çø„É≥„Éà„Å´„Çà„ÇãÊ•≠ÂãôÊîØÊè¥
- „Éê„Éº„ÉÅ„É£„É´„Ç™„Éï„Ç£„Çπ„ÅÆÂÆüÁèæ

### 2. Êñ∞„Åó„ÅÑËÅ∑Ê•≠„ÅÆË™ïÁîü
AI„Éó„É≠„É≥„Éó„Éà„Ç®„É≥„Ç∏„Éã„Ç¢„Å™„Å©„ÄÅÊñ∞„Åü„Å™Â∞ÇÈñÄËÅ∑„ÅåÁîü„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ

**ÈáçË¶Å„Å™„Éù„Ç§„É≥„Éà**Ôºö‰∫∫Èñì„Å®AI„ÅÆÂçîÂÉç„ÅåÈçµ„Å®„Å™„Çä„Åæ„Åô„ÄÇ

„Äê„Çø„Ç∞„Äë
#AI #ÂÉç„ÅçÊñπÊîπÈù© #Êú™Êù•‰∫àÊ∏¨ #„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº #DX"></textarea>
                    <div class="format-hint">„Äê„Çø„Ç§„Éà„É´„Äë„ÄêÊú¨Êñá„Äë„Äê„Çø„Ç∞„Äë„ÅÆÈ†Ü„Å´Ë®òÂÖ•„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇË§áÊï∞Ë®ò‰∫ã„ÅÆÂ†¥Âêà„ÅØ„Äå---„Äç„ÅßÂå∫Âàá„Çä„Åæ„Åô</div>
                </div>

                <!-- ÊóßÂÖ•ÂäõÊ¨ÑÔºàÈùûË°®Á§∫Ôºâ -->
                <input type="hidden" id="titleInput">
                <textarea style="display:none;" id="bodyInput"></textarea>
                <input type="hidden" id="tagsInput">

                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="loadSample()">„Çµ„É≥„Éó„É´Ë™≠Ëæº</button>
                    <button class="btn btn-primary" onclick="generateWXR()">WXRÁîüÊàê</button>
                </div>
            </div>

            <div class="output-section">
                <div class="section-header">
                    <h2 class="section-title">
                        üìÑ Âá∫ÂäõÔºàWXRÂΩ¢ÂºèÔºâ
                    </h2>
                </div>

                <textarea id="outputArea" class="output-area" readonly placeholder="ÁîüÊàê„Åï„Çå„ÅüWXR XML„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô"></textarea>

                <div id="validationResults"></div>

                <div id="downloadSection" style="display: none;">
                    <div class="download-section">
                        <button class="download-btn" onclick="downloadWXR()">
                            üì• WXR„Éï„Ç°„Ç§„É´„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
                        </button>
                        <div class="download-info">
                            note.com„ÅÆÁÆ°ÁêÜÁîªÈù¢„Åã„Çâ„Ç§„É≥„Éù„Éº„Éà„Åß„Åç„Åæ„Åô
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let batchMode = false;
        let generatedWXR = '';

        // „Éê„ÉÉ„ÉÅ„É¢„Éº„ÉâÂàá„ÇäÊõø„Åà
        function toggleBatchMode() {
            batchMode = !batchMode;
            const toggle = document.getElementById('batchToggle');
            toggle.classList.toggle('active');
            
            if (batchMode) {
                document.getElementById('articleInput').placeholder = `Ë§áÊï∞Ë®ò‰∫ã„Çí„Äå---„Äç„ÅßÂå∫Âàá„Å£„Å¶ÂÖ•Âäõ:

„Äê„Çø„Ç§„Éà„É´„Äë
Ë®ò‰∫ã1„ÅÆ„Çø„Ç§„Éà„É´

„ÄêÊú¨Êñá„Äë
Ë®ò‰∫ã1„ÅÆÊú¨Êñá

„Äê„Çø„Ç∞„Äë
#„Çø„Ç∞1 #„Çø„Ç∞2

---

„Äê„Çø„Ç§„Éà„É´„Äë
Ë®ò‰∫ã2„ÅÆ„Çø„Ç§„Éà„É´

„ÄêÊú¨Êñá„Äë
Ë®ò‰∫ã2„ÅÆÊú¨Êñá

„Äê„Çø„Ç∞„Äë
#„Çø„Ç∞3 #„Çø„Ç∞4`;
            } else {
                document.getElementById('articleInput').placeholder = `„Äê„Çø„Ç§„Éà„É´„Äë
AI„ÅåÂ§â„Åà„ÇãÊú™Êù•„ÅÆÂÉç„ÅçÊñπ - 2025Âπ¥„ÅÆÂ±ïÊúõ

„ÄêÊú¨Êñá„Äë
## „ÅØ„Åò„ÇÅ„Å´
AIÊäÄË°ì„ÅÆÊÄ•ÈÄü„Å™Áô∫Â±ï„Å´„Çà„Çä„ÄÅÁßÅ„Åü„Å°„ÅÆÂÉç„ÅçÊñπ„ÅØÂ§ß„Åç„ÅèÂ§âÂåñ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

### 1. „É™„É¢„Éº„Éà„ÉØ„Éº„ÇØ„ÅÆÈÄ≤Âåñ
- AI„Ç¢„Ç∑„Çπ„Çø„É≥„Éà„Å´„Çà„ÇãÊ•≠ÂãôÊîØÊè¥
- „Éê„Éº„ÉÅ„É£„É´„Ç™„Éï„Ç£„Çπ„ÅÆÂÆüÁèæ

### 2. Êñ∞„Åó„ÅÑËÅ∑Ê•≠„ÅÆË™ïÁîü
AI„Éó„É≠„É≥„Éó„Éà„Ç®„É≥„Ç∏„Éã„Ç¢„Å™„Å©„ÄÅÊñ∞„Åü„Å™Â∞ÇÈñÄËÅ∑„ÅåÁîü„Åæ„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ

**ÈáçË¶Å„Å™„Éù„Ç§„É≥„Éà**Ôºö‰∫∫Èñì„Å®AI„ÅÆÂçîÂÉç„ÅåÈçµ„Å®„Å™„Çä„Åæ„Åô„ÄÇ

„Äê„Çø„Ç∞„Äë
#AI #ÂÉç„ÅçÊñπÊîπÈù© #Êú™Êù•‰∫àÊ∏¨ #„ÉÜ„ÇØ„Éé„É≠„Ç∏„Éº #DX`;
            }
        }

        // Áµ±ÂêàÂÖ•Âäõ„Åã„Çâ„ÅÆËß£Êûê
        function parseArticleInput() {
            const input = document.getElementById('articleInput').value;
            let title = '';
            let body = '';
            let tags = '';
            
            // „Äê„Çø„Ç§„Éà„É´„Äë„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÊäΩÂá∫
            const titleMatch = input.match(/„Äê„Çø„Ç§„Éà„É´„Äë([\s\S]*?)(?=„ÄêÊú¨Êñá„Äë|$)/);
            if (titleMatch) {
                title = titleMatch[1].trim();
            }
            
            // „ÄêÊú¨Êñá„Äë„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÊäΩÂá∫
            const bodyMatch = input.match(/„ÄêÊú¨Êñá„Äë([\s\S]*?)(?=„Äê„Çø„Ç∞„Äë|$)/);
            if (bodyMatch) {
                body = bodyMatch[1].trim();
            }
            
            // „Äê„Çø„Ç∞„Äë„Çª„ÇØ„Ç∑„Éß„É≥„ÇíÊäΩÂá∫
            const tagsMatch = input.match(/„Äê„Çø„Ç∞„Äë([\s\S]*?)(?=---|$)/);
            if (tagsMatch) {
                tags = tagsMatch[1].trim();
            }
            
            // ÊóßÂΩ¢Âºè‰∫íÊèõÊÄß„ÅÆ„Åü„ÇÅ„ÄÅÈö†„Åó„Éï„Ç£„Éº„É´„Éâ„Å´ÂÄ§„ÇíË®≠ÂÆö
            document.getElementById('titleInput').value = title;
            document.getElementById('bodyInput').value = body;
            document.getElementById('tagsInput').value = tags;
            
            return { title, body, tags };
        }
        
        // ÊñáÂ≠óÊï∞„Ç´„Ç¶„É≥„Éà
        function updateCounters() {
            const { title, body } = parseArticleInput();
            
            // „Çø„Ç§„Éà„É´„Ç´„Ç¶„É≥„Çø„Éº
            const titleCounter = document.getElementById('titleCounter');
            const titleCount = title.length;
            titleCounter.querySelector('.counter-value').textContent = titleCount;
            
            if (titleCount > 100) {
                titleCounter.classList.add('counter-error');
            } else if (titleCount > 80) {
                titleCounter.classList.add('counter-warn');
            } else {
                titleCounter.classList.remove('counter-error', 'counter-warn');
            }
            
            // Êú¨Êñá„Ç´„Ç¶„É≥„Çø„Éº
            const bodyCounter = document.getElementById('bodyCounter');
            const bodyCount = body.length;
            bodyCounter.querySelector('.counter-value').textContent = bodyCount;
            
            if (bodyCount > 50000) {
                bodyCounter.classList.add('counter-error');
            } else if (bodyCount > 40000) {
                bodyCounter.classList.add('counter-warn');
            } else {
                bodyCounter.classList.remove('counter-error', 'counter-warn');
            }
        }

        // XML„Ç®„Çπ„Ç±„Éº„Éó
        function escapeXml(text) {
            return text
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&apos;');
        }

        // WXRÁîüÊàê
        function generateWXR() {
            const title = document.getElementById('titleInput').value.trim();
            const body = document.getElementById('bodyInput').value.trim();
            const tags = document.getElementById('tagsInput').value.trim();
            
            if (!batchMode) {
                // „Ç∑„É≥„Ç∞„É´„É¢„Éº„Éâ
                if (!title.trim() || !body.trim()) {
                    alert('„Çø„Ç§„Éà„É´„Å®Êú¨Êñá„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ\n\n„Äê„Çø„Ç§„Éà„É´„Äë\n„Çø„Ç§„Éà„É´\n\n„ÄêÊú¨Êñá„Äë\nÊú¨Êñá\n\n„Äê„Çø„Ç∞„Äë\n#„Çø„Ç∞');
                    return;
                }
                
                const articles = [{
                    title: title.substring(0, 100),
                    body: body.substring(0, 50000),
                    tags: parseTags(tags)
                }];
                
                generatedWXR = createWXR(articles);
            } else {
                // „Éê„ÉÉ„ÉÅ„É¢„Éº„Éâ
                const articles = parseBatchInput(body);
                if (articles.length === 0) {
                    alert('Ë®ò‰∫ã„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                    return;
                }
                
                generatedWXR = createWXR(articles);
            }
            
            document.getElementById('outputArea').value = generatedWXR;
            validateWXR(generatedWXR);
            document.getElementById('downloadSection').style.display = 'block';
        }

        // „Çø„Ç∞„Éë„Éº„Çπ
        function parseTags(tagsStr) {
            if (!tagsStr) return [];
            
            return tagsStr
                .split(/[\s,„ÄÅ]+/)
                .map(tag => tag.replace('#', '').trim())
                .filter(tag => tag)
                .slice(0, 5)
                .map(tag => tag.substring(0, 30));
        }

        // „Éê„ÉÉ„ÉÅÂÖ•Âäõ„Éë„Éº„Çπ
        function parseBatchInput(input) {
            const articles = [];
            const blocks = input.split('---');
            
            for (const block of blocks) {
                const lines = block.trim().split('\n');
                if (lines.length >= 2) {
                    const title = lines[0].trim().substring(0, 100);
                    const lastLine = lines[lines.length - 1];
                    const hasTag = lastLine.startsWith('#');
                    
                    const body = hasTag ? 
                        lines.slice(1, -1).join('\n').substring(0, 50000) :
                        lines.slice(1).join('\n').substring(0, 50000);
                    
                    const tags = hasTag ? parseTags(lastLine) : [];
                    
                    if (title && body) {
                        articles.push({ title, body, tags });
                    }
                }
            }
            
            return articles;
        }

        // WXR XML‰ΩúÊàê
        function createWXR(articles) {
            const now = new Date();
            const pubDate = now.toUTCString();
            const wxrDate = now.toISOString();
            
            let xml = `<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
    xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:wfw="http://wellformedweb.org/CommentAPI/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:wp="http://wordpress.org/export/1.2/">
<channel>
    <title>Êó•ÂàäAI„ÇÜ„Åü„Åï„ÇìÊñ∞ËÅû</title>
    <link>https://note.com/yutapii</link>
    <description>Smart Content Factory V5 Export</description>
    <pubDate>${pubDate}</pubDate>
    <language>ja</language>
    <wp:wxr_version>1.2</wp:wxr_version>
    <wp:base_site_url>https://note.com/</wp:base_site_url>
    <wp:base_blog_url>https://note.com/yutapii</wp:base_blog_url>
    
    <wp:author>
        <wp:author_login><![CDATA[yutapii]]></wp:author_login>
        <wp:author_email><![CDATA[]]></wp:author_email>
        <wp:author_display_name><![CDATA[Êó•ÂàäAI„ÇÜ„Åü„Åï„ÇìÊñ∞ËÅû]]></wp:author_display_name>
    </wp:author>`;

            articles.forEach((article, index) => {
                const postDate = new Date(now.getTime() + index * 1000);
                const postId = Date.now() + index;
                
                xml += `
    
    <item>
        <title>${escapeXml(article.title)}</title>
        <link>https://note.com/yutapii/n/n${postId}</link>
        <pubDate>${postDate.toUTCString()}</pubDate>
        <dc:creator><![CDATA[yutapii]]></dc:creator>
        <guid isPermaLink="false">https://note.com/yutapii/n/n${postId}</guid>
        <description></description>
        <content:encoded><![CDATA[${article.body}]]></content:encoded>
        <excerpt:encoded><![CDATA[]]></excerpt:encoded>
        <wp:post_id>${postId}</wp:post_id>
        <wp:post_date>${postDate.toISOString()}</wp:post_date>
        <wp:post_date_gmt>${postDate.toISOString()}</wp:post_date_gmt>
        <wp:comment_status>open</wp:comment_status>
        <wp:ping_status>open</wp:ping_status>
        <wp:post_name>post-${postId}</wp:post_name>
        <wp:status>publish</wp:status>
        <wp:post_parent>0</wp:post_parent>
        <wp:menu_order>0</wp:menu_order>
        <wp:post_type>post</wp:post_type>
        <wp:post_password></wp:post_password>
        <wp:is_sticky>0</wp:is_sticky>`;
                
                // „Çø„Ç∞ËøΩÂä†
                article.tags.forEach(tag => {
                    xml += `
        <category domain="post_tag" nicename="${escapeXml(tag.toLowerCase())}"><![CDATA[${escapeXml(tag)}]]></category>`;
                });
                
                xml += `
    </item>`;
            });
            
            xml += `
</channel>
</rss>`;
            
            return xml;
        }

        // „Éê„É™„Éá„Éº„Ç∑„Éß„É≥
        function validateWXR(xml) {
            const results = [];
            let hasError = false;
            
            // XMLÂΩ¢Âºè„ÉÅ„Çß„ÉÉ„ÇØ
            try {
                const parser = new DOMParser();
                const doc = parser.parseFromString(xml, 'text/xml');
                const parserError = doc.querySelector('parsererror');
                
                if (parserError) {
                    results.push({ icon: '‚ùå', text: 'XMLÂΩ¢Âºè„Ç®„É©„Éº', error: true });
                    hasError = true;
                } else {
                    results.push({ icon: '‚úÖ', text: 'XMLÂΩ¢Âºè: Ê≠£Â∏∏' });
                }
            } catch (e) {
                results.push({ icon: '‚ùå', text: 'XMLËß£Êûê„Ç®„É©„Éº', error: true });
                hasError = true;
            }
            
            // Ë®ò‰∫ãÊï∞„ÉÅ„Çß„ÉÉ„ÇØ
            const itemCount = (xml.match(/<item>/g) || []).length;
            results.push({ icon: 'üìÑ', text: `Ë®ò‰∫ãÊï∞: ${itemCount}‰ª∂` });
            
            // ÊñáÂ≠óÊï∞„ÉÅ„Çß„ÉÉ„ÇØ
            const titles = xml.match(/<title>(.*?)<\/title>/g) || [];
            let longTitle = false;
            titles.forEach(title => {
                const text = title.replace(/<\/?title>/g, '');
                if (text.length > 100) longTitle = true;
            });
            
            if (longTitle) {
                results.push({ icon: '‚ö†Ô∏è', text: '„Çø„Ç§„Éà„É´„Åå100ÊñáÂ≠ó„ÇíË∂Ö„Åà„Å¶„ÅÑ„Åæ„Åô', error: true });
                hasError = true;
            } else {
                results.push({ icon: '‚úÖ', text: '„Çø„Ç§„Éà„É´ÊñáÂ≠óÊï∞: OK' });
            }
            
            // ÁµêÊûúË°®Á§∫
            const validationDiv = document.getElementById('validationResults');
            validationDiv.className = hasError ? 'validation-results validation-error' : 'validation-results';
            validationDiv.innerHTML = `
                <div class="validation-title">${hasError ? '‚ö†Ô∏è Ê§úË®ºÁµêÊûú: Ê≥®ÊÑè„ÅåÂøÖË¶Å„Åß„Åô' : '‚úÖ Ê§úË®ºÁµêÊûú: Ê≠£Â∏∏'}</div>
                ${results.map(r => `
                    <div class="validation-item">
                        <span class="validation-icon">${r.icon}</span>
                        <span>${r.text}</span>
                    </div>
                `).join('')}
            `;
        }

        // „ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
        function downloadWXR() {
            if (!generatedWXR) {
                alert('ÂÖà„Å´WXR„ÇíÁîüÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            const blob = new Blob([generatedWXR], { type: 'text/xml;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `note-wxr-${new Date().toISOString().split('T')[0]}.xml`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // „Çµ„É≥„Éó„É´Ë™≠Ëæº
        function loadSample() {
            document.getElementById('titleInput').value = 'AI„ÅåÂ§â„Åà„ÇãÊú™Êù•„ÅÆÂÉç„ÅçÊñπ - 2025Âπ¥„ÅÆÂ±ïÊúõ';
            document.getElementById('bodyInput').value = `## „ÅØ„Åò„ÇÅ„Å´

2025Âπ¥„ÄÅAIÊäÄË°ì„ÅÆÊÄ•ÈÄü„Å™Áô∫Â±ï„Å´„Çà„Çä„ÄÅÁßÅ„Åü„Å°„ÅÆÂÉç„ÅçÊñπ„ÅØÂ§ß„Åç„ÅèÂ§â„Çè„Çç„ÅÜ„Å®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

### 1. Ëá™ÂãïÂåñ„ÅÆÈÄ≤Â±ï

Â§ö„Åè„ÅÆÂÆöÂûãÊ•≠Âãô„ÅåAI„Å´„Çà„Å£„Å¶Ëá™ÂãïÂåñ„Åï„Çå„ÄÅ‰∫∫Èñì„ÅØ„Çà„ÇäÂâµÈÄ†ÁöÑ„Å™‰ªï‰∫ã„Å´ÈõÜ‰∏≠„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åó„Åü„ÄÇ

### 2. Êñ∞„Åó„ÅÑËÅ∑Á®Æ„ÅÆË™ïÁîü

- AI„Éó„É≠„É≥„Éó„Éà„Ç®„É≥„Ç∏„Éã„Ç¢
- AIÂÄ´ÁêÜ„Ç≥„É≥„Çµ„É´„Çø„É≥„Éà
- ‰∫∫Èñì-AIÂçîÂÉç„Ç≥„Éº„Éá„Ç£„Éç„Éº„Çø„Éº

### 3. ÂøÖË¶Å„Å™„Çπ„Ç≠„É´„ÅÆÂ§âÂåñ

„Åì„Çå„Åã„Çâ„ÅÆÊôÇ‰ª£„Å´Ê±Ç„ÇÅ„Çâ„Çå„Çã„ÅÆ„ÅØ„ÄÅAI„Çí‰Ωø„ÅÑ„Åì„Å™„ÅôÂäõ„Å®„ÄÅAI„Å´„ÅØ„Åß„Åç„Å™„ÅÑ‰∫∫Èñì„Çâ„Åó„ÅÑÂâµÈÄ†ÊÄß„Åß„Åô„ÄÇ

## „Åæ„Å®„ÇÅ

AI„Å®ÂÖ±Áîü„Åô„ÇãÊñ∞„Åó„ÅÑÂÉç„ÅçÊñπ„Çí„ÄÅÁßÅ„Åü„Å°‰∏Ä‰∫∫„Å≤„Å®„Çä„ÅåÊ®°Á¥¢„Åó„Å¶„ÅÑ„ÅèÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ`;
            
            updateCounters();
        }

        // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
        document.getElementById('articleInput').addEventListener('input', updateCounters);

        // ÂàùÊúüÂåñ
        updateCounters();
    </script>
</body>
</html>