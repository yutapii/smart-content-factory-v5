<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨˜äº‹ç”Ÿæˆ V2 - æ—¥åˆŠAIã‚†ãŸã•ã‚“æ–°è | SCF V5</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #ff6b6b 0%, #ffd93d 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
            font-size: 2em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .template-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .template-card {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .template-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border-color: #ff6b6b;
        }

        .template-card.active {
            background: linear-gradient(135deg, rgba(255,107,107,0.1), rgba(255,217,61,0.1));
            border-color: #ff6b6b;
        }

        .template-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .template-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .template-desc {
            font-size: 0.85em;
            color: #666;
        }

        .input-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .input-panel {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
        }

        .panel-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .source-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            background: white;
        }

        .source-item {
            padding: 8px;
            margin-bottom: 5px;
            background: #f8f9fa;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .source-item:hover {
            background: #e9ecef;
        }

        .source-item.selected {
            background: #ff6b6b;
            color: white;
        }

        .source-checkbox {
            width: 18px;
            height: 18px;
        }

        .field-group {
            margin-bottom: 15px;
        }

        .field-label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
            font-size: 0.9em;
        }

        .field-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .field-textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            resize: vertical;
        }

        .quick-insert {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }

        .insert-chip {
            background: #e0e0e0;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .insert-chip:hover {
            background: #ff6b6b;
            color: white;
        }

        .preview-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .preview-title {
            font-weight: bold;
            color: #333;
        }

        .preview-controls {
            display: flex;
            gap: 10px;
        }

        .preview-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .btn-preview {
            background: #4caf50;
            color: white;
        }

        .btn-copy {
            background: #2196f3;
            color: white;
        }

        .btn-export {
            background: #ff9800;
            color: white;
        }

        .preview-content {
            background: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 20px;
            min-height: 400px;
            font-family: 'Noto Serif JP', serif;
            line-height: 1.8;
        }

        .article-header {
            border-bottom: 3px solid #ff6b6b;
            padding-bottom: 20px;
            margin-bottom: 20px;
        }

        .article-title {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .article-meta {
            display: flex;
            gap: 20px;
            color: #666;
            font-size: 0.9em;
        }

        .article-body {
            font-size: 1.1em;
            color: #333;
        }

        .article-body h2 {
            font-size: 1.5em;
            margin: 30px 0 15px;
            color: #ff6b6b;
            border-left: 5px solid #ff6b6b;
            padding-left: 10px;
        }

        .article-body h3 {
            font-size: 1.3em;
            margin: 20px 0 10px;
            color: #333;
        }

        .article-body p {
            margin-bottom: 15px;
        }

        .article-body ul, .article-body ol {
            margin: 15px 0;
            padding-left: 30px;
        }

        .article-body li {
            margin-bottom: 8px;
        }

        .article-body blockquote {
            background: #f8f9fa;
            border-left: 5px solid #ff6b6b;
            padding: 15px;
            margin: 20px 0;
            font-style: italic;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
        }

        .action-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .btn-generate {
            background: linear-gradient(135deg, #ff6b6b, #ffd93d);
            color: white;
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,107,107,0.4);
        }

        .btn-save {
            background: #4caf50;
            color: white;
        }

        .btn-clear {
            background: #6c757d;
            color: white;
        }

        .history-section {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .history-title {
            font-weight: bold;
            color: #333;
        }

        .history-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 10px;
        }

        .history-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .history-item:hover {
            background: #fff3e0;
            border-color: #ff6b6b;
        }

        .history-item-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .history-item-date {
            font-size: 0.8em;
            color: #666;
        }

        @media (max-width: 968px) {
            .input-section {
                grid-template-columns: 1fr;
            }
            
            .template-selector {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“° æ—¥åˆŠAIã‚†ãŸã•ã‚“æ–°è - è¨˜äº‹ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ  V2</h1>

        <div class="template-selector">
            <div class="template-card active" data-template="daily-news">
                <div class="template-icon">ğŸ“…</div>
                <div class="template-name">æ—¥åˆŠãƒ‹ãƒ¥ãƒ¼ã‚¹</div>
                <div class="template-desc">ä»Šæ—¥ã®AIæ¥­ç•Œå‹•å‘</div>
            </div>
            <div class="template-card" data-template="deep-dive">
                <div class="template-icon">ğŸ”</div>
                <div class="template-name">æ·±æ˜ã‚Šè§£èª¬</div>
                <div class="template-desc">æŠ€è¡“è©³ç´°åˆ†æ</div>
            </div>
            <div class="template-card" data-template="tutorial">
                <div class="template-icon">ğŸ“š</div>
                <div class="template-name">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</div>
                <div class="template-desc">å®Ÿè·µã‚¬ã‚¤ãƒ‰</div>
            </div>
            <div class="template-card" data-template="opinion">
                <div class="template-icon">ğŸ’­</div>
                <div class="template-name">ã‚ªãƒ”ãƒ‹ã‚ªãƒ³</div>
                <div class="template-desc">è€ƒå¯Ÿãƒ»æ„è¦‹</div>
            </div>
            <div class="template-card" data-template="interview">
                <div class="template-icon">ğŸ¤</div>
                <div class="template-name">ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼</div>
                <div class="template-desc">å¯¾è«‡å½¢å¼</div>
            </div>
            <div class="template-card" data-template="roundup">
                <div class="template-icon">ğŸ“Š</div>
                <div class="template-name">é€±é–“ã¾ã¨ã‚</div>
                <div class="template-desc">ä»Šé€±ã®æŒ¯ã‚Šè¿”ã‚Š</div>
            </div>
        </div>

        <div class="input-section">
            <div class="input-panel">
                <div class="panel-title">ğŸ“ è¨˜äº‹æƒ…å ±å…¥åŠ›</div>
                
                <div class="field-group">
                    <label class="field-label">è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«</label>
                    <input type="text" class="field-input" id="articleTitle" placeholder="ä¾‹: GPT-5.0ãŒã¤ã„ã«ãƒªãƒªãƒ¼ã‚¹ï¼ãã®å®ŸåŠ›ã¨èª²é¡Œã‚’å¾¹åº•è§£èª¬">
                </div>

                <div class="field-group">
                    <label class="field-label">ãƒªãƒ¼ãƒ‰æ–‡ï¼ˆå°å…¥ï¼‰</label>
                    <textarea class="field-textarea" id="articleLead" placeholder="èª­è€…ã‚’å¼•ãè¾¼ã‚€å°å…¥æ–‡ã‚’å…¥åŠ›..."></textarea>
                </div>

                <div class="field-group">
                    <label class="field-label">ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</label>
                    <textarea class="field-textarea" id="articleMain" style="min-height: 200px;" placeholder="è¨˜äº‹ã®æœ¬æ–‡ã‚’å…¥åŠ›..."></textarea>
                </div>

                <div class="field-group">
                    <label class="field-label">çµè«–ãƒ»ã¾ã¨ã‚</label>
                    <textarea class="field-textarea" id="articleConclusion" placeholder="è¨˜äº‹ã®ç· ã‚ããã‚Š..."></textarea>
                </div>

                <div class="quick-insert">
                    <div class="insert-chip" onclick="insertText('## ')">è¦‹å‡ºã—</div>
                    <div class="insert-chip" onclick="insertText('**å¼·èª¿**')">å¼·èª¿</div>
                    <div class="insert-chip" onclick="insertText('> å¼•ç”¨')">å¼•ç”¨</div>
                    <div class="insert-chip" onclick="insertText('- ')">ç®‡æ¡æ›¸ã</div>
                    <div class="insert-chip" onclick="insertText('[ãƒªãƒ³ã‚¯](URL)')">ãƒªãƒ³ã‚¯</div>
                    <div class="insert-chip" onclick="insertText('```code```')">ã‚³ãƒ¼ãƒ‰</div>
                </div>
            </div>

            <div class="input-panel">
                <div class="panel-title">ğŸ“° RSSè¨˜äº‹ã‚½ãƒ¼ã‚¹</div>
                <div class="source-list" id="sourceList">
                    <div class="source-item">
                        <input type="checkbox" class="source-checkbox">
                        <span>TechCrunch - GPT-5.0ç™ºè¡¨ã®è¡æ’ƒ</span>
                    </div>
                    <div class="source-item">
                        <input type="checkbox" class="source-checkbox">
                        <span>The Verge - AIè¦åˆ¶æ³•æ¡ˆã®æœ€æ–°å‹•å‘</span>
                    </div>
                    <div class="source-item">
                        <input type="checkbox" class="source-checkbox">
                        <span>Wired - é‡å­ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã¨AIã®èåˆ</span>
                    </div>
                    <div class="source-item">
                        <input type="checkbox" class="source-checkbox">
                        <span>MIT Tech Review - æ¬¡ä¸–ä»£AIãƒãƒƒãƒ—</span>
                    </div>
                    <div class="source-item">
                        <input type="checkbox" class="source-checkbox">
                        <span>VentureBeat - AIæŠ•è³‡ãƒˆãƒ¬ãƒ³ãƒ‰2025</span>
                    </div>
                    <div class="source-item">
                        <input type="checkbox" class="source-checkbox">
                        <span>GIGAZINE - æ—¥æœ¬ã®AIé–‹ç™ºæœ€å‰ç·š</span>
                    </div>
                </div>
                
                <div class="field-group" style="margin-top: 15px;">
                    <label class="field-label">ã‚¿ã‚°ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ¼</label>
                    <input type="text" class="field-input" id="articleTags" placeholder="AI, GPT-5, æ©Ÿæ¢°å­¦ç¿’, ãƒ‹ãƒ¥ãƒ¼ã‚¹">
                </div>

                <div class="field-group">
                    <label class="field-label">è‘—è€…å</label>
                    <input type="text" class="field-input" id="articleAuthor" value="AIã‚†ãŸã•ã‚“">
                </div>

                <div class="field-group">
                    <label class="field-label">å…¬é–‹äºˆå®šæ—¥æ™‚</label>
                    <input type="datetime-local" class="field-input" id="publishDate">
                </div>
            </div>
        </div>

        <div class="preview-section">
            <div class="preview-header">
                <span class="preview-title">ğŸ“– ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</span>
                <div class="preview-controls">
                    <button class="preview-btn btn-preview" onclick="updatePreview()">ğŸ”„ æ›´æ–°</button>
                    <button class="preview-btn btn-copy" onclick="copyArticle()">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
                    <button class="preview-btn btn-export" onclick="exportArticle()">ğŸ’¾ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
                </div>
            </div>
            <div class="preview-content" id="previewContent">
                <div class="article-header">
                    <h1 class="article-title">è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</h1>
                    <div class="article-meta">
                        <span>ğŸ“… 2025å¹´8æœˆ11æ—¥</span>
                        <span>âœï¸ AIã‚†ãŸã•ã‚“</span>
                        <span>ğŸ·ï¸ AI, ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼</span>
                    </div>
                </div>
                <div class="article-body">
                    <p>è¨˜äº‹ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚å·¦å´ã®ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›ã™ã‚‹ã¨ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚</p>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <button class="action-btn btn-generate" onclick="generateArticle()">
                ğŸš€ AIæ”¯æ´ã§è¨˜äº‹ç”Ÿæˆ
            </button>
            <button class="action-btn btn-save" onclick="saveArticle()">
                ğŸ’¾ ä¸‹æ›¸ãä¿å­˜
            </button>
            <button class="action-btn btn-clear" onclick="clearAll()">
                ğŸ—‘ï¸ ã‚¯ãƒªã‚¢
            </button>
        </div>

        <div class="history-section">
            <div class="history-header">
                <span class="history-title">ğŸ“š è¨˜äº‹å±¥æ­´</span>
                <button class="preview-btn" onclick="clearHistory()">å±¥æ­´ã‚¯ãƒªã‚¢</button>
            </div>
            <div class="history-list" id="historyList">
                <!-- å±¥æ­´ã‚¢ã‚¤ãƒ†ãƒ ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
            </div>
        </div>
    </div>

    <script>
        let currentTemplate = 'daily-news';
        let articleHistory = [];

        // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠ
        document.querySelectorAll('.template-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.template-card').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                currentTemplate = this.dataset.template;
                loadTemplate(currentTemplate);
            });
        });

        // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆèª­ã¿è¾¼ã¿
        function loadTemplate(template) {
            const templates = {
                'daily-news': {
                    title: 'ã€é€Ÿå ±ã€‘ä»Šæ—¥ã®AIæ¥­ç•Œãƒ‹ãƒ¥ãƒ¼ã‚¹ - ',
                    lead: 'æœ¬æ—¥ã®AIæ¥­ç•Œã§ã¯ã€ä»¥ä¸‹ã®é‡è¦ãªå‹•ããŒã‚ã‚Šã¾ã—ãŸã€‚',
                    main: '## ä¸»è¦ãƒ‹ãƒ¥ãƒ¼ã‚¹\n\n### 1. \n\n### 2. \n\n### 3. \n\n## è©³ç´°è§£èª¬\n\n## æ¥­ç•Œã¸ã®å½±éŸ¿\n\n## ä»Šå¾Œã®å±•æœ›',
                    conclusion: 'æœ¬æ—¥ãŠä¼ãˆã—ãŸãƒ‹ãƒ¥ãƒ¼ã‚¹ã¯ã€AIæ¥­ç•Œã®ç™ºå±•ã«ãŠã„ã¦é‡è¦ãªè»¢æ›ç‚¹ã¨ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ˜æ—¥ã‚‚æœ€æ–°æƒ…å ±ã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚'
                },
                'deep-dive': {
                    title: 'ã€å¾¹åº•è§£èª¬ã€‘',
                    lead: 'ä»Šå›ã¯ã€è©±é¡Œã®æŠ€è¡“ã«ã¤ã„ã¦è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚',
                    main: '## èƒŒæ™¯\n\n## æŠ€è¡“çš„è©³ç´°\n\n### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£\n\n### å®Ÿè£…æ–¹æ³•\n\n## å®Ÿç”¨ä¾‹\n\n## ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ\n\n### ãƒ¡ãƒªãƒƒãƒˆ\n- \n\n### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ\n- ',
                    conclusion: 'ã“ã®æŠ€è¡“ã¯ä»Šå¾Œã®AIé–‹ç™ºã«ãŠã„ã¦é‡è¦ãªå½¹å‰²ã‚’æœãŸã™ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¾ã™ã€‚'
                },
                'tutorial': {
                    title: 'ã€å®Ÿè·µã‚¬ã‚¤ãƒ‰ã€‘ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã§å­¦ã¶',
                    lead: 'åˆå¿ƒè€…ã§ã‚‚ç°¡å˜ã«å§‹ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã€é †ã‚’è¿½ã£ã¦è§£èª¬ã—ã¾ã™ã€‚',
                    main: '## æº–å‚™ã™ã‚‹ã‚‚ã®\n- \n\n## ã‚¹ãƒ†ãƒƒãƒ—1: ç’°å¢ƒæ§‹ç¯‰\n\n## ã‚¹ãƒ†ãƒƒãƒ—2: åŸºæœ¬è¨­å®š\n\n## ã‚¹ãƒ†ãƒƒãƒ—3: å®Ÿè£…\n\n```python\n# ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰\n```\n\n## ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ†ã‚¹ãƒˆ\n\n## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°',
                    conclusion: 'ã“ã‚Œã§åŸºæœ¬çš„ãªå®Ÿè£…ã¯å®Œäº†ã§ã™ã€‚ã•ã‚‰ã«è©³ã—ãå­¦ã³ãŸã„æ–¹ã¯ã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚å‚ç…§ã—ã¦ãã ã•ã„ã€‚'
                },
                'opinion': {
                    title: 'ã€è€ƒå¯Ÿã€‘',
                    lead: 'æœ€è¿‘ã®å‹•å‘ã‚’è¸ã¾ãˆã¦ã€å€‹äººçš„ãªè¦‹è§£ã‚’è¿°ã¹ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚',
                    main: '## ç¾çŠ¶åˆ†æ\n\n## å•é¡Œæèµ·\n\n## ç§ã®è€ƒãˆ\n\n### è³›æˆã®ç«‹å ´ã‹ã‚‰\n\n### åå¯¾ã®ç«‹å ´ã‹ã‚‰\n\n## ä»£æ›¿æ¡ˆã®æç¤º\n\n## å°†æ¥äºˆæ¸¬',
                    conclusion: 'ã“ã‚Œã¯ã‚ãã¾ã§ä¸€ã¤ã®è¦‹æ–¹ã§ã™ã€‚çš†æ§˜ã®ã”æ„è¦‹ã‚‚ãœã²ãŠèã‹ã›ãã ã•ã„ã€‚'
                },
                'interview': {
                    title: 'ã€ç‹¬å ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã€‘',
                    lead: 'ä»Šå›ã¯ç‰¹åˆ¥ã«ã€æ¥­ç•Œã®ã‚­ãƒ¼ãƒ‘ãƒ¼ã‚½ãƒ³ã«ãŠè©±ã‚’ä¼ºã„ã¾ã—ãŸã€‚',
                    main: '## ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«\n\n## ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼\n\n**Q: æœ€åˆã®è³ªå•**\nA: \n\n**Q: æ¬¡ã®è³ªå•**\nA: \n\n**Q: ä»Šå¾Œã®å±•æœ›ã«ã¤ã„ã¦**\nA: \n\n## ç·¨é›†å¾Œè¨˜',
                    conclusion: 'è²´é‡ãªãŠè©±ã‚’ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚'
                },
                'roundup': {
                    title: 'ã€é€±é–“ã¾ã¨ã‚ã€‘ä»Šé€±ã®AIæ¥­ç•Œãƒˆãƒƒãƒ—ãƒ‹ãƒ¥ãƒ¼ã‚¹',
                    lead: 'ä»Šé€±ã‚‚æ§˜ã€…ãªå‹•ããŒã‚ã‚Šã¾ã—ãŸã€‚é‡è¦ãªãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’æŒ¯ã‚Šè¿”ã‚Šã¾ã™ã€‚',
                    main: '## æœˆæ›œæ—¥\n\n## ç«æ›œæ—¥\n\n## æ°´æ›œæ—¥\n\n## æœ¨æ›œæ—¥\n\n## é‡‘æ›œæ—¥\n\n## ä»Šé€±ã®ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ\n\n## æ¥é€±ã®æ³¨ç›®ãƒã‚¤ãƒ³ãƒˆ',
                    conclusion: 'æ¥é€±ã‚‚å¼•ãç¶šãã€æœ€æ–°æƒ…å ±ã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚'
                }
            };

            const t = templates[template];
            document.getElementById('articleTitle').value = t.title;
            document.getElementById('articleLead').value = t.lead;
            document.getElementById('articleMain').value = t.main;
            document.getElementById('articleConclusion').value = t.conclusion;
            updatePreview();
        }

        // ãƒ†ã‚­ã‚¹ãƒˆæŒ¿å…¥
        function insertText(text) {
            const textarea = document.getElementById('articleMain');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const value = textarea.value;
            
            textarea.value = value.substring(0, start) + text + value.substring(end);
            textarea.focus();
            textarea.selectionStart = textarea.selectionEnd = start + text.length;
        }

        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°
        function updatePreview() {
            const title = document.getElementById('articleTitle').value || 'è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«';
            const lead = document.getElementById('articleLead').value;
            const main = document.getElementById('articleMain').value;
            const conclusion = document.getElementById('articleConclusion').value;
            const author = document.getElementById('articleAuthor').value || 'AIã‚†ãŸã•ã‚“';
            const tags = document.getElementById('articleTags').value || 'AI, ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼';
            const date = document.getElementById('publishDate').value 
                ? new Date(document.getElementById('publishDate').value).toLocaleDateString('ja-JP')
                : new Date().toLocaleDateString('ja-JP');

            let content = `
                <div class="article-header">
                    <h1 class="article-title">${title}</h1>
                    <div class="article-meta">
                        <span>ğŸ“… ${date}</span>
                        <span>âœï¸ ${author}</span>
                        <span>ğŸ·ï¸ ${tags}</span>
                    </div>
                </div>
                <div class="article-body">
            `;

            if (lead) {
                content += `<p><strong>${lead}</strong></p>`;
            }

            if (main) {
                // Markdowné¢¨ã®å¤‰æ›
                let processedMain = main
                    .replace(/## (.*)/g, '<h2>$1</h2>')
                    .replace(/### (.*)/g, '<h3>$1</h3>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/> (.*)/g, '<blockquote>$1</blockquote>')
                    .replace(/- (.*)/g, '<li>$1</li>')
                    .replace(/```(.*?)```/gs, '<pre><code>$1</code></pre>')
                    .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>')
                    .replace(/\n\n/g, '</p><p>')
                    .replace(/\n/g, '<br>');
                
                content += `<p>${processedMain}</p>`;
            }

            if (conclusion) {
                content += `<hr style="margin: 30px 0;"><p><em>${conclusion}</em></p>`;
            }

            content += '</div>';

            document.getElementById('previewContent').innerHTML = content;
        }

        // AIæ”¯æ´ã§è¨˜äº‹ç”Ÿæˆ
        async function generateArticle() {
            const apiKey = localStorage.getItem('openai-api-key');
            if (!apiKey) {
                alert('OpenAI APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚è¨­å®šç”»é¢ã§APIã‚­ãƒ¼ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚');
                return;
            }

            // é¸æŠã•ã‚ŒãŸRSSã‚½ãƒ¼ã‚¹ã‚’å–å¾—
            const selectedSources = [];
            document.querySelectorAll('.source-item input:checked').forEach(checkbox => {
                selectedSources.push(checkbox.nextElementSibling.textContent);
            });

            if (selectedSources.length === 0) {
                alert('è¨˜äº‹ã‚½ãƒ¼ã‚¹ã‚’é¸æŠã—ã¦ãã ã•ã„');
                return;
            }

            alert(`é¸æŠã•ã‚ŒãŸã‚½ãƒ¼ã‚¹:\n${selectedSources.join('\n')}\n\nã“ã‚Œã‚‰ã®æƒ…å ±ã‚’åŸºã«è¨˜äº‹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚`);
            
            // ãƒ‡ãƒ¢ç”¨ã®è‡ªå‹•å…¥åŠ›
            const title = document.getElementById('articleTitle').value;
            if (!title || title.includes('ã€')) {
                document.getElementById('articleTitle').value = 'GPT-5.0ãƒªãƒªãƒ¼ã‚¹ï¼ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã¯å„ªç§€ã ãŒå¯¾è©±ã¯å†·ãŸã„ã¨è©±é¡Œã«';
            }
            
            document.getElementById('articleLead').value = 'å¾…æœ›ã®GPT-5.0ãŒã¤ã„ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚ã‚³ãƒ¼ãƒ‰ç”Ÿæˆèƒ½åŠ›ã¯é£›èºçš„ã«å‘ä¸Šã—ãŸä¸€æ–¹ã§ã€ã€ŒãŠå‹é”AIã€ã¨ã—ã¦ã®æ¸©ã‹ã¿ãŒå¤±ã‚ã‚ŒãŸã¨ã„ã†å£°ã‚‚ä¸ŠãŒã£ã¦ã„ã¾ã™ã€‚';
            
            document.getElementById('articleMain').value = `## GPT-5.0ã®ä¸»ãªç‰¹å¾´

### å¼·åŒ–ã•ã‚ŒãŸèƒ½åŠ›
- **ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ**: è¤‡é›‘ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚‚ä¸€ç™ºã§å®Ÿè£…
- **æ•°å­¦çš„æ¨è«–**: å¤§å­¦é™¢ãƒ¬ãƒ™ãƒ«ã®å•é¡Œã‚‚è§£ç­”å¯èƒ½
- **ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«**: ç”»åƒãƒ»éŸ³å£°ãƒ»å‹•ç”»ã®ç†è§£ãŒå‘ä¸Š

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå¿œ

Twitterã§ã¯æ§˜ã€…ãªåå¿œãŒè¦‹ã‚‰ã‚Œã¾ã™ï¼š

> ã€Œã‚³ãƒ¼ãƒ‰æ›¸ã‹ã›ãŸã‚‰ç¥ãƒ¬ãƒ™ãƒ«ã€‚ã§ã‚‚é›‘è«‡ã¯å‘³æ°—ãªã„ã€
> ã€Œä»•äº‹ã«ã¯æœ€é«˜ã ã‘ã©ã€å‹é”ã«ã¯ãªã‚Œãªã„æ„Ÿã˜ã€

### æŠ€è¡“çš„ãªå¤‰æ›´ç‚¹

ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å¤§å¹…ãªè¦‹ç›´ã—ã«ã‚ˆã‚Šã€ã‚¿ã‚¹ã‚¯ç‰¹åŒ–å‹ã®æ€§èƒ½ãŒå‘ä¸Šã—ã¾ã—ãŸã€‚

## ä»Šå¾Œã®å±•æœ›

OpenAIã¯ä»Šå¾Œã€ç”¨é€”åˆ¥ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ã‚’æä¾›ã—ã¦ã„ãæ–¹é‡ã¨ã®ã“ã¨ã§ã™ã€‚`;
            
            document.getElementById('articleConclusion').value = 'GPT-5.0ã¯ç¢ºå®Ÿã«é€²åŒ–ã—ã¦ã„ã¾ã™ãŒã€ä¸‡èƒ½ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ç”¨é€”ã«å¿œã˜ã¦é©åˆ‡ãªAIã‚’é¸æŠã™ã‚‹ã“ã¨ãŒé‡è¦ã«ãªã£ã¦ãã¦ã„ã¾ã™ã€‚';
            
            updatePreview();
        }

        // è¨˜äº‹ã‚³ãƒ”ãƒ¼
        function copyArticle() {
            const content = document.getElementById('previewContent').innerText;
            navigator.clipboard.writeText(content).then(() => {
                alert('è¨˜äº‹ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
            });
        }

        // è¨˜äº‹ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
        function exportArticle() {
            const title = document.getElementById('articleTitle').value || 'ç„¡é¡Œ';
            const content = document.getElementById('previewContent').innerHTML;
            
            const html = `
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>${title}</title>
    <style>
        body { font-family: 'Noto Serif JP', serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .article-header { border-bottom: 3px solid #ff6b6b; padding-bottom: 20px; margin-bottom: 20px; }
        .article-title { font-size: 2em; font-weight: bold; }
        .article-meta { color: #666; font-size: 0.9em; }
        .article-body { line-height: 1.8; }
        h2 { color: #ff6b6b; border-left: 5px solid #ff6b6b; padding-left: 10px; }
        blockquote { background: #f8f9fa; border-left: 5px solid #ff6b6b; padding: 15px; }
    </style>
</head>
<body>
    ${content}
</body>
</html>`;
            
            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${title}.html`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // è¨˜äº‹ä¿å­˜
        function saveArticle() {
            const article = {
                title: document.getElementById('articleTitle').value,
                lead: document.getElementById('articleLead').value,
                main: document.getElementById('articleMain').value,
                conclusion: document.getElementById('articleConclusion').value,
                author: document.getElementById('articleAuthor').value,
                tags: document.getElementById('articleTags').value,
                template: currentTemplate,
                timestamp: new Date().toISOString()
            };
            
            articleHistory.unshift(article);
            articleHistory = articleHistory.slice(0, 20); // æœ€æ–°20ä»¶ã®ã¿
            
            localStorage.setItem('article-history', JSON.stringify(articleHistory));
            updateHistoryDisplay();
            
            alert('è¨˜äº‹ã‚’ä¸‹æ›¸ãä¿å­˜ã—ã¾ã—ãŸï¼');
        }

        // å±¥æ­´è¡¨ç¤ºæ›´æ–°
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            
            if (articleHistory.length === 0) {
                historyList.innerHTML = '<div style="text-align: center; color: #999;">å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                return;
            }
            
            historyList.innerHTML = articleHistory.map((article, index) => `
                <div class="history-item" onclick="loadFromHistory(${index})">
                    <div class="history-item-title">${article.title || 'ç„¡é¡Œ'}</div>
                    <div class="history-item-date">${new Date(article.timestamp).toLocaleString('ja-JP')}</div>
                </div>
            `).join('');
        }

        // å±¥æ­´ã‹ã‚‰èª­ã¿è¾¼ã¿
        function loadFromHistory(index) {
            const article = articleHistory[index];
            document.getElementById('articleTitle').value = article.title || '';
            document.getElementById('articleLead').value = article.lead || '';
            document.getElementById('articleMain').value = article.main || '';
            document.getElementById('articleConclusion').value = article.conclusion || '';
            document.getElementById('articleAuthor').value = article.author || '';
            document.getElementById('articleTags').value = article.tags || '';
            
            // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåˆ‡ã‚Šæ›¿ãˆ
            if (article.template) {
                document.querySelectorAll('.template-card').forEach(card => {
                    card.classList.remove('active');
                    if (card.dataset.template === article.template) {
                        card.classList.add('active');
                    }
                });
                currentTemplate = article.template;
            }
            
            updatePreview();
        }

        // ã‚¯ãƒªã‚¢
        function clearAll() {
            if (confirm('ã™ã¹ã¦ã®å…¥åŠ›å†…å®¹ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ')) {
                document.getElementById('articleTitle').value = '';
                document.getElementById('articleLead').value = '';
                document.getElementById('articleMain').value = '';
                document.getElementById('articleConclusion').value = '';
                document.getElementById('articleTags').value = '';
                updatePreview();
            }
        }

        // å±¥æ­´ã‚¯ãƒªã‚¢
        function clearHistory() {
            if (confirm('å±¥æ­´ã‚’ã™ã¹ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                articleHistory = [];
                localStorage.removeItem('article-history');
                updateHistoryDisplay();
            }
        }

        // åˆæœŸåŒ–
        window.addEventListener('load', () => {
            // å±¥æ­´èª­ã¿è¾¼ã¿
            const saved = localStorage.getItem('article-history');
            if (saved) {
                articleHistory = JSON.parse(saved);
                updateHistoryDisplay();
            }
            
            // æ—¥ä»˜åˆæœŸå€¤
            const now = new Date();
            document.getElementById('publishDate').value = now.toISOString().slice(0, 16);
            
            // åˆæœŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆèª­ã¿è¾¼ã¿
            loadTemplate('daily-news');
            
            // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
            ['articleTitle', 'articleLead', 'articleMain', 'articleConclusion', 'articleAuthor', 'articleTags'].forEach(id => {
                document.getElementById(id).addEventListener('input', updatePreview);
            });
        });

        // RSSã‚½ãƒ¼ã‚¹é¸æŠã‚¤ãƒ™ãƒ³ãƒˆ
        document.querySelectorAll('.source-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                this.closest('.source-item').classList.toggle('selected', this.checked);
            });
        });
    </script>
</body>
</html>