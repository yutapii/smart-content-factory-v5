<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSS → 記事生成 連携ツール</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }
        
        .panel {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
        }
        
        .panel-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        
        .rss-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .rss-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .rss-item.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }
        
        .rss-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }
        
        .rss-description {
            color: #666;
            font-size: 14px;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .rss-meta {
            display: flex;
            gap: 15px;
            font-size: 12px;
            color: #999;
        }
        
        .generation-levels {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .level-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .level-label {
            font-weight: bold;
            width: 100px;
            color: #333;
        }
        
        .level-content {
            flex: 1;
            color: #666;
            font-size: 14px;
        }
        
        .level-a { background: #e3f2fd; }
        .level-minus1 { background: #f3e5f5; }
        .level-minus2 { background: #fce4ec; }
        
        .preview-area {
            background: white;
            border-radius: 8px;
            padding: 15px;
            min-height: 300px;
            font-family: monospace;
            font-size: 13px;
            white-space: pre-wrap;
            border: 1px solid #ddd;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            flex: 1;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .search-box {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 15px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
        }
        
        .status-new { background: #d4edda; color: #155724; }
        .status-updated { background: #cce5ff; color: #004085; }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔄 RSS → 記事生成 連携ツール</h1>
            <p>RSSフィードから記事を選択し、深掘り記事を生成</p>
        </div>
        
        <div class="main-content">
            <!-- 左側：RSS選択 -->
            <div class="panel">
                <div class="panel-title">📡 RSS記事を選択</div>
                <input type="text" class="search-box" placeholder="検索..." id="searchBox">
                
                <div id="rssList">
                    <div class="loading">RSSフィードを読み込み中...</div>
                </div>
            </div>
            
            <!-- 右側：生成設定 -->
            <div class="panel">
                <div class="panel-title">⚙️ 記事生成設定</div>
                
                <div class="generation-levels">
                    <div class="level-item level-a">
                        <div class="level-label">A (最新)</div>
                        <div class="level-content" id="levelA">選択したRSS記事の内容</div>
                    </div>
                    <div class="level-item level-minus1">
                        <div class="level-label">-1世代</div>
                        <div class="level-content">前回の関連記事から発展的な分析を追加</div>
                    </div>
                    <div class="level-item level-minus2">
                        <div class="level-label">-2世代</div>
                        <div class="level-content">基礎となる背景情報から現在への変化を解説</div>
                    </div>
                </div>
                
                <div class="panel-title" style="margin-top: 20px;">📝 生成プレビュー</div>
                <div class="preview-area" id="preview">
【タイトル】
（RSS記事のタイトル）

【RSS記事（A）】
内容: （選択した記事の要約）
出典URL: （記事のURL）

【深掘り設定】
-1世代: 前回の分析を発展
-2世代: 基礎から現在への流れ

※AI生成時に自動的に深掘りされます
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="copyToClipboard()">📋 コピー</button>
                    <button class="btn btn-primary" onclick="openArticleGenerator()">✍️ 記事生成へ</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // サンプルRSSデータ（実際はRSSリーダーから取得）
        const sampleRSSItems = [
            {
                title: "OpenAI、新しいAIモデル「GPT-5」を発表",
                description: "OpenAIは本日、次世代の大規模言語モデル「GPT-5」を発表しました。従来モデルと比較して推論能力が大幅に向上...",
                url: "https://example.com/openai-gpt5",
                date: "2024-03-15",
                source: "TechCrunch"
            },
            {
                title: "Tesla、完全自動運転の商用展開を開始",
                description: "Teslaは米国の主要都市で完全自動運転タクシーサービスの商用展開を開始すると発表...",
                url: "https://example.com/tesla-fsd",
                date: "2024-03-14",
                source: "Reuters"
            },
            {
                title: "量子コンピュータ、実用化への大きな一歩",
                description: "IBMが1000量子ビットプロセッサの開発に成功。実用的な問題解決への応用が現実的に...",
                url: "https://example.com/quantum-computing",
                date: "2024-03-13",
                source: "MIT Technology Review"
            }
        ];
        
        let selectedItem = null;
        
        // RSS記事リストを表示
        function displayRSSItems() {
            const listContainer = document.getElementById('rssList');
            listContainer.innerHTML = '';
            
            sampleRSSItems.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'rss-item';
                itemElement.innerHTML = `
                    <div class="rss-title">${item.title}</div>
                    <div class="rss-description">${item.description}</div>
                    <div class="rss-meta">
                        <span>📅 ${item.date}</span>
                        <span>📰 ${item.source}</span>
                        <span class="status-badge status-new">NEW</span>
                    </div>
                `;
                itemElement.onclick = () => selectItem(item, itemElement);
                listContainer.appendChild(itemElement);
            });
        }
        
        // 記事を選択
        function selectItem(item, element) {
            // 選択状態をクリア
            document.querySelectorAll('.rss-item').forEach(el => {
                el.classList.remove('selected');
            });
            
            // 新しい選択
            element.classList.add('selected');
            selectedItem = item;
            
            // プレビュー更新
            updatePreview();
            
            // レベルA更新
            document.getElementById('levelA').textContent = item.title;
        }
        
        // プレビュー更新
        function updatePreview() {
            if (!selectedItem) return;
            
            const preview = document.getElementById('preview');
            preview.textContent = `【タイトル】
${selectedItem.title}

【RSS記事（A）】
${selectedItem.description}

出典URL: ${selectedItem.url}
ソース: ${selectedItem.source}
日付: ${selectedItem.date}

【深掘り設定】
-1世代: このトピックの前回の分析から発展
-2世代: 基礎概念から現在までの変遷を解説

※このデータを記事生成画面に自動入力します`;
        }
        
        // クリップボードにコピー
        function copyToClipboard() {
            if (!selectedItem) {
                alert('RSS記事を選択してください');
                return;
            }
            
            const text = document.getElementById('preview').textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('クリップボードにコピーしました');
            });
        }
        
        // 記事生成画面を開く
        function openArticleGenerator() {
            if (!selectedItem) {
                alert('RSS記事を選択してください');
                return;
            }
            
            // LocalStorageに選択データを保存
            localStorage.setItem('rss-to-article', JSON.stringify({
                title: selectedItem.title,
                body: `【RSS記事（A：最新情報）】\n${selectedItem.description}\n\n出典URL: ${selectedItem.url}\nソース: ${selectedItem.source}\n日付: ${selectedItem.date}`,
                url: selectedItem.url
            }));
            
            // 記事生成画面を開く
            window.open('../article/index.html', '_blank');
        }
        
        // 検索機能
        document.getElementById('searchBox').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            document.querySelectorAll('.rss-item').forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(searchTerm) ? 'block' : 'none';
            });
        });
        
        // 初期化
        displayRSSItems();
    </script>
</body>
</html>