<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[07] üîÆ Áîü„Åç„ÅüAI„Éà„É¨„É≥„Éâ„Éû„ÉÉ„Éó - „É™„Ç¢„É´„Çø„Ç§„É†Ëß£Êûê</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        h1 {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 24px;
        }
        
        .back-btn {
            background: white;
            color: #667eea;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.2);
        }
        
        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        .container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
        }
        
        /* Áµ±Ë®à„Éê„Éº */
        .stats-bar {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .stat-item {
            text-align: center;
            padding: 10px;
            border-left: 3px solid #667eea;
            background: linear-gradient(to right, rgba(102, 126, 234, 0.05), transparent);
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        /* „Ç≥„É≥„Éà„É≠„Éº„É´„Éë„Éç„É´ */
        .controls {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .control-row {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* „Éà„É¨„É≥„Éâ„Éû„ÉÉ„Éó„Ç®„É™„Ç¢ */
        .trend-map {
            background: white;
            border-radius: 15px;
            padding: 30px;
            min-height: 500px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        /* „ÉØ„Éº„Éâ„ÇØ„É©„Ç¶„Éâ */
        .word-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            justify-content: center;
            padding: 20px;
            min-height: 400px;
        }
        
        .trend-word {
            padding: 8px 16px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            white-space: nowrap;
        }
        
        /* „Éà„É¨„É≥„Éâ„Çµ„Ç§„Ç∫ */
        .trend-huge {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(135deg, #ff6b6b, #ffd93d);
            color: white;
        }
        
        .trend-large {
            font-size: 2em;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .trend-medium {
            font-size: 1.5em;
            background: linear-gradient(135deg, #4ecdc4, #44a3aa);
            color: white;
        }
        
        .trend-small {
            font-size: 1.2em;
            background: #f0f0f0;
            color: #666;
        }
        
        .trend-tiny {
            font-size: 0.9em;
            background: #f8f8f8;
            color: #999;
        }
        
        .trend-word:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 10;
        }
        
        /* „Éà„É¨„É≥„Éâ„Çπ„ÉÜ„Éº„Çø„Çπ */
        .trend-status {
            position: absolute;
            top: -5px;
            right: -5px;
            font-size: 0.8em;
            padding: 2px 6px;
            border-radius: 10px;
        }
        
        .status-hot {
            background: #ff6b6b;
            color: white;
        }
        
        .status-rising {
            background: #ffd93d;
            color: #333;
        }
        
        .status-new {
            background: #4ecdc4;
            color: white;
        }
        
        /* „Éï„Ç£„É´„Çø„ÉºÊ∏à„ÅøË®ò‰∫ã„É™„Çπ„Éà */
        .filtered-articles {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: none;
        }
        
        .filtered-articles.active {
            display: block;
        }
        
        .article-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            transition: all 0.3s;
        }
        
        .article-item:hover {
            background: #f8f9fa;
            padding-left: 25px;
        }
        
        .article-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .article-meta {
            font-size: 0.9em;
            color: #999;
        }
        
        /* ÊôÇÁ≥ªÂàó„Ç∞„É©„Éï */
        .timeline-chart {
            height: 200px;
            background: linear-gradient(to top, rgba(102, 126, 234, 0.1), transparent);
            border-radius: 10px;
            margin: 20px 0;
            padding: 20px;
            position: relative;
        }
        
        /* „É≠„Éº„Éá„Ç£„É≥„Ç∞ */
        .loading {
            text-align: center;
            padding: 50px;
            color: #999;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid #f0f0f0;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
        @media (max-width: 768px) {
            .control-row {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .word-cloud {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>[07] üîÆ Áîü„Åç„ÅüAI„Éà„É¨„É≥„Éâ„Éû„ÉÉ„Éó</h1>
            <div style="display: flex; gap: 10px;">
                <a href="../06_database/index.html" class="back-btn">‚Üê [06] „Éá„Éº„Çø„Éô„Éº„Çπ</a>
                <a href="../08_content-filter/index.html" class="back-btn">‚Üí [08] „Éï„Ç£„É´„Çø„Éº</a>
                <a href="../index.html" class="back-btn">üè† „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</a>
            </div>
        </div>
    </div>
    
    <div class="container">
        <!-- Áµ±Ë®à„Éê„Éº -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-value" id="totalArticles">0</div>
                <div class="stat-label">ÂàÜÊûêË®ò‰∫ãÊï∞</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalTrends">0</div>
                <div class="stat-label">Ê§úÂá∫„Éà„É¨„É≥„Éâ</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="hotTrends">0</div>
                <div class="stat-label">üî• ÊÄ•‰∏äÊòá</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="newTrends">0</div>
                <div class="stat-label">üÜï Êñ∞Ë¶è„Éà„É¨„É≥„Éâ</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="updateTime">--:--</div>
                <div class="stat-label">ÊúÄÁµÇÊõ¥Êñ∞</div>
            </div>
        </div>
        
        <!-- „Ç≥„É≥„Éà„É≠„Éº„É´„Éë„Éç„É´ -->
        <div class="controls">
            <div class="control-row">
                <button class="btn btn-primary" onclick="analyzeTrends()">
                    üîÑ „Éà„É¨„É≥„ÉâËß£ÊûêÂÆüË°å
                </button>
                <button class="btn btn-secondary" onclick="changeTimeRange('today')">
                    ‰ªäÊó•
                </button>
                <button class="btn btn-secondary" onclick="changeTimeRange('week')">
                    ‰ªäÈÄ±
                </button>
                <button class="btn btn-secondary" onclick="changeTimeRange('month')">
                    ‰ªäÊúà
                </button>
                <button class="btn btn-secondary" onclick="toggleLanguage()">
                    üåê Ë®ÄË™ûÁµ±Âêà: <span id="langMode">ON</span>
                </button>
                <button class="btn btn-secondary" onclick="showTimeline()">
                    üìä ÊôÇÁ≥ªÂàóË°®Á§∫
                </button>
            </div>
        </div>
        
        <!-- „Éà„É¨„É≥„Éâ„Éû„ÉÉ„Éó -->
        <div class="trend-map">
            <div id="wordCloud" class="word-cloud">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>„Éá„Éº„Çø„Éô„Éº„Çπ„Åã„Çâ„Éà„É¨„É≥„Éâ„ÇíËß£Êûê‰∏≠...</p>
                </div>
            </div>
        </div>
        
        <!-- „Éï„Ç£„É´„Çø„ÉºÊ∏à„ÅøË®ò‰∫ã„É™„Çπ„Éà -->
        <div id="filteredArticles" class="filtered-articles">
            <h3 style="margin-bottom: 20px; color: #667eea;">ÈÅ∏Êäû„Éà„É¨„É≥„Éâ„ÅÆË®ò‰∫ã</h3>
            <div id="articlesList"></div>
        </div>
    </div>
    
    <script>
        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞
        let allArticles = [];
        let currentTrends = [];
        let selectedTrend = null;
        let timeRange = 'week';
        let languageIntegration = true;
        
        // ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            loadArticlesFromDatabase();
        });
        
        // 06_database„Åã„ÇâË®ò‰∫ã„ÇíË™≠„ÅøËæº„Åø
        function loadArticlesFromDatabase() {
            try {
                const storedData = localStorage.getItem('06_database_articles');
                if (storedData) {
                    const data = JSON.parse(storedData);
                    allArticles = data.articles || [];
                    document.getElementById('totalArticles').textContent = allArticles.length.toLocaleString();
                    
                    // Ëá™Âãï„Åß„Éà„É¨„É≥„ÉâËß£ÊûêÈñãÂßã
                    if (allArticles.length > 0) {
                        analyzeTrends();
                    }
                } else {
                    showEmptyState();
                }
            } catch (error) {
                console.error('„Éá„Éº„ÇøË™≠„ÅøËæº„Åø„Ç®„É©„Éº:', error);
                showEmptyState();
            }
        }
        
        // „Éà„É¨„É≥„ÉâËß£Êûê„É°„Ç§„É≥Èñ¢Êï∞
        function analyzeTrends() {
            if (allArticles.length === 0) {
                showEmptyState();
                return;
            }
            
            // „Éï„Ç£„É´„Çø„É™„É≥„Ç∞: AI/„É≠„Éú„ÉÉ„Éà/Ëá™ÂãïÈÅãËª¢/ÈÄö‰ø°Èñ¢ÈÄ£„ÅÆ„Åø
            const relevantArticles = filterRelevantArticles(allArticles);
            
            // ÊôÇÈñìÁØÑÂõ≤„Åß„Éï„Ç£„É´„Çø
            const filteredArticles = filterByTimeRange(relevantArticles, timeRange);
            
            // „Éà„É¨„É≥„ÉâÊäΩÂá∫
            const trends = extractTrends(filteredArticles);
            
            // „Éà„É¨„É≥„ÉâË°®Á§∫
            displayTrends(trends);
            
            // Áµ±Ë®àÊõ¥Êñ∞
            updateStats(trends);
        }
        
        // Èñ¢ÈÄ£Ë®ò‰∫ã„ÅÆ„Éï„Ç£„É´„Çø„É™„É≥„Ç∞
        function filterRelevantArticles(articles) {
            const relevantKeywords = [
                // AIÈñ¢ÈÄ£
                'ai', 'artificial intelligence', '‰∫∫Â∑•Áü•ËÉΩ', 'machine learning', 'Ê©üÊ¢∞Â≠¶Áøí',
                'deep learning', '„Éá„Ç£„Éº„Éó„É©„Éº„Éã„É≥„Ç∞', 'Ê∑±Â±§Â≠¶Áøí', 'neural', '„Éã„É•„Éº„É©„É´',
                'gpt', 'claude', 'gemini', 'llm', 'Â§ßË¶èÊ®°Ë®ÄË™û„É¢„Éá„É´', 'chatbot', '„ÉÅ„É£„ÉÉ„Éà„Éú„ÉÉ„Éà',
                'ÁîüÊàêai', 'generative', 'ÁîªÂÉèÁîüÊàê', 'stable diffusion', 'midjourney', 'dall-e',
                
                // „É≠„Éú„ÉÉ„ÉàÈñ¢ÈÄ£
                'robot', '„É≠„Éú„ÉÉ„Éà', '„É≠„Éú„ÉÜ„Ç£„ÇØ„Çπ', 'robotics', 'Ëá™ÂãïÂåñ', 'automation',
                '„Éâ„É≠„Éº„É≥', 'drone', '„Ç¢„Éº„É†', 'manipulator', 'Áî£Ê•≠Áî®„É≠„Éú„ÉÉ„Éà',
                
                // Ëá™ÂãïÈÅãËª¢Èñ¢ÈÄ£
                'Ëá™ÂãïÈÅãËª¢', 'autonomous', 'self-driving', 'adas', 'ÈÅãËª¢ÊîØÊè¥',
                'lidar', '„É©„Ç§„ÉÄ„Éº', '„Çª„É≥„Çµ„Éº', 'sensor', 'tesla', 'waymo',
                
                // ÈÄö‰ø°Èñ¢ÈÄ£
                '5g', '6g', 'ÈÄö‰ø°', 'network', '„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ', 'wifi', 'bluetooth',
                'iot', 'edge', '„Ç®„ÉÉ„Ç∏', 'cloud', '„ÇØ„É©„Ç¶„Éâ', '„Éá„Éº„Çø„Çª„É≥„Çø„Éº'
            ];
            
            return articles.filter(article => {
                const text = `${article.title} ${article.description} ${article.category}`.toLowerCase();
                return relevantKeywords.some(keyword => text.includes(keyword.toLowerCase()));
            });
        }
        
        // ÊôÇÈñìÁØÑÂõ≤„Éï„Ç£„É´„Çø
        function filterByTimeRange(articles, range) {
            const now = new Date();
            const cutoff = new Date();
            
            switch(range) {
                case 'today':
                    cutoff.setHours(0, 0, 0, 0);
                    break;
                case 'week':
                    cutoff.setDate(now.getDate() - 7);
                    break;
                case 'month':
                    cutoff.setMonth(now.getMonth() - 1);
                    break;
            }
            
            return articles.filter(article => {
                const articleDate = new Date(article.date);
                return articleDate >= cutoff;
            });
        }
        
        // „Éà„É¨„É≥„ÉâÊäΩÂá∫„Ç¢„É´„Ç¥„É™„Ç∫„É†
        function extractTrends(articles) {
            const wordFrequency = {};
            const wordContext = {};
            const stopWords = new Set([
                '„ÅÆ', '„Å´', '„Çí', '„ÅØ', '„Åå', '„Å®', '„Åß', '„Å¶', '„Åü', '„Åô„Çã', '„Å™„ÅÑ', '„ÅÇ„Çã', '„Åì„Å®', '„ÇÇ„ÅÆ',
                'the', 'be', 'to', 'of', 'and', 'a', 'in', 'that', 'have', 'i', 'it', 'for', 'not', 'on', 'with'
            ]);
            
            // ÂçòË™ûÈ†ªÂ∫¶„Ç´„Ç¶„É≥„Éà
            articles.forEach(article => {
                const text = `${article.title} ${article.description}`.toLowerCase();
                
                // ÈáçË¶Å„Å™Âõ∫ÊúâÂêçË©û„Å®„Éï„É¨„Éº„Ç∫„ÇíÊäΩÂá∫
                const patterns = [
                    /chatgpt|gpt-4|gpt-3/gi,
                    /claude|anthropic/gi,
                    /gemini|bard|google ai/gi,
                    /openai/gi,
                    /microsoft|copilot/gi,
                    /stable diffusion|midjourney|dall-e/gi,
                    /hugging face/gi,
                    /meta|llama/gi,
                    /nvidia/gi,
                    /ÁîüÊàêai|generative ai/gi,
                    /Â§ßË¶èÊ®°Ë®ÄË™û„É¢„Éá„É´|llm/gi,
                    /ÁîªÂÉèÁîüÊàê|image generation/gi,
                    /Ëá™ÂãïÈÅãËª¢|autonomous driving/gi,
                    /ÈáèÂ≠ê„Ç≥„É≥„Éî„É•„Éº„Çø|quantum/gi,
                    /„Éñ„É≠„ÉÉ„ÇØ„ÉÅ„Çß„Éº„É≥|blockchain/gi
                ];
                
                patterns.forEach(pattern => {
                    const matches = text.match(pattern);
                    if (matches) {
                        matches.forEach(match => {
                            const normalized = normalizeWord(match);
                            wordFrequency[normalized] = (wordFrequency[normalized] || 0) + 1;
                            
                            // „Ç≥„É≥„ÉÜ„Ç≠„Çπ„ÉàË®òÈå≤
                            if (!wordContext[normalized]) {
                                wordContext[normalized] = [];
                            }
                            wordContext[normalized].push({
                                title: article.title,
                                date: article.date,
                                source: article.source
                            });
                        });
                    }
                });
                
                // ‰∏ÄËà¨ÁöÑ„Å™ÈáçË¶ÅÂçòË™û„ÇÇÊäΩÂá∫
                const words = text.split(/[\s,„ÄÇ„ÄÅ,.!?;:()ÔºàÔºâ„Äå„Äç„Äé„Äè\[\]{}]/)
                    .filter(word => word.length > 2 && !stopWords.has(word.toLowerCase()));
                
                words.forEach(word => {
                    if (/^[a-z0-9]+$/i.test(word) || /^[\u4e00-\u9fa5]+$/.test(word)) {
                        const normalized = normalizeWord(word);
                        wordFrequency[normalized] = (wordFrequency[normalized] || 0) + 0.5;
                    }
                });
            });
            
            // „Éà„É¨„É≥„Éâ„Çπ„Ç≥„Ç¢Ë®àÁÆó
            const trends = Object.entries(wordFrequency)
                .filter(([word, count]) => count >= 2) // ÊúÄ‰Ωé2ÂõûÂá∫Áèæ
                .map(([word, count]) => {
                    const context = wordContext[word] || [];
                    const recentCount = context.filter(c => {
                        const date = new Date(c.date);
                        const daysAgo = (new Date() - date) / (1000 * 60 * 60 * 24);
                        return daysAgo <= 3;
                    }).length;
                    
                    // „Çπ„Ç≥„Ç¢Ë®àÁÆóÔºàÈ†ªÂ∫¶ + Êñ∞„Åó„Åï„Éú„Éº„Éä„ÇπÔºâ
                    const score = count + (recentCount * 2);
                    
                    // „Éà„É¨„É≥„Éâ„Çπ„ÉÜ„Éº„Çø„ÇπÂà§ÂÆö
                    let status = 'normal';
                    if (recentCount > count * 0.5) status = 'hot';
                    else if (recentCount > count * 0.3) status = 'rising';
                    else if (context.length === recentCount) status = 'new';
                    
                    return {
                        word: word,
                        count: count,
                        score: score,
                        status: status,
                        articles: context
                    };
                })
                .sort((a, b) => b.score - a.score)
                .slice(0, 50); // ‰∏ä‰Ωç50„Éà„É¨„É≥„Éâ
            
            return trends;
        }
        
        // ÂçòË™û„ÅÆÊ≠£Ë¶èÂåñÔºàË®ÄË™ûÁµ±ÂêàÔºâ
        function normalizeWord(word) {
            const mappings = {
                'chatgpt': 'ChatGPT',
                'gpt-4': 'GPT-4',
                'gpt-3': 'GPT-3',
                'claude': 'Claude',
                'anthropic': 'Anthropic',
                'openai': 'OpenAI',
                'gemini': 'Gemini',
                'bard': 'Bard',
                'google ai': 'Google AI',
                'microsoft': 'Microsoft',
                'copilot': 'Copilot',
                'stable diffusion': 'Stable Diffusion',
                'midjourney': 'Midjourney',
                'dall-e': 'DALL-E',
                'hugging face': 'Hugging Face',
                'meta': 'Meta',
                'llama': 'LLaMA',
                'nvidia': 'NVIDIA',
                'ÁîüÊàêai': 'ÁîüÊàêAI',
                'generative ai': 'ÁîüÊàêAI',
                '‰∫∫Â∑•Áü•ËÉΩ': 'AI',
                'artificial intelligence': 'AI',
                'Ê©üÊ¢∞Â≠¶Áøí': 'Machine Learning',
                'machine learning': 'Machine Learning',
                'Ê∑±Â±§Â≠¶Áøí': 'Deep Learning',
                'deep learning': 'Deep Learning',
                'Â§ßË¶èÊ®°Ë®ÄË™û„É¢„Éá„É´': 'LLM',
                'llm': 'LLM',
                'ÁîªÂÉèÁîüÊàê': 'Image Generation',
                'image generation': 'Image Generation',
                'Ëá™ÂãïÈÅãËª¢': 'Autonomous Driving',
                'autonomous driving': 'Autonomous Driving'
            };
            
            const lower = word.toLowerCase();
            return mappings[lower] || word;
        }
        
        // „Éà„É¨„É≥„ÉâË°®Á§∫
        function displayTrends(trends) {
            const wordCloud = document.getElementById('wordCloud');
            wordCloud.innerHTML = '';
            
            if (trends.length === 0) {
                wordCloud.innerHTML = '<div class="loading">„Éà„É¨„É≥„Éâ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü</div>';
                return;
            }
            
            currentTrends = trends;
            
            trends.forEach((trend, index) => {
                const wordElement = document.createElement('div');
                wordElement.className = 'trend-word';
                
                // „Çµ„Ç§„Ç∫„ÇØ„É©„ÇπÊ±∫ÂÆö
                if (index < 3) wordElement.classList.add('trend-huge');
                else if (index < 8) wordElement.classList.add('trend-large');
                else if (index < 15) wordElement.classList.add('trend-medium');
                else if (index < 30) wordElement.classList.add('trend-small');
                else wordElement.classList.add('trend-tiny');
                
                // „Çπ„ÉÜ„Éº„Çø„Çπ„Éê„ÉÉ„Ç∏
                if (trend.status === 'hot') {
                    wordElement.innerHTML = `${trend.word} <span class="trend-status status-hot">üî•</span>`;
                } else if (trend.status === 'rising') {
                    wordElement.innerHTML = `${trend.word} <span class="trend-status status-rising">üìà</span>`;
                } else if (trend.status === 'new') {
                    wordElement.innerHTML = `${trend.word} <span class="trend-status status-new">üÜï</span>`;
                } else {
                    wordElement.textContent = trend.word;
                }
                
                // „ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„Éà
                wordElement.onclick = () => showFilteredArticles(trend);
                
                // „Çø„Ç§„Éà„É´Ôºà„Éõ„Éê„ÉºÊôÇ„ÅÆÊÉÖÂ†±Ôºâ
                wordElement.title = `${trend.count}‰ª∂„ÅÆË®ò‰∫ã„ÅßË®ÄÂèä`;
                
                wordCloud.appendChild(wordElement);
            });
        }
        
        // „Éï„Ç£„É´„Çø„ÉºÊ∏à„ÅøË®ò‰∫ãË°®Á§∫
        function showFilteredArticles(trend) {
            selectedTrend = trend;
            const filteredDiv = document.getElementById('filteredArticles');
            const articlesList = document.getElementById('articlesList');
            
            // „Éà„É¨„É≥„Éâ„Å´Èñ¢ÈÄ£„Åô„ÇãË®ò‰∫ã„ÇíÊ§úÁ¥¢
            const relatedArticles = allArticles.filter(article => {
                const text = `${article.title} ${article.description}`.toLowerCase();
                return text.includes(trend.word.toLowerCase());
            });
            
            // Ë®ò‰∫ã„É™„Çπ„ÉàÁîüÊàê
            articlesList.innerHTML = `
                <h4 style="color: #667eea; margin-bottom: 15px;">
                    „Äå${trend.word}„Äç„Å´Èñ¢„Åô„ÇãË®ò‰∫ã (${relatedArticles.length}‰ª∂)
                </h4>
            `;
            
            relatedArticles.slice(0, 20).forEach(article => {
                const item = document.createElement('div');
                item.className = 'article-item';
                item.innerHTML = `
                    <div class="article-title">${article.title}</div>
                    <div class="article-meta">
                        ${article.source} | ${article.date} | ${article.category}
                    </div>
                `;
                articlesList.appendChild(item);
            });
            
            filteredDiv.classList.add('active');
            filteredDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Áµ±Ë®àÊõ¥Êñ∞
        function updateStats(trends) {
            document.getElementById('totalTrends').textContent = trends.length;
            document.getElementById('hotTrends').textContent = 
                trends.filter(t => t.status === 'hot').length;
            document.getElementById('newTrends').textContent = 
                trends.filter(t => t.status === 'new').length;
            
            const now = new Date();
            document.getElementById('updateTime').textContent = 
                `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
        }
        
        // ÊôÇÈñìÁØÑÂõ≤Â§âÊõ¥
        function changeTimeRange(range) {
            timeRange = range;
            analyzeTrends();
        }
        
        // Ë®ÄË™ûÁµ±ÂêàÂàá„ÇäÊõø„Åà
        function toggleLanguage() {
            languageIntegration = !languageIntegration;
            document.getElementById('langMode').textContent = languageIntegration ? 'ON' : 'OFF';
            analyzeTrends();
        }
        
        // ÊôÇÁ≥ªÂàóË°®Á§∫
        function showTimeline() {
            alert('ÊôÇÁ≥ªÂàó„Ç∞„É©„ÉïÊ©üËÉΩ„ÅØÈñãÁô∫‰∏≠„Åß„Åô');
        }
        
        // Á©∫Áä∂ÊÖãË°®Á§∫
        function showEmptyState() {
            const wordCloud = document.getElementById('wordCloud');
            wordCloud.innerHTML = `
                <div class="loading">
                    <p>„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                    <p style="margin-top: 10px; font-size: 0.9em;">
                        06_database„Åã„ÇâË®ò‰∫ã„ÇíË™≠„ÅøËæº„Çì„Åß„Åè„Å†„Åï„ÅÑ
                    </p>
                </div>
            `;
        }
    </script>
</body>
</html>